var _t=Object.defineProperty;var Mt=(t,s,r)=>s in t?_t(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var be=(t,s,r)=>(Mt(t,typeof s!="symbol"?s+"":s,r),r);import{r as j,a as It,R as W}from"./vendor-b1791c80.js";import{c as Bt,a as tt}from"./utils-2aeefcae.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var st={exports:{}},je={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ft=j,Tt=Symbol.for("react.element"),Dt=Symbol.for("react.fragment"),Lt=Object.prototype.hasOwnProperty,Rt=Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ot={key:!0,ref:!0,__self:!0,__source:!0};function rt(t,s,r){var n,a={},o=null,l=null;r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),s.ref!==void 0&&(l=s.ref);for(n in s)Lt.call(s,n)&&!Ot.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Tt,type:t,key:o,ref:l,props:a,_owner:Rt.current}}je.Fragment=Dt;je.jsx=rt;je.jsxs=rt;st.exports=je;var e=st.exports;var Me={},Pe=It;Me.createRoot=Pe.createRoot,Me.hydrateRoot=Pe.hydrateRoot;const nt=j.createContext(void 0),at=()=>{const t=j.useContext(nt);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},$t=({children:t})=>{const[s,r]=j.useState(()=>{const a=localStorage.getItem("theme");return(a==="dark"||a==="light"?a:null)||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});j.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(s),localStorage.setItem("theme",s)},[s]);const n=()=>{r(a=>a==="light"?"dark":"light")};return e.jsx(nt.Provider,{value:{theme:s,toggleTheme:n},children:t})},Te="-",Pt=t=>{const s=Wt(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const i=l.split(Te);return i[0]===""&&i.length!==1&&i.shift(),ot(i,s)||Kt(l)},getConflictingClassGroupIds:(l,i)=>{const c=r[l]||[];return i&&n[l]?[...c,...n[l]]:c}}},ot=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?ot(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const o=t.join(Te);return(l=s.validators.find(({validator:i})=>i(o)))==null?void 0:l.classGroupId},Ke=/^\[(.+)\]$/,Kt=t=>{if(Ke.test(t)){const s=Ke.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Wt=t=>{const{theme:s,classGroups:r}=t,n={nextPart:new Map,validators:[]};for(const a in r)Ie(r[a],n,a,s);return n},Ie=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?s:We(s,a);o.classGroupId=r;return}if(typeof a=="function"){if(Vt(a)){Ie(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,l])=>{Ie(l,We(s,o),r,n)})})},We=(t,s)=>{let r=t;return s.split(Te).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Vt=t=>t.isThemeGetter,Ut=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(o,l)=>{r.set(o,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set(o,l){r.has(o)?r.set(o,l):a(o,l)}}},Be="!",Fe=":",Gt=Fe.length,qt=t=>{const{prefix:s,experimentalParseClassName:r}=t;let n=a=>{const o=[];let l=0,i=0,c=0,h;for(let g=0;g<a.length;g++){let v=a[g];if(l===0&&i===0){if(v===Fe){o.push(a.slice(c,g)),c=g+Gt;continue}if(v==="/"){h=g;continue}}v==="["?l++:v==="]"?l--:v==="("?i++:v===")"&&i--}const u=o.length===0?a:a.substring(c),k=Ht(u),d=k!==u,m=h&&h>c?h-c:void 0;return{modifiers:o,hasImportantModifier:d,baseClassName:k,maybePostfixModifierPosition:m}};if(s){const a=s+Fe,o=n;n=l=>l.startsWith(a)?o(l.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(r){const a=n;n=o=>r({className:o,parseClassName:a})}return n},Ht=t=>t.endsWith(Be)?t.substring(0,t.length-1):t.startsWith(Be)?t.substring(1):t,Jt=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let o=[];return n.forEach(l=>{l[0]==="["||s[l]?(a.push(...o.sort(),l),o=[]):o.push(l)}),a.push(...o.sort()),a}},Zt=t=>({cache:Ut(t.cacheSize),parseClassName:qt(t),sortModifiers:Jt(t),...Pt(t)}),Qt=/\s+/,Yt=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=s,l=[],i=t.trim().split(Qt);let c="";for(let h=i.length-1;h>=0;h-=1){const u=i[h],{isExternal:k,modifiers:d,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}=r(u);if(k){c=u+(c.length>0?" "+c:c);continue}let x=!!v,M=n(x?g.substring(0,v):g);if(!M){if(!x){c=u+(c.length>0?" "+c:c);continue}if(M=n(g),!M){c=u+(c.length>0?" "+c:c);continue}x=!1}const $=o(d).join(":"),F=m?$+Be:$,S=F+M;if(l.includes(S))continue;l.push(S);const p=a(M,x);for(let C=0;C<p.length;++C){const B=p[C];l.push(F+B)}c=u+(c.length>0?" "+c:c)}return c};function Xt(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=it(s))&&(n&&(n+=" "),n+=r);return n}const it=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=it(t[n]))&&(r&&(r+=" "),r+=s);return r};function es(t,...s){let r,n,a,o=l;function l(c){const h=s.reduce((u,k)=>k(u),t());return r=Zt(h),n=r.cache.get,a=r.cache.set,o=i,i(c)}function i(c){const h=n(c);if(h)return h;const u=Yt(c,r);return a(c,u),u}return function(){return o(Xt.apply(null,arguments))}}const L=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},lt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ct=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ts=/^\d+\/\d+$/,ss=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ns=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,as=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,os=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,re=t=>ts.test(t),A=t=>!!t&&!Number.isNaN(Number(t)),Q=t=>!!t&&Number.isInteger(Number(t)),Ce=t=>t.endsWith("%")&&A(t.slice(0,-1)),J=t=>ss.test(t),is=()=>!0,ls=t=>rs.test(t)&&!ns.test(t),dt=()=>!1,cs=t=>as.test(t),ds=t=>os.test(t),ms=t=>!f(t)&&!y(t),us=t=>ne(t,ht,dt),f=t=>lt.test(t),ee=t=>ne(t,pt,ls),Se=t=>ne(t,bs,A),Ve=t=>ne(t,mt,dt),hs=t=>ne(t,ut,ds),fe=t=>ne(t,xt,cs),y=t=>ct.test(t),oe=t=>ae(t,pt),ps=t=>ae(t,fs),Ue=t=>ae(t,mt),xs=t=>ae(t,ht),gs=t=>ae(t,ut),ye=t=>ae(t,xt,!0),ne=(t,s,r)=>{const n=lt.exec(t);return n?n[1]?s(n[1]):r(n[2]):!1},ae=(t,s,r=!1)=>{const n=ct.exec(t);return n?n[1]?s(n[1]):r:!1},mt=t=>t==="position"||t==="percentage",ut=t=>t==="image"||t==="url",ht=t=>t==="length"||t==="size"||t==="bg-size",pt=t=>t==="length",bs=t=>t==="number",fs=t=>t==="family-name",xt=t=>t==="shadow",ys=()=>{const t=L("color"),s=L("font"),r=L("text"),n=L("font-weight"),a=L("tracking"),o=L("leading"),l=L("breakpoint"),i=L("container"),c=L("spacing"),h=L("radius"),u=L("shadow"),k=L("inset-shadow"),d=L("text-shadow"),m=L("drop-shadow"),g=L("blur"),v=L("perspective"),x=L("aspect"),M=L("ease"),$=L("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],p=()=>[...S(),y,f],C=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],w=()=>[y,f,c],R=()=>[re,"full","auto",...w()],Y=()=>[Q,"none","subgrid",y,f],X=()=>["auto",{span:["full",Q,y,f]},Q,y,f],H=()=>[Q,"auto",y,f],G=()=>["auto","min","max","fr",y,f],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],D=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...w()],U=()=>[re,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],N=()=>[t,y,f],b=()=>[...S(),Ue,Ve,{position:[y,f]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",xs,us,{size:[y,f]}],P=()=>[Ce,oe,ee],E=()=>["","none","full",h,y,f],q=()=>["",A,oe,ee],he=()=>["solid","dashed","dotted","double"],Oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[A,Ce,Ue,Ve],$e=()=>["","none",g,y,f],pe=()=>["none",A,y,f],xe=()=>["none",A,y,f],Ne=()=>[A,y,f],ge=()=>[re,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[J],breakpoint:[J],color:[is],container:[J],"drop-shadow":[J],ease:["in","out","in-out"],font:[ms],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[J],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[J],shadow:[J],spacing:["px",A],text:[J],"text-shadow":[J],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",re,f,y,x]}],container:["container"],columns:[{columns:[A,f,y,i]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:p()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Q,"auto",y,f]}],basis:[{basis:[re,"full","auto",i,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[A,re,"auto","initial","none",f]}],grow:[{grow:["",A,y,f]}],shrink:[{shrink:["",A,y,f]}],order:[{order:[Q,"first","last","none",y,f]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...D(),"normal"]}],"justify-self":[{"justify-self":["auto",...D()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...D(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...D(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...D(),"baseline"]}],"place-self":[{"place-self":["auto",...D()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[i,"screen",...U()]}],"min-w":[{"min-w":[i,"screen","none",...U()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",r,oe,ee]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,y,Se]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ce,f]}],"font-family":[{font:[ps,f,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,y,f]}],"line-clamp":[{"line-clamp":[A,"none",y,Se]}],leading:[{leading:[o,...w()]}],"list-image":[{"list-image":["none",y,f]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",y,f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[A,"from-font","auto",y,ee]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[A,"auto",y,f]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",y,f]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",y,f]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:b()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Q,y,f],radial:["",y,f],conic:[Q,y,f]},gs,hs]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:E()}],"rounded-s":[{"rounded-s":E()}],"rounded-e":[{"rounded-e":E()}],"rounded-t":[{"rounded-t":E()}],"rounded-r":[{"rounded-r":E()}],"rounded-b":[{"rounded-b":E()}],"rounded-l":[{"rounded-l":E()}],"rounded-ss":[{"rounded-ss":E()}],"rounded-se":[{"rounded-se":E()}],"rounded-ee":[{"rounded-ee":E()}],"rounded-es":[{"rounded-es":E()}],"rounded-tl":[{"rounded-tl":E()}],"rounded-tr":[{"rounded-tr":E()}],"rounded-br":[{"rounded-br":E()}],"rounded-bl":[{"rounded-bl":E()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[A,y,f]}],"outline-w":[{outline:["",A,oe,ee]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",u,ye,fe]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",k,ye,fe]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[A,ee]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",d,ye,fe]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[A,y,f]}],"mix-blend":[{"mix-blend":[...Oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[A]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[y,f]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[A]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:b()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",y,f]}],filter:[{filter:["","none",y,f]}],blur:[{blur:$e()}],brightness:[{brightness:[A,y,f]}],contrast:[{contrast:[A,y,f]}],"drop-shadow":[{"drop-shadow":["","none",m,ye,fe]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",A,y,f]}],"hue-rotate":[{"hue-rotate":[A,y,f]}],invert:[{invert:["",A,y,f]}],saturate:[{saturate:[A,y,f]}],sepia:[{sepia:["",A,y,f]}],"backdrop-filter":[{"backdrop-filter":["","none",y,f]}],"backdrop-blur":[{"backdrop-blur":$e()}],"backdrop-brightness":[{"backdrop-brightness":[A,y,f]}],"backdrop-contrast":[{"backdrop-contrast":[A,y,f]}],"backdrop-grayscale":[{"backdrop-grayscale":["",A,y,f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A,y,f]}],"backdrop-invert":[{"backdrop-invert":["",A,y,f]}],"backdrop-opacity":[{"backdrop-opacity":[A,y,f]}],"backdrop-saturate":[{"backdrop-saturate":[A,y,f]}],"backdrop-sepia":[{"backdrop-sepia":["",A,y,f]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",y,f]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[A,"initial",y,f]}],ease:[{ease:["linear","initial",M,y,f]}],delay:[{delay:[A,y,f]}],animate:[{animate:["none",$,y,f]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,y,f]}],"perspective-origin":[{"perspective-origin":p()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:xe()}],"scale-x":[{"scale-x":xe()}],"scale-y":[{"scale-y":xe()}],"scale-z":[{"scale-z":xe()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[y,f,"","none","gpu","cpu"]}],"transform-origin":[{origin:p()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",y,f]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",y,f]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[A,oe,ee,Se]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ks=es(ys);function se(...t){return ks(Bt(t))}const vs=tt("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{variants:{variant:{primary:"bg-emerald-600 text-white shadow-sm hover:bg-emerald-700 hover:shadow-md focus:ring-emerald-500",secondary:"bg-white text-stone-700 border border-stone-300 shadow-sm hover:bg-stone-50 hover:shadow-md focus:ring-stone-500",success:"bg-green-600 text-white shadow-sm hover:bg-green-700 hover:shadow-md focus:ring-green-500",danger:"bg-red-600 text-white shadow-sm hover:bg-red-700 hover:shadow-md focus:ring-red-500",warning:"bg-orange-600 text-white shadow-sm hover:bg-orange-700 hover:shadow-md focus:ring-orange-500",ghost:"text-stone-600 hover:text-stone-900 hover:bg-stone-100 focus:ring-stone-500",outline:"border border-stone-300 bg-transparent text-stone-700 hover:bg-stone-50 focus:ring-stone-500"},size:{sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"}},defaultVariants:{variant:"primary",size:"md"}}),I=W.forwardRef(({className:t,variant:s,size:r,loading:n,leftIcon:a,rightIcon:o,children:l,disabled:i,...c},h)=>e.jsxs("button",{className:se(vs({variant:s,size:r}),t),ref:h,disabled:i||n,...c,children:[n&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!n&&a&&e.jsx("span",{className:"mr-1",children:a}),l,!n&&o&&e.jsx("span",{className:"ml-1",children:o})]}));I.displayName="Button";const Ge={success:"bg-green-100 text-green-800 border-green-400 dark:bg-green-800 dark:text-green-100 dark:border-green-600",error:"bg-red-100 text-red-800 border-red-400 dark:bg-red-800 dark:text-red-100 dark:border-red-600",warning:"bg-yellow-100 text-yellow-800 border-yellow-400 dark:bg-yellow-700 dark:text-yellow-100 dark:border-yellow-500",info:"bg-blue-100 text-blue-800 border-blue-400 dark:bg-blue-800 dark:text-blue-100 dark:border-blue-600"},ws=({message:t,type:s="info",onClose:r})=>e.jsxs("div",{className:`p-4 rounded-md shadow-lg border w-full flex items-start text-sm ${Ge[s]||Ge.info}`,"data-testid":"toast-message",role:"alert","aria-live":"assertive",children:[e.jsx("div",{className:"flex-1 font-medium",children:t}),e.jsx(I,{onClick:r,variant:"secondary",className:"ml-4 p-1 h-7 w-7 flex items-center justify-center text-slate-500 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white","aria-label":"Toast schließen",title:"Schließen",children:"×"})]}),js=({toasts:t,removeToast:s})=>e.jsx("div",{className:"fixed top-4 right-4 z-[10001] space-y-3 w-full max-w-xs sm:max-w-sm",children:t.map(r=>e.jsx(ws,{...r,onClose:()=>s(r.id)},r.id))}),gt=j.createContext(null),Ns=({children:t})=>{const[s,r]=j.useState([]),n=j.useRef(0),a=j.useCallback(l=>{r(i=>i.filter(c=>c.id!==l))},[]),o=j.useCallback((l,i="info",c=3e3)=>{const h=n.current++;r(u=>[...u,{id:h,message:l,type:i}]),c&&c>0&&setTimeout(()=>a(h),c)},[a]);return e.jsxs(gt.Provider,{value:{addToast:o,removeToast:a},children:[t,e.jsx(js,{toasts:s,removeToast:a})]})},De=()=>{const t=j.useContext(gt);if(!t)throw new Error("useToasts must be used within a ToastProvider");return t},ze={tapWater:{name:"Leitungswasser",ph:7.5,ec:.5,ca:50,mg:10,na:20,s:5,fe:.05,mn:.02,zn:.01,cu:.005,b:.01,mo:.001},roWater:{name:"Umkehrosmosewasser",ph:6.5,ec:.05,ca:0,mg:0,na:0,s:0,fe:0,mn:0,zn:0,cu:0,b:0,mo:0}},ue="nutricalc_custom_fertilizers",Cs="basic",Ss="advanced",zs="analysis",As="customFertilizer",bt="settings",Es="references",ft="mixingassistant",yt="watering",K=[{id:Cs,label:"Setup"},{id:Ss,label:"Details"},{id:zs,label:"Analyse"},{id:As,label:"Dünger"},{id:bt,label:"Einstellungen"},{id:ft,label:"Misch-Assistent"},{id:yt,label:"Gießplaner"},{id:Es,label:"Referenzen"}],te={early_veg:{name:"Frühe Vegetation",n:[100,150],p:[30,50],k:[100,150],ec:[.8,1.2]},late_veg:{name:"Späte Vegetation",n:[150,200],p:[50,70],k:[150,200],ec:[1.2,1.6]},early_flower:{name:"Frühe Blüte",n:[100,150],p:[70,90],k:[200,250],ec:[1.4,1.8]},mid_flower:{name:"Mittlere Blüte",n:[80,120],p:[90,110],k:[250,300],ec:[1.6,2]},late_flower:{name:"Späte Blüte",n:[50,80],p:[110,130],k:[300,350],ec:[1.8,2.2]}},ie={ro:{name:"Umkehrosmose"},tap:{name:"Leitungswasser"},custom:{name:"Eigenes Profil"}},Z=[{key:"n",label:"Stickstoff (N)"},{key:"p",label:"Phosphor (P)"},{key:"k",label:"Kalium (K)"},{key:"ca",label:"Calcium (Ca)"},{key:"mg",label:"Magnesium (Mg)"},{key:"s",label:"Schwefel (S)"},{key:"fe",label:"Eisen (Fe)"},{key:"mn",label:"Mangan (Mn)"},{key:"zn",label:"Zink (Zn)"},{key:"cu",label:"Kupfer (Cu)"},{key:"b",label:"Bor (B)"},{key:"mo",label:"Molybdän (Mo)"},{key:"ec",label:"EC"}],qe={atami_ata_calmag:{name:"Atami ATA CalMag",type:"liquid",unit:"ml",composition:{n:72.616,p:0,k:0,ca:60.87224,mg:18.8739,s:0,b:0,cu:0,fe:.3756,mn:0,mo:0,zn:0}},atami_ata_clean:{name:"Atami ATA Clean",type:"liquid",unit:"ml",composition:{n:10.36,p:101.159702,k:65.581649,ca:0,mg:0,s:0,b:0,cu:0,fe:.3885,mn:0,mo:0,zn:0}},atami_ata_terra_leaves:{name:"Atami ATA Terra Leaves",type:"liquid",unit:"ml",composition:{n:23.69,p:4.944412,k:23.942968,ca:0,mg:6.83199,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},atami_ata_terra_max:{name:"Atami ATA Terra Max",type:"liquid",unit:"ml",composition:{n:24.42,p:8.719272,k:35.939358,ca:0,mg:4.68531,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},atami_bcuzz_bloom_stimulator:{name:"Atami B'cuzz Bloom Stimulator",type:"liquid",unit:"ml",composition:{n:.998,p:.78394896,k:1.98849504,ca:1.997996,mg:1.203588,s:.51896,b:0,cu:.00499,fe:0,mn:0,mo:0,zn:.00499}},atami_bcuzz_blossom_builder:{name:"Atami B'cuzz Blossom Builder",type:"liquid",unit:"ml",description:"",composition:{n:0,p:108.017728,k:254.0412,ca:0,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},atami_bcuzz_coco_nutrition_a:{name:"Atami B'cuzz Coco Nutrition A",type:"liquid",unit:"ml",description:"",composition:{n:60.75,p:0,k:50.43465,ca:48.6486,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},atami_bcuzz_coco_nutrition_b:{name:"Atami B'cuzz Coco Nutrition B",type:"liquid",unit:"ml",description:"",composition:{n:0,p:19.847472,k:56.636244,ca:0,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},atami_bcuzz_premium_plant_powder:{name:"Atami B'cuzz Premium Plant Powder",type:"powder",unit:"g",description:"",composition:{n:90,p:30.548,k:141.134,ca:28.6,mg:18.09,s:0,b:.2,cu:.004,fe:.9,mn:.4,mo:.03,zn:.5}},athena_blended_bloom_a:{name:"Athena Blended Bloom A",type:"liquid",unit:"ml",description:"",composition:{n:47.8,p:0,k:49.60445,ca:38.27824,mg:2.0320497,s:0,b:.1195,cu:0,fe:.717,mn:.15535,mo:.008365,zn:.053775}},athena_blended_bloom_b:{name:"Athena Blended Bloom B",type:"liquid",unit:"ml",composition:{n:8.078,p:30.216336,k:47.90254,ca:0,mg:10.8554472,s:15.002,b:0,cu:.0577,fe:0,mn:0,mo:0,zn:0}},athena_blended_camg:{name:"Athena Blended CaMg",type:"liquid",unit:"ml",composition:{n:22.24,p:0,k:0,ca:23.375352,mg:12.23057664,s:0,b:0,cu:0,fe:.6672,mn:0,mo:0,zn:0}},athena_blended_grow_a:{name:"Athena Blended Grow A",type:"liquid",unit:"ml",composition:{n:48.36,p:0,k:10.037118,ca:50.828778,mg:2.29643505,s:0,b:.1209,cu:0,fe:.7254,mn:.15717,mo:.008463,zn:.054405}},athena_blended_grow_b:{name:"Athena Blended Grow B",type:"liquid",unit:"ml",composition:{n:11.4,p:14.92488,k:47.3214,ca:0,mg:10.1531934,s:14.82,b:0,cu:.057,fe:0,mn:0,mo:0,zn:0}},athena_blended_pk:{name:"Athena Blended PK",type:"liquid",unit:"ml",composition:{n:0,p:26.655312,k:63.38577,ca:0,mg:14.6404179,s:22.905,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},athena_pro_bloom:{name:"Athena Pro Bloom",type:"powder",unit:"g",composition:{n:0,p:52.368,k:199.248,ca:0,mg:30.0294,s:90,b:0,cu:0,fe:1,mn:0,mo:0,zn:0}},athena_pro_core:{name:"Athena Pro Core",type:"powder",unit:"g",composition:{n:140,p:0,k:0,ca:170.17,mg:0,s:0,b:.15,cu:.1,fe:.7,mn:.25,mo:.02,zn:.1}},athena_pro_fade:{name:"Athena Pro Fade",type:"liquid",unit:"ml",composition:{n:0,p:0,k:0,ca:44.52448,mg:0,s:0,b:.1112,cu:.0556,fe:.6672,mn:.14456,mo:.007784,zn:.05004}},athena_pro_grow:{name:"Athena Pro Grow",type:"powder",unit:"g",composition:{n:20,p:34.912,k:166.04,ca:0,mg:30.0294,s:80,b:0,cu:0,fe:1,mn:0,mo:0,zn:0}},biobizz_alg_a_mic:{name:"BioBizz Alg-a-mic",type:"liquid",unit:"ml",composition:{n:2.088,p:.9112032,k:1.7334576,ca:1.045044,mg:1.04502312,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_bio_bloom:{name:"BioBizz Bio Bloom",type:"liquid",unit:"ml",composition:{n:21.1464,p:30.24828048,k:38.65809696,ca:0,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_bio_grow:{name:"BioBizz Bio Grow",type:"liquid",unit:"ml",composition:{n:54.6,p:17.0196,k:64.7556,ca:0,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_bio_heaven:{name:"BioBizz Bio Heaven",type:"liquid",unit:"ml",composition:{n:12.288,p:.13406208,k:.17002496,ca:2.855424,mg:.1234944,s:0,b:.1024,cu:0,fe:2.56,mn:0,mo:0,zn:.03072}},biobizz_calmag:{name:"BioBizz CalMag",type:"liquid",unit:"ml",composition:{n:0,p:0,k:0,ca:35.31528,mg:12.055176,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_fish_mix:{name:"BioBizz Fish Mix",type:"liquid",unit:"ml",composition:{n:61.1,p:5.332808,k:40.580176,ca:0,mg:0,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_root_juice:{name:"BioBizz Root Juice",type:"liquid",unit:"ml",composition:{n:2.3092,p:.8762912,k:1.08357704,ca:0,mg:.0605412,s:0,b:0,cu:0,fe:0,mn:0,mo:0,zn:0}},biobizz_top_max:{name:"BioBizz Top Max",type:"liquid",unit:"ml",composition:{n:1.7068,p:.8762912,k:1.16692912,ca:0,mg:.1816236,s:0,b:.11044,cu:.01004,fe:.1004,mn:0,mo:0,zn:.03012}}},kt=j.createContext(void 0),_s=({children:t})=>{const[s,r]=j.useState([{id:"tapWater",...ze.tapWater,volume:100},{id:"roWater",...ze.roWater,volume:0}]),[n,a]=j.useState(null);j.useEffect(()=>{o()},[s]);const o=()=>{if(s.length===0){a(null);return}let h=0,u=0;const k={};if(Z.forEach(x=>{k[x.key]=0}),k.ec=0,s.forEach(x=>{const{ph:M,ec:$,volume:F}=x;if(F>0){const S=Math.pow(10,-M);h+=S*F,u+=F,Z.forEach(p=>{k[p.key]+=(x[p.key]||0)*F}),k.ec+=$*F}}),u===0){a(null);return}const d=h/u,m=-Math.log10(d),g={};Z.forEach(x=>{g[x.key]=k[x.key]/u});const v=k.ec/u;a({ph:m,ec:v,...g,totalVolume:u})},l=h=>{const u={id:`${h}-${Date.now()}`,...ze[h]||{name:"Neue Quelle",ph:7,ec:.2,ca:0,mg:0,na:0,s:0,fe:0,mn:0,zn:0,cu:0,b:0,mo:0},volume:0};r(k=>[...k,u])},i=h=>{r(u=>u.filter(k=>k.id!==h))},c=(h,u,k)=>{r(d=>d.map(m=>m.id===h?{...m,[u]:k}:m))};return e.jsx(kt.Provider,{value:{waterSources:s,mixedWater:n,addWaterSource:l,removeWaterSource:i,updateWaterSource:c},children:t})},vt=()=>{const t=j.useContext(kt);if(!t)throw new Error("useWater must be used within a WaterProvider");return t},wt=W.memo(({apiKey:t,onSend:s,isLoading:r,displayMessage:n,suggestions:a=[]})=>{const[o,l]=j.useState(""),i=j.useRef(null),c=u=>{u.preventDefault(),!(!o.trim()||!t)&&(s(o.trim()),l(""))},h=u=>{var k;l(u),(k=i.current)==null||k.focus()};return e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-xl p-4 shadow-sm border border-stone-200",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),e.jsxs("div",{className:"flex-grow text-sm text-stone-700 min-h-[36px] leading-relaxed",children:[r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-stone-500",children:"AI denkt nach..."})]}),!r&&n&&e.jsx("div",{className:"prose prose-sm max-w-none",children:n}),!r&&!n&&e.jsx("div",{className:"text-stone-500 italic",children:"Stellen Sie eine Frage zur Nährstoffberechnung..."})]})]}),!r&&n&&a.length>0&&e.jsxs("div",{className:"mt-4 pl-11",children:[e.jsx("div",{className:"text-xs text-stone-500 mb-2",children:"Vorschläge:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((u,k)=>e.jsx("button",{onClick:()=>h(u),className:"px-3 py-1 text-xs bg-white border border-stone-200 rounded-full hover:bg-stone-50 hover:border-emerald-300 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500","aria-label":`Vorschlag: ${u}`,children:u},k))})]}),e.jsxs("form",{onSubmit:c,className:"mt-4 flex items-center gap-3 pl-11",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{ref:i,type:"text",value:o,onChange:u=>l(u.target.value),placeholder:t?"Stellen Sie eine Frage zur Nährstoffberechnung...":"API Key fehlt",className:"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",disabled:r||!t,"aria-label":"KI Frage eingeben"})}),e.jsx(I,{type:"submit",variant:"primary",size:"md",loading:r,disabled:!o.trim()||!t,"aria-label":"Frage senden",rightIcon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),children:"Fragen"})]})]})});wt.displayName="ChatBar";function jt({waterVolume:t,growthStage:s,waterType:r,selectedFertilizers:n,fertilizerDatabase:a,customWaterProfile:o,NUTRIENT_FIELDS:l,GROWTH_STAGES:i,WATER_TYPES:c,mixedWater:h}){if(t<=0)return{nutrients:{},contributions:{},stage:i[s]};let u={},k=0,d=0;if(h)l.forEach(x=>{u[x.key]=h[x.key]||0}),k=h.ec||0,d=h.ph||0;else if(r==="custom")u={ca:(o==null?void 0:o.ca)||0,mg:(o==null?void 0:o.mg)||0,s:(o==null?void 0:o.s)||0,na:(o==null?void 0:o.na)||0,cl:(o==null?void 0:o.cl)||0,no3:(o==null?void 0:o.no3)||0,so4:(o==null?void 0:o.so4)||0,po4:(o==null?void 0:o.po4)||0},k=(o==null?void 0:o.baseEC)||0,d=(o==null?void 0:o.ph)||0;else{const x=c[r];u={ca:x.ca||0,mg:x.mg||0,s:x.s||0,na:0,cl:0,no3:0,so4:0,po4:0},k=x.baseEC!==void 0?x.baseEC:0,d=x.ph||0}const m=l.reduce((x,M)=>(x[M.key]=0,x),{});l.forEach(x=>{m[x.key]=u[x.key]||0}),m.ec=k,m.ph=d;const g={};let v=0;return(n||[]).forEach(x=>{if(!x.active||!x.amount||Number(x.amount)===0)return;const M=a[x.id];if(!(M!=null&&M.composition))return;const $={},F=Number(x.amount);Object.keys(M.composition).forEach(S=>{const p=Number(M.composition[S])||0;if(p===0||!l.find(B=>B.key===S))return;const C=M.type==="powder"?F*p*10/t:F*p/t;$[S]=C,m[S]=(m[S]||0)+C}),g[x.id]=$}),v=((m.n||0)-(u.n||0))*.007+((m.p||0)-(u.p||0))*.005+((m.k||0)-(u.k||0))*.008+((m.ca||0)-u.ca)*.006+((m.mg||0)-u.mg)*.004+((m.s||0)-u.s)*.003,m.ec=k+Math.max(0,v),Object.keys(m).forEach(x=>{m[x]=Number(Math.round(m[x]*100)/100),isNaN(m[x])&&(m[x]=0)}),{nutrients:m,contributions:g,stage:i[s]}}const Nt=W.memo(({selectedFertilizers:t,fertilizerDatabase:s,waterVolume:r,addFertilizer:n,removeFertilizer:a,updateFertilizerAmount:o,toggleFertilizer:l})=>e.jsxs("div",{className:"space-y-2 max-h-[400px] lg:max-h-[calc(100vh-350px)] overflow-y-auto p-0.5",children:[(t||[]).map(i=>{const c=s[i.id];return c?e.jsxs("div",{className:`p-2 border rounded-md ${i.active?"bg-white dark:bg-slate-800 border-blue-300 dark:border-blue-600":"bg-slate-100 dark:bg-slate-900/50 border-slate-300 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("input",{type:"checkbox",id:`fertActive-${i.id}`,checked:i.active,onChange:()=>l(i.id),className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-500 border-slate-300 dark:border-slate-600 rounded focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-slate-700","aria-label":`Aktivieren ${c.name}`}),e.jsx("div",{children:e.jsxs("label",{htmlFor:`fertActive-${i.id}`,className:"text-xs font-medium text-slate-700 dark:text-slate-200 cursor-pointer",children:[c.name,i.id&&i.id.startsWith("custom_")&&e.jsx("span",{className:"ml-1 px-1 py-0.5 text-[10px] bg-yellow-200 dark:bg-yellow-700 text-yellow-800 dark:text-yellow-100 rounded align-middle",children:"Custom"})]})})]}),e.jsx(I,{onClick:()=>a(i.id),variant:"danger",className:"p-0.5 h-7 w-7 flex items-center justify-center text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300","aria-label":`Entfernen ${c.name}`,title:`Entfernen ${c.name}`,children:"×"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("input",{type:"number",value:i.amount,onChange:h=>o(i.id,h.target.value),disabled:!i.active,className:"flex-1 px-2 py-1 border rounded-md text-xs disabled:opacity-60 dark:bg-slate-700 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:c.type==="powder"?"0.01":"0.1","aria-label":`Menge für ${c.name}`}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 min-w-fit",children:[c.unit,"/",r>0?r:1,"L"]})]})]},i.id):null}),e.jsx("div",{className:"border-t border-slate-300 dark:border-slate-700 pt-2 mt-2",children:e.jsxs("select",{onChange:i=>n(i.target.value),className:"w-full px-2 py-1 border rounded-md text-xs dark:bg-slate-700 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",value:"","aria-label":"Dünger hinzufügen",children:[e.jsx("option",{value:"",children:"Dünger hinzufügen..."}),Object.entries(s).sort(([,i],[,c])=>i.name.localeCompare(c.name)).map(([i,c])=>e.jsxs("option",{value:i,disabled:(t||[]).some(h=>h.id===i),children:[c.name,i.startsWith("custom_")?" (Custom)":""]},i))]})})]}));Nt.displayName="FertilizerManager";const Le=()=>{const[t,s]=j.useState(()=>{try{const n=localStorage.getItem("appSettings");return n?JSON.parse(n):{unit:"liter",waterAmount:"",growthPhase:"",waterType:""}}catch{return{unit:"liter",waterAmount:"",growthPhase:"",waterType:""}}});return j.useEffect(()=>{try{localStorage.setItem("appSettings",JSON.stringify(t))}catch{}},[t]),{settings:t,updateSetting:(n,a)=>{s(o=>({...o,[n]:a}))}}},Ct=W.memo(()=>{const{waterSources:t,mixedWater:s,addWaterSource:r,removeWaterSource:n,updateWaterSource:a}=vt(),{settings:o}=Le(),l=(i,c,h)=>{const u=parseFloat(h),k=isNaN(u)?0:Math.max(0,u);a(i,c,k)};return e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"Wasserqualität & Mischung"}),t.map(i=>e.jsxs("div",{className:"mb-4 p-3 border border-gray-700 rounded-md bg-gray-750",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:i.name}),t.length>1&&e.jsx(I,{onClick:()=>n(i.id),variant:"danger",className:"text-red-400 hover:text-red-500 font-bold py-1 px-2 text-xs","aria-label":`Wasserquelle ${i.name} entfernen`,title:`Wasserquelle ${i.name} entfernen`,children:"Entfernen"})]}),e.jsx("h4",{className:"text-md font-semibold text-gray-200 mb-2",children:"Basische Parameter"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-300",children:"pH-Wert:"}),e.jsx("input",{type:"number",step:"0.01",value:i.ph,onChange:c=>l(i.id,"ph",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-300",children:"EC (mS/cm):"}),e.jsx("input",{type:"number",step:"0.01",value:i.ec,onChange:c=>l(i.id,"ec",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]})]}),e.jsx("h4",{className:"text-md font-semibold text-gray-200 mb-2",children:"Mineralgehalt (mg/L)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-300",children:"Ca:"}),e.jsx("input",{type:"number",step:"1",value:i.ca,onChange:c=>l(i.id,"ca",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-300",children:"Mg:"}),e.jsx("input",{type:"number",step:"1",value:i.mg,onChange:c=>l(i.id,"mg",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-300",children:"Na:"}),e.jsx("input",{type:"number",step:"1",value:i.na,onChange:c=>l(i.id,"na",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]}),Z.filter(c=>!["n","p","k","ca","mg","na"].includes(c.key)).map(c=>e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-gray-300",children:[c.label?c.label.split(" ")[0]:c.key.toUpperCase(),":"]}),e.jsx("input",{type:"number",step:"0.001",value:i[c.key],onChange:h=>l(i.id,c.key,h.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]},c.key)),e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-gray-300",children:["Volumen (",o.unit==="liter"?"L":"Gal","):"]}),e.jsx("input",{type:"number",step:"1",value:i.volume,onChange:c=>l(i.id,"volume",c.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block"})]})]})]},i.id)),e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx(I,{onClick:()=>r("tapWater"),variant:"primary","aria-label":"Leitungswasser hinzufügen",title:"Leitungswasser hinzufügen",children:"Leitungswasser hinzufügen"}),e.jsx(I,{onClick:()=>r("roWater"),variant:"primary","aria-label":"Osmosewasser hinzufügen",title:"Osmosewasser hinzufügen",children:"Osmosewasser hinzufügen"}),e.jsx(I,{onClick:()=>r("custom"),variant:"primary","aria-label":"Eigene Quelle hinzufügen",title:"Eigene Quelle hinzufügen",children:"Eigene Quelle hinzufügen"})]}),s&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-700 rounded-md text-white",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Zusammenfassung der Wasserwerte"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-600",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Quelle"}),e.jsx("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Volumen (L)"}),e.jsx("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"pH"}),e.jsx("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"EC (mS/cm)"}),Z.map(i=>e.jsxs("th",{className:"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:[i.label?i.label.split(" ")[0]:i.key.toUpperCase()," (",i.key.toUpperCase(),")"]},i.key))]})}),e.jsxs("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:[t.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-200",children:i.name}),e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-200",children:i.volume.toFixed(1)}),e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-200",children:i.ph.toFixed(2)}),e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-200",children:i.ec.toFixed(2)}),Z.map(c=>e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-gray-200",children:(i[c.key]||0).toFixed(1)},c.key))]},i.id)),e.jsxs("tr",{className:"bg-gray-600 font-bold",children:[e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-white",children:"Gemischt"}),e.jsxs("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-white",children:[s.totalVolume.toFixed(1)," ",o.unit==="liter"?"L":"Gal"]}),e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-white",children:s.ph.toFixed(2)}),e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-white",children:s.ec.toFixed(2)}),Z.map(i=>e.jsx("td",{className:"py-2 px-4 whitespace-nowrap text-sm text-white",children:(s[i.key]||0).toFixed(1)},i.key))]})]})]})})]})]})});Ct.displayName="WaterInput";const Ms=tt("bg-white rounded-xl border border-stone-200 overflow-hidden",{variants:{variant:{default:"shadow-sm",elevated:"shadow-lg hover:shadow-xl transition-shadow duration-300",outlined:"border-2 shadow-none",ghost:"border-none shadow-none bg-transparent"},padding:{none:"",sm:"p-4",md:"p-6",lg:"p-8"}},defaultVariants:{variant:"default",padding:"md"}}),le=W.forwardRef(({className:t,variant:s,padding:r,...n},a)=>e.jsx("div",{ref:a,className:se(Ms({variant:s,padding:r,className:t})),...n}));le.displayName="Card";const ce=W.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:se("px-6 py-4 bg-stone-50 border-b border-stone-200",t),...s}));ce.displayName="CardHeader";const de=W.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:se("text-lg font-semibold text-stone-900 leading-tight",t),...s}));de.displayName="CardTitle";const Is=W.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:se("text-sm text-stone-600 mt-1",t),...s}));Is.displayName="CardDescription";const me=W.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:se("px-6 py-5",t),...s}));me.displayName="CardContent";const Bs=W.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:se("px-6 py-4 bg-stone-50 border-t border-stone-200",t),...s}));Bs.displayName="CardFooter";const ke={ca:0,mg:0,s:0,na:0,cl:0,no3:0,so4:0,po4:0,baseEC:0},Fs=[],Ae=[{key:"n",label:"N (Stickstoff)",unit:"ppm"},{key:"p",label:"P (Phosphor)",unit:"ppm"},{key:"k",label:"K (Kalium)",unit:"ppm"},{key:"ec",label:"EC",unit:"mS/cm"}],Ts=({NUTRIENT_FIELDS:t,GROWTH_STAGES:s,WATER_TYPES:r,fertilizerDatabase:n,onAnalysisUpdate:a,mixedWater:o})=>{var G,V,D,T,U,N;const{addToast:l}=De(),{settings:i}=Le(),[c,h]=j.useState(()=>{const b=i.waterAmount?Number(i.waterAmount):10;return Math.max(.1,b)}),[u,k]=j.useState(i.growthPhase||Object.keys(s)[0]),[d,m]=j.useState(i.waterType||Object.keys(r)[0]),[g,v]=j.useState(ke),[x,M]=j.useState(Fs),$={};Ae.forEach(b=>{$[b.key]=0});const[F,S]=j.useState({nutrients:$,contributions:{},stage:s[u]});j.useEffect(()=>{const b=jt({waterVolume:c,growthStage:u,waterType:d,selectedFertilizers:x,fertilizerDatabase:n||{},customWaterProfile:g,NUTRIENT_FIELDS:t,GROWTH_STAGES:s,WATER_TYPES:r,mixedWater:o}),_={};Ae.forEach(z=>{var P;_[z.key]=((P=b.nutrients)==null?void 0:P[z.key])??0}),S({...b,nutrients:_}),a&&a({NUTRIENT_FIELDS:t,GROWTH_STAGES:s,WATER_TYPES:r,fertilizerDatabase:n,selectedFertilizers:x,waterVolume:c,growthStage:u,waterType:d,customWaterProfile:g,results:b,mixedWater:o})},[c,u,d,g,x,n,t,s,r,o]),j.useEffect(()=>{M(b=>b.filter(_=>n[_.id]))},[n]);const p=b=>{if(!b||x.find(z=>z.id===b))return;const _=n[b];M(z=>[...z,{id:b,amount:(_==null?void 0:_.type)==="powder"?.1:1,active:!0}])},C=b=>{M(_=>_.filter(z=>z.id!==b))},B=(b,_)=>{const z=parseFloat(_);M(P=>P.map(E=>E.id===b?{...E,amount:isNaN(z)||z<0?0:z}:E))},w=b=>{M(_=>_.map(z=>z.id===b?{...z,active:!z.active}:z))},R=()=>{try{const b=JSON.parse(localStorage.getItem("nutricalc_custom_fertilizers")||"[]"),_={selectedFertilizers:x,waterVolume:c,growthStage:u,waterType:d,customWaterProfile:g,customFertilizers:b},z=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),P=URL.createObjectURL(z),E=document.createElement("a");E.href=P,E.download="nutricalc-setup.json",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(P),l("Setup exportiert!","success")}catch{l("Fehler beim Export!","error")}},Y=b=>{const _=b.target.files[0];if(!_)return;const z=new FileReader;z.onload=P=>{try{const E=JSON.parse(P.target.result);if(!E||typeof E!="object")throw new Error;M(Array.isArray(E.selectedFertilizers)?E.selectedFertilizers:[]),h(Number(E.waterVolume)||10),k(E.growthStage||Object.keys(s)[0]),m(E.waterType||Object.keys(r)[0]),v(typeof E.customWaterProfile=="object"?E.customWaterProfile:ke),Array.isArray(E.customFertilizers)&&(localStorage.setItem("nutricalc_custom_fertilizers",JSON.stringify(E.customFertilizers)),window.dispatchEvent&&window.dispatchEvent(new StorageEvent("storage",{key:"nutricalc_custom_fertilizers"}))),l("Setup importiert!","success")}catch{l("Ungültige Datei!","error")}},z.readAsText(_)},X=()=>{let b=[...x],_=!1;u.includes("veg")?(b=b.map(z=>z.id==="hesi_tnt"?{...z,amount:5,active:!0}:z.id==="ta_calmg"?{...z,amount:2.5,active:!0}:z),_=!0):u.includes("flower")&&(b=b.map(z=>z.id==="hesi_bloom"?{...z,amount:6,active:!0}:z),_=!0),_?(M(b),l("Empfohlene Dosierung geladen!","info")):l("Keine Empfehlung für diese Phase.","warning")},H=()=>{window.confirm("Alle Daten (eigene Dünger, Wasserprofil, Auswahl) wirklich löschen?")&&(M([]),v(ke),localStorage.removeItem("nutricalc_custom_fertilizers"),l("Alle Daten wurden zurückgesetzt.","info"))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs(le,{variant:"elevated",children:[e.jsx(ce,{children:e.jsx(de,{children:"Grundeinstellungen"})}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-2",htmlFor:"waterVolume",children:["Wassermenge (",i.unit==="liter"?"Liter":"Gallonen",")"]}),e.jsx("input",{id:"waterVolume",type:"number",min:"0.1",step:"0.1",value:c,onChange:b=>h(Math.max(.1,Number(b.target.value))),className:"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",placeholder:"z.B. 10","aria-label":"Wassermenge"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",htmlFor:"growthStage",children:"Wachstumsphase"}),e.jsx("select",{id:"growthStage",value:u,onChange:b=>k(b.target.value),className:"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors","aria-label":"Wachstumsphase",children:Object.entries(s).map(([b,_])=>e.jsx("option",{value:b,children:_.name},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",htmlFor:"waterType",children:"Wassertyp"}),e.jsx("select",{id:"waterType",value:d,onChange:b=>m(b.target.value),className:"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors","aria-label":"Wassertyp",children:Object.entries(r).map(([b,_])=>e.jsx("option",{value:b,children:_.name},b))})]}),d==="custom"&&e.jsxs("div",{className:"mt-6 p-4 bg-stone-50 rounded-lg border border-stone-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-stone-700 mb-3",children:"Eigenes Wasserprofil"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.keys(ke).map(b=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-stone-600 mb-1",htmlFor:b,children:b.toUpperCase()}),e.jsx("input",{type:"number",name:b,value:g[b],onChange:_=>v(z=>({...z,[b]:parseFloat(_.target.value)||0})),className:"w-full px-3 py-2 bg-white border border-stone-300 rounded-md text-stone-900 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",min:"0",step:"0.01","aria-label":b.toUpperCase()})]},b))})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-stone-200",children:[e.jsx(I,{variant:"secondary",size:"sm",onClick:X,children:"Empfohlene Dosierung laden"}),e.jsx(I,{variant:"outline",size:"sm",onClick:R,children:"Daten exportieren"}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>{var b;return(b=document.getElementById("importFile"))==null?void 0:b.click()},children:"Daten importieren"}),e.jsx(I,{variant:"danger",size:"sm",onClick:H,children:"Alle Daten löschen"})]}),e.jsx("input",{id:"importFile",type:"file",accept:".json",onChange:Y,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ct,{}),o&&e.jsxs(le,{variant:"elevated",children:[e.jsx(ce,{children:e.jsx(de,{children:"Gemischtes Wasser Ergebnis"})}),e.jsxs(me,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:((G=o.ph)==null?void 0:G.toFixed(2))??"N/A"}),e.jsx("div",{className:"text-sm text-stone-600",children:"pH"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:((V=o.ec)==null?void 0:V.toFixed(2))??"N/A"}),e.jsx("div",{className:"text-sm text-stone-600",children:"EC (mS/cm)"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:((D=o.totalVolume)==null?void 0:D.toFixed(1))??"N/A"}),e.jsx("div",{className:"text-sm text-stone-600",children:"Volumen (L)"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:["Ca: ",e.jsxs("span",{className:"font-medium",children:[((T=o.ca)==null?void 0:T.toFixed(1))??"N/A"," mg/L"]})]}),e.jsxs("div",{children:["Mg: ",e.jsxs("span",{className:"font-medium",children:[((U=o.mg)==null?void 0:U.toFixed(1))??"N/A"," mg/L"]})]}),e.jsxs("div",{children:["Na: ",e.jsxs("span",{className:"font-medium",children:[((N=o.na)==null?void 0:N.toFixed(1))??"N/A"," mg/L"]})]})]})]})]}),e.jsxs(le,{variant:"elevated",children:[e.jsx(ce,{children:e.jsx(de,{children:"Dünger & Dosierung"})}),e.jsx(me,{padding:"none",children:e.jsx(Nt,{selectedFertilizers:x,fertilizerDatabase:n,waterVolume:c,addFertilizer:p,removeFertilizer:C,updateFertilizerAmount:B,toggleFertilizer:w})})]})]})]}),F&&F.nutrients&&e.jsxs(le,{variant:"elevated",children:[e.jsx(ce,{children:e.jsx(de,{children:"Berechnete Hauptwerte"})}),e.jsx(me,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:Ae.map(b=>{var _,z,P;return e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-stone-50 to-stone-100 rounded-lg border border-stone-200",children:[e.jsx("div",{className:"text-xs font-medium text-stone-600 mb-1",children:b.label}),e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:((_=F==null?void 0:F.nutrients)==null?void 0:_[b.key])!==void 0&&((z=F.nutrients)==null?void 0:z[b.key])!==null&&!isNaN((P=F.nutrients)==null?void 0:P[b.key])?F.nutrients[b.key].toFixed(2):"0.00"}),e.jsx("div",{className:"text-xs text-stone-500",children:b.unit})]},b.key)})})})]})]})},ve={name:"",type:"liquid",unit:"ml",composition:{n:"",p:"",k:""},concentration:"",description:""},Ds=t=>`custom_${t.replace(/\s+/g,"_").toLowerCase()}_${Date.now()}`,Ls=({refreshFertilizerDatabase:t})=>{const[s,r]=j.useState([]),[n,a]=j.useState(ve),[o,l]=j.useState(null),{addToast:i}=De();j.useEffect(()=>{const d=localStorage.getItem(ue);d&&r(JSON.parse(d))},[]),j.useEffect(()=>{localStorage.setItem(ue,JSON.stringify(s)),t&&t()},[s,t]);const c=d=>{const{name:m,value:g}=d.target;["n","p","k"].includes(m)?a({...n,composition:{...n.composition,[m]:g}}):a({...n,[m]:g})},h=d=>{d.preventDefault();const m={...n,composition:Object.fromEntries(Object.entries(n.composition).map(([g,v])=>[g.toLowerCase(),v]))};if(o!==null)r(s.map(g=>g.id===o?{...m,id:o}:g)),l(null),i("Dünger erfolgreich bearbeitet!","success");else{const g=Ds(n.name);r([...s,{...m,id:g}]),i("Dünger hinzugefügt!","success")}a(ve)},u=d=>{const m=s.find(g=>g.id===d);m&&(a({name:m.name,type:m.type,unit:m.unit,composition:{n:m.composition.n||"",p:m.composition.p||"",k:m.composition.k||""},concentration:m.concentration||"",description:m.description||""}),l(d))},k=d=>{r(s.filter(m=>m.id!==d)),o===d&&(a(ve),l(null)),i("Dünger gelöscht!","info")};return e.jsxs("div",{className:"max-w-xl mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Dünger verwalten"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{name:"name",value:n.name,onChange:c,placeholder:"Name",className:"flex-1 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",required:!0}),e.jsxs("select",{name:"type",value:n.type,onChange:c,className:"px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"liquid",children:"Flüssig"}),e.jsx("option",{value:"powder",children:"Pulver"})]}),e.jsxs("select",{name:"unit",value:n.unit,onChange:c,className:"px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"ml",children:"ml"}),e.jsx("option",{value:"g",children:"g"}),e.jsx("option",{value:"%",children:"%"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{name:"n",value:n.composition.n,onChange:c,placeholder:"N (%)",type:"number",min:"0",step:"0.01",className:"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",required:!0}),e.jsx("input",{name:"p",value:n.composition.p,onChange:c,placeholder:"P (%)",type:"number",min:"0",step:"0.01",className:"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",required:!0}),e.jsx("input",{name:"k",value:n.composition.k,onChange:c,placeholder:"K (%)",type:"number",min:"0",step:"0.01",className:"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",required:!0})]}),e.jsx("input",{name:"concentration",value:n.concentration,onChange:c,placeholder:"Konzentration (g/L oder %)",type:"number",min:"0",step:"0.01",className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100",required:!0}),e.jsx("input",{name:"description",value:n.description,onChange:c,placeholder:"Beschreibung (optional)",className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100"}),e.jsx(I,{type:"submit",variant:"primary","aria-label":o!==null?"Dünger speichern":"Dünger hinzufügen",title:o!==null?"Dünger speichern":"Dünger hinzufügen",children:o!==null?"Speichern":"Hinzufügen"}),o!==null&&e.jsx(I,{type:"button",onClick:()=>{a(ve),l(null)},variant:"secondary",className:"ml-2","aria-label":"Bearbeitung abbrechen",title:"Bearbeitung abbrechen",children:"Abbrechen"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Eigene Dünger"}),e.jsxs("ul",{className:"space-y-2",children:[s.length===0&&e.jsx("li",{className:"text-slate-500",children:"Noch keine Dünger hinzugefügt."}),s.map(d=>e.jsxs("li",{className:"flex items-center gap-2 p-2 bg-slate-100 dark:bg-slate-700 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium",children:[d.name," ",e.jsxs("span",{className:"text-xs text-slate-500",children:["(",d.type,")"]})]}),e.jsxs("div",{className:"text-xs",children:["N: ",d.composition.n,"% , P: ",d.composition.p,"% , K: ",d.composition.k,"% | Konzentration: ",d.concentration]})]}),e.jsx(I,{onClick:()=>u(d.id),variant:"secondary","aria-label":`Dünger ${d.name} bearbeiten`,title:`Dünger ${d.name} bearbeiten`,className:"text-xs",children:"Bearbeiten"}),e.jsx(I,{onClick:()=>k(d.id),variant:"danger","aria-label":`Dünger ${d.name} löschen`,title:`Dünger ${d.name} löschen`,className:"text-xs",children:"Löschen"})]},d.id))]})]})]})},St=(t,s)=>!s||!Array.isArray(s)||s.length!==2?"unknown":t>=s[0]&&t<=s[1]?"optimal":"suboptimal",Rs=t=>{switch(t){case"optimal":return"bg-green-100 dark:bg-green-800/30 text-green-800 dark:text-green-200";case"suboptimal":return"bg-yellow-100 dark:bg-yellow-800/30 text-yellow-800 dark:text-yellow-200";default:return"bg-slate-100 dark:bg-slate-800/30 text-slate-800 dark:text-slate-200"}},Ee=(t,s)=>{if(!s||!Array.isArray(s)||s.length!==2||s[1]===0)return 0;const r=s[1]*1.2;return Math.min(t/r*100,100)},Os=({NUTRIENT_FIELDS:t,GROWTH_STAGES:s,_WATER_TYPES:r,_fertilizerDatabase:n,_selectedFertilizers:a,_waterVolume:o,growthStage:l,_waterType:i,_customWaterProfile:c,results:h})=>{const u=s[l]||{},k=t.filter(m=>{var x;const g=(x=h.nutrients)==null?void 0:x[m.key],v=u[m.key];return g!==void 0&&v&&(g<v[0]||g>v[1])}),d=[];return k.length>0?d.push("Passe die Dosierung deiner Dünger an, um die Nährstoffe in den optimalen Bereich zu bringen."):d.push("Alle Hauptnährstoffe sind im optimalen Bereich!"),e.jsxs("div",{className:"max-w-3xl mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Nährstoff-Analyse"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Nährstoff"}),e.jsx("th",{className:"px-2 py-1 text-left",children:"Wert"}),e.jsx("th",{className:"px-2 py-1 text-left",children:"Optimalbereich"}),e.jsx("th",{className:"px-2 py-1 text-left",children:"Status"})]})}),e.jsx("tbody",{children:t.map(m=>{var M;const g=(M=h.nutrients)==null?void 0:M[m.key],v=u[m.key],x=St(g,v);return e.jsxs("tr",{className:Rs(x),children:[e.jsx("td",{className:"px-2 py-1 font-medium",children:m.label}),e.jsx("td",{className:"px-2 py-1",children:g!==void 0?g:"-"}),e.jsx("td",{className:"px-2 py-1",children:v?`${v[0]} - ${v[1]}`:"-"}),e.jsx("td",{className:"px-2 py-1",children:x==="optimal"?"Optimal":x==="suboptimal"?"Achtung":"Unbekannt"})]},m.key)})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Warnungen"}),k.length===0?e.jsx("div",{className:"text-green-700 dark:text-green-300",children:"Keine Warnungen. Alle Werte sind im optimalen Bereich."}):e.jsx("ul",{className:"list-disc pl-5 text-yellow-700 dark:text-yellow-300",children:k.map(m=>e.jsxs("li",{children:[m.label,": Wert außerhalb des Optimalbereichs!"]},m.key))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Optimierungstipps"}),e.jsx("ul",{className:"list-disc pl-5 text-blue-700 dark:text-blue-300",children:d.map((m,g)=>e.jsx("li",{children:m},g))})]})]})},$s=[{key:"fe",label:"Eisen (Fe)",optimal:[.5,2.5]},{key:"mn",label:"Mangan (Mn)",optimal:[.2,1]},{key:"zn",label:"Zink (Zn)",optimal:[.05,.2]},{key:"cu",label:"Kupfer (Cu)",optimal:[.01,.05]},{key:"b",label:"Bor (B)",optimal:[.02,.1]},{key:"mo",label:"Molybdän (Mo)",optimal:[.005,.02]}],Ps=[{key:"s",label:"Schwefel (S)",optimal:[30,70]}];function He(t,s){if(!s||!Array.isArray(s)||s.length!==2)return"neutral";const[r,n]=s;return t<r*.8?"low":t>n*1.2?"high":t>=r&&t<=n?"optimal":"moderate"}function Je(t){switch(t){case"low":return"text-blue-700 bg-blue-100 dark:text-blue-300 dark:bg-blue-700/30 border border-blue-200 dark:border-blue-600";case"high":return"text-red-700 bg-red-100 dark:text-red-300 dark:bg-red-700/30 border border-red-200 dark:border-red-600";case"optimal":return"text-green-700 bg-green-100 dark:text-green-300 dark:bg-green-700/30 border border-green-200 dark:border-green-600";case"moderate":return"text-yellow-700 bg-yellow-100 dark:text-yellow-300 dark:bg-yellow-600/30 border border-yellow-200 dark:border-yellow-500";default:return"text-slate-600 bg-slate-100 dark:text-slate-400 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600"}}const Ks=({results:t})=>e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-md font-semibold text-slate-700 dark:text-slate-200",children:"Mikronährstoffe (ppm)"}),e.jsx("div",{className:"space-y-1.5 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:$s.map(s=>{var a;const r=((a=t==null?void 0:t.nutrients)==null?void 0:a[s.key])??0,n=He(r,s.optimal);return e.jsxs("div",{className:`flex justify-between items-center p-1.5 rounded-md text-xs ${Je(n)}`,children:[e.jsxs("span",{children:[s.label,":"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-medium",children:[r.toFixed(3)," ppm"]}),e.jsxs("div",{className:"text-[0.65rem] opacity-70",children:["(",s.optimal[0],"-",s.optimal[1],")"]})]})]},s.key)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-md font-semibold text-slate-700 dark:text-slate-200",children:"Weitere Makro-/Sekundärnährstoffe (ppm)"}),e.jsx("div",{className:"space-y-1.5 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:Ps.map(s=>{var a;const r=((a=t==null?void 0:t.nutrients)==null?void 0:a[s.key])??0,n=He(r,s.optimal);return e.jsxs("div",{className:`flex justify-between items-center p-1.5 rounded-md text-xs ${Je(n)}`,children:[e.jsxs("span",{children:[s.label,":"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-medium",children:[r.toFixed(1)," ppm"]}),e.jsxs("div",{className:"text-[0.65rem] opacity-70",children:["(",s.optimal[0],"-",s.optimal[1],")"]})]})]},s.key)})}),e.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-700/30 p-3 rounded-lg border border-yellow-300 dark:border-yellow-600 mt-3",children:[e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-1.5 text-sm",children:"Nährstoff-Hinweise"}),e.jsxs("ul",{className:"text-xs text-yellow-700 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Weniger ist oft mehr, besonders bei Mikronährstoffen."}),e.jsx("li",{children:"Bei Mangelerscheinungen zuerst pH-Wert und Wurzelgesundheit prüfen."}),e.jsx("li",{children:"Fe-Mangel: junge Blätter hellgrün/gelb, Adern bleiben grün."}),e.jsx("li",{children:"Ca-Mangel: junge Blätter verformt, Blütenendfäule."})]})]})]})]}),Ws=()=>e.jsxs("div",{className:"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Referenzen & Hilfe"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Wichtige Links & Studien"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-600 dark:text-slate-300",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Link zu Nährstoffbedarf von Pflanzen (Beispielstudie)"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Artikel über Wasserqualität und EC-Werte"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Ressourcen zur Düngerzusammensetzung"})})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Erklärungen zu Nährstoffen"}),e.jsxs("div",{className:"space-y-4 text-slate-600 dark:text-slate-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Stickstoff (N):"})," Essentiell für das vegetative Wachstum, Blattentwicklung und Photosynthese. Mangel zeigt sich oft in blassen, gelben Blättern."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phosphor (P):"})," Wichtig für Blüten- und Fruchtentwicklung, Wurzelwachstum und Energieübertragung. Ein Mangel kann zu verkümmertem Wachstum und dunklen Blättern führen."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kalium (K):"})," Fördert die allgemeine Pflanzengesundheit, Wasseraufnahme und den Transport von Nährstoffen. Mangel kann zu gelben oder braunen Blatträndern führen."]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Häufig gestellte Fragen (FAQ)"}),e.jsxs("div",{className:"space-y-3 text-slate-600 dark:text-slate-300",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Q: Wie berechne ich die richtige Düngermenge?"}),e.jsx("p",{children:"A: Die App verwendet Ihre Eingaben zu Wasservolumen, Wachstumsphase und Wassertyp, um die optimale Düngermenge zu berechnen. Passen Sie die Mengen für jeden Dünger an, um die gewünschten Nährstoffwerte zu erreichen."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Q: Was bedeutet EC-Wert?"}),e.jsx("p",{children:"A: Der EC-Wert (elektrische Leitfähigkeit) misst die Gesamtkonzentration der gelösten Salze (Nährstoffe) im Wasser. Ein optimaler EC-Wert ist entscheidend für die Nährstoffaufnahme der Pflanzen."})]})]})]})]}),Re="nutricalc_secure_data",zt="NutriCalc2024SecureKey";function Vs(t,s){let r="";for(let n=0;n<t.length;n++){const a=t.charCodeAt(n),o=s.charCodeAt(n%s.length);r+=String.fromCharCode(a^o)}return btoa(r)}function Us(t,s){try{const r=atob(t);let n="";for(let a=0;a<r.length;a++){const o=r.charCodeAt(a),l=s.charCodeAt(a%s.length);n+=String.fromCharCode(o^l)}return n}catch{return""}}function At(t){try{const r={key:Vs(t,zt),timestamp:Date.now(),version:"1.0"};localStorage.setItem(Re,JSON.stringify(r))}catch{localStorage.setItem("nutricalc_gemini_api_key",t)}}function Gs(){try{const t=localStorage.getItem(Re);if(t){const r=JSON.parse(t);if(r.key&&r.version)return Us(r.key,zt)}const s=localStorage.getItem("nutricalc_gemini_api_key");return s?(At(s),localStorage.removeItem("nutricalc_gemini_api_key"),s):""}catch{return""}}function Ze(){try{localStorage.removeItem(Re),localStorage.removeItem("nutricalc_gemini_api_key")}catch{}}function Qe(t){return!t||typeof t!="string"?!1:/^AIza[0-9A-Za-z-_]{35}$/.test(t)}const Et=()=>{const[t,s]=j.useState(""),[r,n]=j.useState(!1);return j.useEffect(()=>{const l=Gs();l&&(s(l),n(Qe(l)))},[]),{apiKey:t,isValid:r,updateApiKey:l=>{const i=l.trim(),c=Qe(i);s(i),n(c),i?At(i):Ze()},removeApiKey:()=>{s(""),n(!1),Ze()}}},qs=()=>{const{apiKey:t,updateApiKey:s,removeApiKey:r}=Et(),[n,a]=W.useState(t||""),{settings:o,updateSetting:l}=Le(),{theme:i,toggleTheme:c}=at(),h=()=>{s(n.trim())},u=()=>{r(),a("")},k=v=>{l("unit",v.target.value)},d=v=>{l("waterAmount",v.target.value)},m=v=>{l("growthPhase",v.target.value)},g=v=>{l("waterType",v.target.value)};return e.jsxs("div",{className:"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Einstellungen"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"apiKey",children:"Gemini API Key"}),e.jsx("input",{id:"apiKey",type:"text",value:n,onChange:v=>a(v.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"API Key eingeben..."}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(I,{onClick:h,variant:"primary","aria-label":"API Key speichern",title:"API Key speichern",children:"Speichern"}),e.jsx(I,{onClick:u,variant:"danger","aria-label":"API Key entfernen",title:"API Key entfernen",children:"Entfernen"})]}),e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Dein API Key wird lokal im Browser gespeichert."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"unit",children:"Einheit für Wassermenge"}),e.jsxs("select",{id:"unit",value:o.unit,onChange:k,className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"liter",children:"Liter"}),e.jsx("option",{value:"gallon",children:"Gallonen"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"defaultWaterAmount",children:"Standard-Wassermenge (ml/oz)"}),e.jsx("input",{id:"defaultWaterAmount",type:"number",value:o.waterAmount,onChange:d,className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"Standard-Wassermenge eingeben..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"defaultGrowthPhase",children:"Standard-Wachstumsphase"}),e.jsxs("select",{id:"defaultGrowthPhase",value:o.growthPhase,onChange:m,className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Auswählen..."}),Object.entries(te).map(([v,x])=>e.jsx("option",{value:v,children:x.name},v))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"defaultWaterType",children:"Standard-Wassertyp"}),e.jsxs("select",{id:"defaultWaterType",value:o.waterType,onChange:g,className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",children:[e.jsx("option",{value:"",children:"Auswählen..."}),Object.entries(ie).map(([v,x])=>e.jsx("option",{value:v,children:x.name},v))]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Dark Mode"}),e.jsx(I,{onClick:c,variant:"secondary","aria-label":"Dark Mode umschalten",title:"Dark Mode umschalten",children:i==="dark"?"Deaktivieren":"Aktivieren"}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Aktuell: ",i==="dark"?"Dunkel":"Hell"]})]})]})},Hs={setup:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})}),details:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 8v4l3 3"})]}),analysis:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("path",{d:"M8 16v-4M12 16v-8M16 16v-2"})]}),fertilizer:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"6",y:"3",width:"12",height:"18",rx:"2"}),e.jsx("path",{d:"M9 7h6"})]}),settings:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),references:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]})};function Ye(t){return Hs[t]||e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("circle",{cx:"12",cy:"12",r:"10"})})}const Js=({activeTab:t,setActiveTab:s})=>{const r=j.useRef([]),n=(a,o)=>{var l,i,c,h;if(["ArrowRight","ArrowDown"].includes(a.key)){a.preventDefault();const u=(o+1)%K.length;(l=r.current[u])==null||l.focus()}else if(["ArrowLeft","ArrowUp"].includes(a.key)){a.preventDefault();const u=(o-1+K.length)%K.length;(i=r.current[u])==null||i.focus()}else a.key==="Home"?(a.preventDefault(),(c=r.current[0])==null||c.focus()):a.key==="End"&&(a.preventDefault(),(h=r.current[K.length-1])==null||h.focus())};return e.jsxs("nav",{"aria-label":"App Navigation",className:"",children:[e.jsxs("div",{className:"hidden md:flex flex-col w-64 min-h-full bg-white/95 backdrop-blur-sm border-r border-stone-200 py-6 px-4 space-y-1 fixed top-0 left-0 z-20 shadow-sm",children:[e.jsx("div",{className:"mb-8 px-2",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"N"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-stone-900",children:"NutriCalc"}),e.jsx("p",{className:"text-xs text-stone-500",children:"Nutrient Calculator"})]})]})}),e.jsx("div",{role:"tablist","aria-orientation":"vertical",className:"flex flex-col gap-1",children:K.map((a,o)=>e.jsxs("button",{ref:l=>r.current[o]=l,role:"tab","aria-selected":t===a.id,tabIndex:t===a.id?0:-1,className:`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 ${t===a.id?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-200":"text-stone-600 hover:text-stone-900 hover:bg-stone-50"}`,onClick:()=>s(a.id),onKeyDown:l=>n(l,o),"aria-label":a.label,children:[Ye(a.id),e.jsx("span",{children:a.label})]},a.id))})]}),e.jsx("div",{className:"fixed md:hidden bottom-0 left-0 right-0 z-30 bg-white/95 backdrop-blur-sm border-t border-stone-200 flex justify-around py-2 shadow-lg",children:e.jsx("div",{role:"tablist","aria-orientation":"horizontal",className:"flex w-full max-w-md mx-auto",children:K.map((a,o)=>e.jsxs("button",{ref:l=>r.current[o]=l,role:"tab","aria-selected":t===a.id,tabIndex:t===a.id?0:-1,className:`flex flex-col items-center flex-1 px-2 py-2 text-xs font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 ${t===a.id?"text-emerald-600 bg-emerald-50":"text-stone-600 hover:text-stone-900 hover:bg-stone-50"}`,onClick:()=>s(a.id),onKeyDown:l=>n(l,o),"aria-label":a.label,children:[Ye(a.id),e.jsx("span",{className:"mt-1 leading-tight",children:a.label})]},a.id))})})]})};class _e extends j.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("ErrorBoundary caught an error:",s,r),this.setState({error:s,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Etwas ist schiefgelaufen"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Ein unerwarteter Fehler ist aufgetreten. Bitte laden Sie die Seite neu oder versuchen Sie es später erneut."})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Seite neu laden"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0,errorInfo:void 0}),className:"flex-1 bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Erneut versuchen"})]}),!1]})}):this.props.children}}class Zs{constructor(){be(this,"metrics",{loadTime:0,renderTime:0,interactionTime:0,bundleSize:0,memoryUsage:0});be(this,"interactions",[]);be(this,"startTime",performance.now());this.initializeMonitoring()}initializeMonitoring(){window.addEventListener("load",()=>{this.trackLoadTime()}),this.trackCoreWebVitals(),this.trackUserInteractions(),this.trackMemoryUsage()}trackLoadTime(){const s=performance.getEntriesByType("navigation")[0];s&&(this.metrics.loadTime=s.loadEventEnd-s.fetchStart,this.metrics.renderTime=s.domContentLoadedEventEnd-s.fetchStart)}trackCoreWebVitals(){new PerformanceObserver(s=>{for(const r of s.getEntries())r.name==="first-contentful-paint"&&console.log("FCP:",r.startTime)}).observe({entryTypes:["paint"]}),new PerformanceObserver(s=>{for(const r of s.getEntries())console.log("LCP:",r.startTime)}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(s=>{for(const r of s.getEntries())r.hadRecentInput||console.log("CLS:",r.value)}).observe({entryTypes:["layout-shift"]})}trackUserInteractions(){document.addEventListener("click",s=>{const r=s.target;(r.tagName==="BUTTON"||r.closest("button"))&&this.recordInteraction({action:"click",timestamp:performance.now(),element:r.textContent||r.className})}),document.addEventListener("input",s=>{const r=s.target;(r.tagName==="INPUT"||r.tagName==="SELECT")&&this.recordInteraction({action:"input",timestamp:performance.now(),element:r.id||r.className})}),document.addEventListener("click",s=>{var n;const r=s.target;r.closest('[data-testid^="tab-"]')&&this.recordInteraction({action:"navigation",timestamp:performance.now(),element:((n=r.closest('[data-testid^="tab-"]'))==null?void 0:n.getAttribute("data-testid"))||"unknown"})})}trackMemoryUsage(){if("memory"in performance){const s=performance.memory;this.metrics.memoryUsage=s.usedJSHeapSize}}recordInteraction(s){this.interactions.push(s),this.interactions.length>100&&(this.interactions=this.interactions.slice(-100))}getMetrics(){return{...this.metrics}}getInteractions(){return[...this.interactions]}getSessionDuration(){return performance.now()-this.startTime}generateReport(){const s=this.getMetrics(),r=this.getSessionDuration(),n=this.interactions.length;return`
Performance Report:
==================
Load Time: ${s.loadTime.toFixed(2)}ms
Render Time: ${s.renderTime.toFixed(2)}ms
Session Duration: ${(r/1e3).toFixed(2)}s
User Interactions: ${n}
Memory Usage: ${(s.memoryUsage/1024/1024).toFixed(2)}MB

Recent Interactions:
${this.interactions.slice(-5).map(a=>`- ${a.action} on ${a.element} at ${(a.timestamp/1e3).toFixed(2)}s`).join(`
`)}
    `.trim()}exportData(){return{metrics:this.getMetrics(),interactions:this.getInteractions(),sessionDuration:this.getSessionDuration(),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}}}}const Qs=new Zs,Ys=(t,s)=>{console.log(`Custom Event: ${t}`,s),Qs.recordInteraction({action:`custom:${t}`,timestamp:performance.now(),element:JSON.stringify(s)})},Xs=({nutrients:t={},stage:s={},fields:r=[]})=>e.jsx("div",{className:"space-y-3",children:r.map(n=>{const a=t[n.key]??0,o=s[n.key],l=St(a,o),i=l==="optimal"?"bg-green-500":l==="suboptimal"?"bg-yellow-500":"bg-red-500",c="bg-slate-200 dark:bg-slate-700",h=Ee(a,o);return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs font-medium",children:[e.jsx("span",{children:n.label}),e.jsxs("span",{children:[a,n.unit?` ${n.unit}`:"",o?e.jsxs("span",{className:"ml-2 text-slate-500 dark:text-slate-400 text-xs",children:["(",o[0],"–",o[1],")"]}):null]})]}),e.jsxs("div",{className:`relative w-full h-4 rounded ${c}`,"aria-label":`${n.label} Wert: ${a}`,children:[e.jsx("div",{className:`absolute left-0 top-0 h-4 rounded ${i}`,style:{width:`${h}%`,minWidth:h>0?"0.5rem":0,transition:"width 0.3s"},"aria-valuenow":a,"aria-valuemin":o?o[0]:0,"aria-valuemax":o?o[1]*1.2:100,role:"progressbar"}),o&&e.jsx("div",{className:"absolute top-0 h-4 border-l-2 border-blue-500 opacity-60",style:{left:`${Ee(o[0],o)}%`},"aria-hidden":"true"}),o&&e.jsx("div",{className:"absolute top-0 h-4 border-l-2 border-blue-500 opacity-60",style:{left:`${Ee(o[1],o)}%`},"aria-hidden":"true"})]})]},n.key)})}),er=({fertilizerDatabase:t,GROWTH_STAGES:s,WATER_TYPES:r})=>{var S;if(!t||!s||!r)return e.jsx("div",{className:"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow",children:"Daten werden geladen..."});const[n,a]=j.useState(1),[o,l]=j.useState(10),[i,c]=j.useState(Object.keys(r)[0]),[h,u]=j.useState(Object.keys(s)[0]),[k,d]=j.useState([]),[m,g]=j.useState({nutrients:{},contributions:{},stage:s[h]});j.useEffect(()=>{const p=jt({waterVolume:o,growthStage:h,waterType:i,selectedFertilizers:k,fertilizerDatabase:t,NUTRIENT_FIELDS:[{key:"n"},{key:"p"},{key:"k"},{key:"ec"},{key:"ph"}],GROWTH_STAGES:s,WATER_TYPES:r,customWaterProfile:{},mixedWater:void 0});g(p)},[o,h,i,k,t,s,r]);const v=p=>{if(!p||k.find(B=>B.id===p))return;const C=t[p];d(B=>[...B,{id:p,amount:(C==null?void 0:C.type)==="powder"?.1:1}])},x=p=>{d(C=>C.filter(B=>B.id!==p))},M=(p,C)=>{const B=parseFloat(C);d(w=>w.map(R=>R.id===p?{...R,amount:isNaN(B)||B<0?0:B}:R))},$=k.map(p=>{const C=t[p.id];return C?`${C.name}: ${p.amount} ${C.unit||(C.type==="powder"?"g":"ml")}`:""}).filter(Boolean),F=()=>{const p={waterAmount:o,waterType:i,growthStage:h,selectedFertilizers:k,date:new Date().toISOString()},C=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),B=URL.createObjectURL(C),w=document.createElement("a");w.href=B,w.download="nutricalc-mix.json",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(B)};return e.jsxs("div",{className:"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Misch-Assistent"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n===1?"bg-blue-600 text-white":"bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}`,children:"1"}),e.jsx("span",{className:"text-sm",children:"Wasser & Phase"}),e.jsx("div",{className:"w-6 h-0.5 bg-slate-300 dark:bg-slate-700 mx-2"}),e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n===2?"bg-blue-600 text-white":"bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}`,children:"2"}),e.jsx("span",{className:"text-sm",children:"Dünger"}),e.jsx("div",{className:"w-6 h-0.5 bg-slate-300 dark:bg-slate-700 mx-2"}),e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n===3?"bg-blue-600 text-white":"bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}`,children:"3"}),e.jsx("span",{className:"text-sm",children:"Anleitung"})]}),n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"waterAmount",children:"Wassermenge (L)"}),e.jsx("input",{id:"waterAmount",type:"number",min:"0.1",step:"0.1",value:o,onChange:p=>l(Math.max(.1,Number(p.target.value))),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",placeholder:"z.B. 10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"waterType",children:"Wassertyp"}),e.jsx("select",{id:"waterType",value:i,onChange:p=>c(p.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",children:Object.entries(r).map(([p,C])=>e.jsx("option",{value:p,children:C.name},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"growthStage",children:"Wachstumsphase"}),e.jsx("select",{id:"growthStage",value:h,onChange:p=>u(p.target.value),className:"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100",children:Object.entries(s).map(([p,C])=>e.jsx("option",{value:p,children:C.name},p))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{onClick:()=>a(2),variant:"primary",children:"Weiter"})})]}),n===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dünger auswählen"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(t).map(([p,C])=>e.jsx(I,{variant:"secondary",onClick:()=>v(p),disabled:!!k.find(B=>B.id===p),className:"text-xs mb-1",children:C.name},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ausgewählte Dünger & Mengen"}),e.jsxs("ul",{className:"space-y-2",children:[k.length===0&&e.jsx("li",{className:"text-slate-500",children:"Noch keine Dünger ausgewählt."}),k.map(p=>{const C=t[p.id];return e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex-1",children:(C==null?void 0:C.name)||p.id}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:p.amount,onChange:B=>M(p.id,B.target.value),className:"w-20 px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 text-xs"}),e.jsx("span",{className:"text-xs",children:(C==null?void 0:C.unit)||((C==null?void 0:C.type)==="powder"?"g":"ml")}),e.jsx(I,{onClick:()=>x(p.id),variant:"danger",className:"text-xs",children:"Entfernen"})]},p.id)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Nährstoffwerte (Live)"}),e.jsx(Xs,{nutrients:m.nutrients,stage:m.stage,fields:[{key:"n",label:"N (Stickstoff)",unit:"ppm"},{key:"p",label:"P (Phosphor)",unit:"ppm"},{key:"k",label:"K (Kalium)",unit:"ppm"},{key:"ec",label:"EC",unit:"mS/cm"},{key:"ph",label:"pH",unit:""}]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(I,{onClick:()=>a(1),variant:"secondary",children:"Zurück"}),e.jsx(I,{onClick:()=>a(3),variant:"primary",disabled:k.length===0,children:"Weiter"})]})]}),n===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-semibold mb-2",children:"Mischanleitung"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsxs("li",{children:["Fülle ",e.jsxs("span",{className:"font-bold",children:[o," L"]})," Wasser (",((S=r[i])==null?void 0:S.name)||i,") in einen sauberen Behälter."]}),$.map((p,C)=>e.jsxs("li",{children:["Füge ",e.jsx("span",{className:"font-bold",children:p})," hinzu und gut umrühren."]},C)),e.jsx("li",{children:"Überprüfe den pH- und EC-Wert und passe ggf. an."})]}),e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Hinweis: Reihenfolge kann je nach Dünger variieren. Immer Herstellerhinweise beachten."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:()=>a(2),variant:"secondary",children:"Zurück"}),e.jsx(I,{onClick:F,variant:"primary",children:"Mix als JSON exportieren"})]})]})]})},Xe="nutricalc_watering_events",we={id:null,date:"",time:"",amount:"",notes:""},tr=()=>{const[t,s]=j.useState([]),[r,n]=j.useState(we),[a,o]=j.useState(null);j.useEffect(()=>{const d=localStorage.getItem(Xe);if(d)try{s(JSON.parse(d))}catch{}},[]),j.useEffect(()=>{localStorage.setItem(Xe,JSON.stringify(t))},[t]);const l=d=>{const{name:m,value:g}=d.target;n(v=>({...v,[m]:g}))},i=d=>{if(d.preventDefault(),!r.date||!r.time||!r.amount)return;const m={...r,id:a||Date.now()};s(a?g=>g.map(v=>v.id===a?m:v):g=>[...g,m]),n(we),o(null)},c=d=>{const m=t.find(g=>g.id===d);m&&(n(m),o(d))},h=d=>{s(m=>m.filter(g=>g.id!==d)),a===d&&(n(we),o(null))},u=[...t].sort((d,m)=>{const g=new Date(`${d.date}T${d.time}`),v=new Date(`${m.date}T${m.time}`);return g-v}),k=new Date().toISOString().split("T")[0];return e.jsxs("div",{className:"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Gießplaner"}),e.jsxs("form",{onSubmit:i,className:"space-y-3 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium mb-0.5",htmlFor:"date",children:"Datum"}),e.jsx("input",{type:"date",id:"date",name:"date",min:k,value:r.date,onChange:l,className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs",required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium mb-0.5",htmlFor:"time",children:"Uhrzeit"}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,onChange:l,className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-0.5",htmlFor:"amount",children:"Menge (L)"}),e.jsx("input",{type:"number",id:"amount",name:"amount",min:"0.1",step:"0.1",value:r.amount,onChange:l,className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-0.5",htmlFor:"notes",children:"Notizen"}),e.jsx("input",{type:"text",id:"notes",name:"notes",value:r.notes,onChange:l,className:"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[a&&e.jsx(I,{type:"button",onClick:()=>{n(we),o(null)},variant:"secondary",children:"Abbrechen"}),e.jsx(I,{type:"submit",variant:"primary",children:a?"Speichern":"Hinzufügen"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Geplante Gießtermine"}),u.length===0&&e.jsx("div",{className:"text-slate-500",children:"Noch keine Gießtermine."}),e.jsx("ul",{className:"space-y-2",children:u.map(d=>e.jsxs("li",{className:"flex items-center gap-2 p-2 bg-slate-100 dark:bg-slate-700 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-sm",children:[d.date," ",d.time," - ",d.amount," L"]}),d.notes&&e.jsx("div",{className:"text-xs text-slate-500",children:d.notes})]}),e.jsx(I,{onClick:()=>c(d.id),variant:"secondary",className:"text-xs",children:"Bearbeiten"}),e.jsx(I,{onClick:()=>h(d.id),variant:"danger",className:"text-xs",children:"Löschen"})]},d.id))})]})]})},sr=()=>{const{theme:t,toggleTheme:s}=at();return e.jsx("button",{onClick:s,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Toggle Dark Mode",children:t==="light"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"})})})};function et(t,s){const r={};return(s||[]).forEach(n=>{const a=n.id||`custom_${n.name.replace(/\s+/g,"_").toLowerCase()}_${Date.now()}`,o={};Object.entries(n.composition||{}).forEach(([l,i])=>{o[l.toLowerCase()]=Number(i)||0}),r[a]={...n,id:a,name:n.name,type:n.type||"liquid",unit:n.unit||"ml",composition:o,description:n.description||"Benutzerdefinierter Dünger"}}),{...t,...r}}const rr=()=>{var $,F;const[t,s]=j.useState(K[0].id),r=S=>{Ys("tab_switch",{from:t,to:S}),s(S)},[n,a]=j.useState(()=>{const S=localStorage.getItem(ue);let p=[];try{S&&(p=JSON.parse(S))}catch{}return et(qe,p)}),[o,l]=j.useState({NUTRIENT_FIELDS:Z,GROWTH_STAGES:te,WATER_TYPES:ie,fertilizerDatabase:n,selectedFertilizers:[],waterVolume:10,growthStage:Object.keys(te)[0],waterType:Object.keys(ie)[0],customWaterProfile:{},results:{nutrients:{},contributions:{},stage:te[Object.keys(te)[0]]}}),{apiKey:i}=Et(),{addToast:c}=De(),[h,u]=j.useState(!1),[k,d]=j.useState("Hallo! Ich bin dein KI-Helfer. Frag mich z.B. 'Wie erstelle ich einen Dünger?' oder 'Ist mein N-Wert ok?' oder 'Was ist EC?'"),{mixedWater:m}=vt(),g=["Wie erstelle ich einen Dünger?","Ist mein N-Wert ok?","Was ist EC?"],v=W.useCallback(S=>{l(S)},[]),x=W.useCallback(()=>{const S=localStorage.getItem(ue);let p=[];try{S&&(p=JSON.parse(S))}catch{}a(et(qe,p))},[]);W.useEffect(()=>{const S=p=>{p.key===ue&&x()};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[]);const M=async S=>{var p,C,B,w,R,Y,X,H;if(!i){c("API Key fehlt! Bitte geben Sie Ihren Google Gemini API Key in den Einstellungen ein.","error",8e3);return}if(!S.trim()){c("Bitte geben Sie eine Nachricht ein.","warning");return}u(!0),d("Denke nach...");try{const G=new AbortController,V=setTimeout(()=>G.abort(),3e4),D=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent",{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":i},body:JSON.stringify({contents:[{role:"user",parts:[{text:S}]}],generationConfig:{temperature:.6,maxOutputTokens:150},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]}),signal:G.signal});if(clearTimeout(V),D.ok){const T=await D.json();if((Y=(R=(w=(B=(C=T.candidates)==null?void 0:C[0])==null?void 0:B.content)==null?void 0:w.parts)==null?void 0:R[0])!=null&&Y.text)d(T.candidates[0].content.parts[0].text.trim());else if((X=T.promptFeedback)!=null&&X.blockReason){const U=T.promptFeedback.blockReason;d(`Anfrage blockiert: ${U}. Bitte formulieren Sie Ihre Frage anders.`),c(`Anfrage blockiert: ${U}. Bitte formulieren Sie Ihre Frage anders.`,"warning",8e3)}else d("Keine Antwort erhalten. Bitte versuchen Sie es erneut."),c("Keine Antwort von der AI erhalten.","warning")}else{let T=`HTTP ${D.status}`;try{T=((p=(await D.json()).error)==null?void 0:p.message)||T,D.status===400?T="Ungültige Anfrage. Bitte überprüfen Sie Ihren API Key.":D.status===401?T="API Key ungültig oder abgelaufen. Bitte überprüfen Sie Ihren API Key.":D.status===403?T="Zugriff verweigert. Bitte überprüfen Sie Ihre API Key Berechtigungen.":D.status===429?T="Zu viele Anfragen. Bitte warten Sie einen Moment und versuchen Sie es erneut.":D.status>=500&&(T="Server-Fehler. Bitte versuchen Sie es später erneut.")}catch{}d(`AI Fehler: ${T}`),c(`API Fehler: ${T}`,"error",8e3)}}catch(G){let V="Fehler bei der Antwortgenerierung.";G instanceof Error&&(G.name==="AbortError"?V="Anfrage-Timeout. Bitte versuchen Sie es erneut.":(H=G.message)!=null&&H.includes("Failed to fetch")?V="Netzwerkfehler. Bitte überprüfen Sie Ihre Internetverbindung.":V=`Fehler: ${G.message}`),d(V),c(V,"error",8e3)}finally{u(!1)}};return e.jsx(_e,{children:e.jsxs("div",{className:"min-h-screen bg-stone-50 transition-colors duration-300",children:[e.jsx(Js,{activeTab:t,setActiveTab:r}),e.jsx("header",{className:"md:ml-64 bg-white/80 backdrop-blur-sm border-b border-stone-200 sticky top-0 z-40",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-stone-900",children:(($=K.find(S=>S.id===t))==null?void 0:$.label)||"NutriCalc"}),e.jsx("p",{className:"text-stone-600 text-sm",children:((F=K.find(S=>S.id===t))==null?void 0:F.description)||"Nutrient calculation and analysis"})]}),e.jsx(sr,{})]}),e.jsx(_e,{children:e.jsx(wt,{apiKey:!!i,onSend:M,isLoading:h,displayMessage:k,suggestions:g})})]})}),e.jsx("main",{className:"md:ml-64 px-6 py-8 pb-20 md:pb-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(_e,{children:[t===K[0].id&&e.jsx(Ts,{NUTRIENT_FIELDS:Z,GROWTH_STAGES:te,WATER_TYPES:ie,fertilizerDatabase:n,onAnalysisUpdate:v,mixedWater:m}),t===K[1].id&&e.jsx(Ks,{results:o.results}),t===K[2].id&&e.jsx(Os,{...o}),t===K[3].id&&e.jsx(Ls,{refreshFertilizerDatabase:x}),t===bt&&e.jsx(qs,{}),t===ft&&e.jsx(er,{fertilizerDatabase:n,GROWTH_STAGES:te,WATER_TYPES:ie}),t===yt&&e.jsx(tr,{}),t===K[K.length-1].id&&e.jsx(Ws,{})]})})})]})})},nr=()=>e.jsx($t,{children:e.jsx(Ns,{children:e.jsx(_s,{children:e.jsx(rr,{})})})});Me.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(nr,{})}));
//# sourceMappingURL=index-23cec766.js.map
