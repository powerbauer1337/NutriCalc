{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","ThemeContext","createContext","useTheme","context","useContext","ThemeProvider","children","theme","setTheme","useState","savedTheme","useEffect","root","toggleTheme","prevTheme","jsx","CLASS_PART_SEPARATOR","createClassGroupUtils","config","classMap","createClassMap","conflictingClassGroups","conflictingClassGroupModifiers","className","classParts","getGroupRecursive","getGroupIdForArbitraryProperty","classGroupId","hasPostfixModifier","conflicts","classPartObject","currentClassPart","nextClassPartObject","classGroupFromNextClassPart","classRest","_a","validator","arbitraryPropertyRegex","arbitraryPropertyClassName","property","classGroups","processClassesRecursively","classGroup","classDefinition","classPartObjectToEdit","getPart","isThemeGetter","key","path","currentClassPartObject","pathPart","func","createLruCache","maxCacheSize","cacheSize","cache","previousCache","update","value","IMPORTANT_MODIFIER","MODIFIER_SEPARATOR","MODIFIER_SEPARATOR_LENGTH","createParseClassName","prefix","experimentalParseClassName","parseClassName","modifiers","bracketDepth","parenDepth","modifierStart","postfixModifierPosition","index","currentCharacter","baseClassNameWithImportantModifier","baseClassName","stripImportantModifier","hasImportantModifier","maybePostfixModifierPosition","fullPrefix","parseClassNameOriginal","createSortModifiers","orderSensitiveModifiers","modifier","sortedModifiers","unsortedModifiers","createConfigUtils","SPLIT_CLASSES_REGEX","mergeClassList","classList","configUtils","getClassGroupId","getConflictingClassGroupIds","sortModifiers","classGroupsInConflict","classNames","result","originalClassName","isExternal","variantModifier","modifierId","classId","conflictGroups","i","group","twJoin","argument","resolvedValue","string","toValue","mix","createTailwindMerge","createConfigFirst","createConfigRest","cacheGet","cacheSet","functionToCall","initTailwindMerge","previousConfig","createConfigCurrent","tailwindMerge","cachedResult","fromTheme","themeGetter","arbitraryValueRegex","arbitraryVariableRegex","fractionRegex","tshirtUnitRegex","lengthUnitRegex","colorFunctionRegex","shadowRegex","imageRegex","isFraction","isNumber","isInteger","isPercent","isTshirtSize","isAny","isLengthOnly","isNever","isShadow","isImage","isAnyNonArbitrary","isArbitraryValue","isArbitraryVariable","isArbitrarySize","getIsArbitraryValue","isLabelSize","isArbitraryLength","isLabelLength","isArbitraryNumber","isLabelNumber","isArbitraryPosition","isLabelPosition","isArbitraryImage","isLabelImage","isArbitraryShadow","isLabelShadow","isArbitraryVariableLength","getIsArbitraryVariable","isArbitraryVariableFamilyName","isLabelFamilyName","isArbitraryVariablePosition","isArbitraryVariableSize","isArbitraryVariableImage","isArbitraryVariableShadow","testLabel","testValue","shouldMatchNoLabel","label","getDefaultConfig","themeColor","themeFont","themeText","themeFontWeight","themeTracking","themeLeading","themeBreakpoint","themeContainer","themeSpacing","themeRadius","themeShadow","themeInsetShadow","themeTextShadow","themeDropShadow","themeBlur","themePerspective","themeAspect","themeEase","themeAnimate","scaleBreak","scalePosition","scalePositionWithArbitrary","scaleOverflow","scaleOverscroll","scaleUnambiguousSpacing","scaleInset","scaleGridTemplateColsRows","scaleGridColRowStartAndEnd","scaleGridColRowStartOrEnd","scaleGridAutoColsRows","scaleAlignPrimaryAxis","scaleAlignSecondaryAxis","scaleMargin","scaleSizing","scaleColor","scaleBgPosition","scaleBgRepeat","scaleBgSize","scaleGradientStopPosition","scaleRadius","scaleBorderWidth","scaleLineStyle","scaleBlendMode","scaleMaskImagePosition","scaleBlur","scaleRotate","scaleScale","scaleSkew","scaleTranslate","twMerge","cn","inputs","clsx","buttonVariants","cva","Button","React","variant","size","loading","leftIcon","rightIcon","disabled","props","ref","jsxs","typeStyles","ToastMessage","message","type","onClose","ToastContainer","toasts","removeToast","toast","ToastContext","ToastProvider","setToasts","toastIdRef","useRef","useCallback","id","prev","addToast","duration","useToasts","WATER_DEFAULTS","LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS","TAB_BASIC","TAB_ADVANCED","TAB_ANALYSIS","TAB_CUSTOM_FERTILIZER","TAB_AI_ASSISTANT","TAB_SETTINGS","TAB_REFERENCES","TAB_MIXING_ASSISTANT","TAB_WATERING_SCHEDULER","TABS_CONFIG","GROWTH_STAGES","WATER_TYPES","NUTRIENT_FIELDS","BASE_FERTILIZER_DATABASE","WaterContext","WaterProvider","waterSources","setWaterSources","mixedWater","setMixedWater","calculateMixedWater","sum_H_plus_volume","sum_volume","paramSums","field","source","ph","ec","volume","H_i","H_plus_mix","ph_mix","mixedNutrients","mixedEC","addWaterSource","newSource","prevSources","removeWaterSource","updateWaterSource","useWater","ChatBar","apiKey","onSend","isLoading","displayMessage","suggestions","inputValue","setInputValue","inputRef","handleSend","suggestionClicked","suggestion","s","calculateNutrientResults","waterVolume","growthStage","waterType","selectedFertilizers","fertilizerDatabase","customWaterProfile","baseN","currentEC","basePH","pWater","tN","acc","contrib","nutrEC","fert","fD","cFC","fA","nk","nC","nVppm","FertilizerManager","addFertilizer","removeFertilizer","updateFertilizerAmount","toggleFertilizer","fertData","useAppSettings","settings","setSettings","storedSettings","prevSettings","WaterInput","handleChange","numericValue","safeValue","cardVariants","Card","padding","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","initialCustomWaterProfile","defaultFertilizerSelection","mainNutrients","SetupTab","propNutrientFields","onAnalysisUpdate","setWaterVolume","defaultVolume","setGrowthStage","setWaterType","setCustomWaterProfile","setSelectedFertilizers","initialNutrientResults","results","setResults","newResults","populatedNutrients","nutrient","amount","handleExport","customFertilizers","data","blob","url","handleImport","file","reader","evt","autoOptimize","updated","changed","clearAllData","stage","_b","_c","_d","_e","_f","defaultFertilizer","generateCustomFertilizerId","name","FertilizerTab","refreshFertilizerDatabase","fertilizers","setFertilizers","form","setForm","editingId","setEditingId","stored","handleSubmit","normalizedForm","v","handleEdit","handleDelete","getNutrientStatus","range","getStatusColor","status","getProgressBarWidth","maxTarget","AnalysisTab","_WATER_TYPES","_fertilizerDatabase","_selectedFertilizers","_waterVolume","_waterType","_customWaterProfile","warnings","tips","tip","idx","micronutrients","secondaryNutrients","min","max","DetailsTab","micro","sec","ReferencesTab","STORAGE_KEY","OBFUSCATION_KEY","obfuscate","text","textChar","keyChar","deobfuscate","obfuscatedText","decoded","storeApiKey","retrieveApiKey","storedData","oldKey","removeApiKey","validateApiKey","useApiKey","setApiKey","isValid","setIsValid","storedKey","newKey","trimmedKey","valid","removeStoredApiKey","AISettings","language","onSettingsChange","showApiKey","setShowApiKey","isTestingConnection","setIsTestingConnection","connectionStatus","setConnectionStatus","savedSettings","parsed","handleSettingChange","testConnection","testResult","testGeminiConnection","testOpenAIConnection","testClaudeConnection","AIAssistantService","__vitePreload","AIAssistantService$1","service","error","providers","provider","SettingsPage","updateApiKey","updateSetting","handleSaveApiKey","handleRemoveApiKey","handleUnitChange","handleDefaultWaterAmountChange","handleDefaultGrowthPhaseChange","handleDefaultWaterTypeChange","_settings","tabIcons","getTabIcon","tabId","Navigation","activeTab","setActiveTab","tabRefs","handleKeyDown","next","tab","el","ErrorBoundary","Component","errorInfo","HarmCategory","HarmBlockThreshold","HarmProbability","BlockReason","FinishReason","TaskType","GoogleGenerativeAIError","GoogleGenerativeAIResponseError","response","BASE_URL","API_VERSION","PACKAGE_VERSION","PACKAGE_LOG_HEADER","Task","RequestUrl","model","task","stream","getClientHeaders","makeRequest","body","json","err","addHelpers","hadBadFinishReason","formatBlockErrorMessage","getText","badFinishReasons","candidate","firstCandidate","__await","__asyncGenerator","thisArg","_arguments","generator","verb","resume","step","settle","r","fulfill","reject","responseLineRE","processStream","inputStream","responseStream","getResponseStream","stream1","stream2","generateResponseSequence","getResponsePromise","allResponses","done","aggregateResponses","controller","currentText","pump","match","parsedResponse","responses","lastResponse","aggregatedResponse","part","generateContentStream","params","generateContent","responseJson","formatNewContent","request","role","newParts","partOrString","formatGenerateContentInput","formatEmbedContentInput","SILENT_ERROR","ChatSession","content","newContent","generateContentRequest","finalResult","responseContent","blockErrorMessage","streamPromise","_ignored","streamResult","countTokens","embedContent","batchEmbedContents","requestsWithModel","GenerativeModel","modelParams","formattedParams","startChatParams","batchEmbedContentRequest","GoogleGenerativeAI","CannabisKnowledgeBase","__publicField","difficulty","symptoms","matches","deficiency","matchCount","symptom","defSymptom","problem","probSymptom","stageInfo","AIContextEngine","nutrientStatus","growthStageAnalysis","environmentalAssessment","recommendations","alerts","confidence","optimalRanges","individual","optimalCount","totalNutrients","optimal","deviation","optimalPercentage","overall","lowCount","highCount","ecOptimal","phOptimal","ecStatus","phStatus","weekInStage","expectedDuration","stageProgress","stageOrder","currentIndex","nextStage","stageOptimal","transitionRecommendations","environmentalNeeds","environmentalData","tempRange","humRange","temperature","humidity","lightCycle","scores","overallScore","sum","score","priority","action","envNeeds","priorityOrder","severity","severityOrder","nutrientCount","currentStage","progress","transitions","transitionKey","sessionId","history","userMessage","aiResponse","assistantMessage","prompt","systemPrompt","contextPrompt","historyPrompt","basePrompt","levelPrompt","nutrients","msg","actions","followUpQuestions","listMatches","recommendMatches","pattern","sentence","questions","useAIAssistant","options","autoAnalyze","enableProactiveAlerts","messages","setMessages","setIsLoading","contextAnalysis","setContextAnalysis","hasActiveAlerts","setHasActiveAlerts","hasUnreadMessages","setHasUnreadMessages","activeRecommendations","setActiveRecommendations","isEnabled","setEnabled","setError","aiServiceRef","contextEngineRef","lastContextRef","storedApiKey","existingMessages","sendMessage","updatedMessages","handleAIActions","warning","errorMessage","analyzeContext","analysis","alert","rec","checkForProactiveAlerts","criticalAlerts","proactiveMessage","systemMessage","interval","clearHistory","exportConversation","clearError","FloatingChatWidget","onClick","isVisible","setIsVisible","isPulsing","setIsPulsing","showTooltip","setShowTooltip","lastScrollY","ticking","updateScrollDirection","scrollY","requestTick","handleScroll","timer","getStatusIcon","getTooltipText","Fragment","ChatInterface","isOpen","onSendMessage","inputMessage","setInputMessage","isTyping","setIsTyping","messagesEndRef","scrollToBottom","handleSendMessage","handleKeyPress","formatMessage","getSuggestionButtons","AIAssistantTab","isChatOpen","setIsChatOpen","selectedCategory","setSelectedCategory","categories","getQuickQuestions","category","renderOverview","renderQuickQuestions","question","AIAssistantIntegration","userLevel","growWeek","strainType","showFloatingWidget","onNutrientAdjustment","onRecommendationApplied","isFloatingChatOpen","setIsFloatingChatOpen","adjustments","extractNutrientAdjustments","recommendation","PerformanceMonitor","navigation","list","entry","event","target","memory","interaction","metrics","sessionDuration","interactionCount","performanceMonitor","trackCustomEvent","eventName","NutrientBarChart","fields","colorClass","barBg","width","MixingAssistant","setStep","waterAmount","setWaterAmount","nutrientResults","setNutrientResults","mixSummary","line","defaultForm","WateringScheduler","events","setEvents","newEvent","evts","ev","sortedEvents","da","db","today","DarkModeToggle","mergeFertilizerDatabases","baseDb","customList","customDb","composition","AppLayout","handleTabChange","setFertilizerDatabase","analysisInputs","setAnalysisInputs","aiLoading","setAiLoading","aiMessage","setAiMessage","chatSuggestions","handleAnalysisUpdate","handleNutrientAdjustment","handleRecommendationApplied","handler","handleSendAI","timeoutId","_g","blockReason","errorMsg","_h","App","ReactDOM"],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/contexts/ThemeContext.tsx","../../node_modules/tailwind-merge/dist/bundle-mjs.mjs","../../src/utils/cn.ts","../../src/components/Button.tsx","../../src/components/ToastMessage.tsx","../../src/components/ToastContainer.tsx","../../src/contexts/ToastContext.tsx","../../src/constants/waterDefaults.ts","../../src/constants/index.ts","../../src/contexts/WaterContext.tsx","../../src/components/ChatBar.tsx","../../src/utils/calculateNutrients.ts","../../src/components/FertilizerManager.tsx","../../src/hooks/useAppSettings.ts","../../src/components/WaterInput.tsx","../../src/components/Card.tsx","../../src/components/SetupTab.tsx","../../src/components/FertilizerTab.tsx","../../src/utils/nutrientUtils.ts","../../src/components/AnalysisTab.tsx","../../src/components/DetailsTab.tsx","../../src/components/ReferencesTab.tsx","../../src/utils/secureStorage.ts","../../src/hooks/useApiKey.ts","../../src/components/AIAssistant/AISettings.tsx","../../src/components/SettingsPage.tsx","../../src/components/Navigation.tsx","../../src/components/ErrorBoundary.tsx","../../node_modules/@google/generative-ai/dist/index.mjs","../../src/services/CannabisKnowledgeBase.ts","../../src/services/AIContextEngine.ts","../../src/services/AIAssistantService.ts","../../src/hooks/useAIAssistant.ts","../../src/components/AIAssistant/FloatingChatWidget.tsx","../../src/components/AIAssistant/ChatInterface.tsx","../../src/components/AIAssistant/AIAssistantTab.tsx","../../src/components/AIAssistant/index.tsx","../../src/utils/performance.ts","../../src/components/NutrientBarChart.tsx","../../src/components/MixingAssistant.tsx","../../src/components/WateringScheduler.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["/**\r\n * @license React\r\n * react-jsx-runtime.production.min.js\r\n *\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\r\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\r\n","'use strict';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\r\n} else {\r\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\r\n}\r\n","'use strict';\r\n\r\nvar m = require('react-dom');\r\nif (process.env.NODE_ENV === 'production') {\r\n  exports.createRoot = m.createRoot;\r\n  exports.hydrateRoot = m.hydrateRoot;\r\n} else {\r\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n  exports.createRoot = function(c, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.createRoot(c, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n  exports.hydrateRoot = function(c, h, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.hydrateRoot(c, h, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n}\r\n","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\n\r\ninterface ThemeContextType {\r\n  theme: 'light' | 'dark';\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport const useTheme = (): ThemeContextType => {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ThemeProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  const [theme, setTheme] = useState<'light' | 'dark'>(() => {\r\n    const savedTheme = localStorage.getItem('theme');\r\n    return (\r\n      (savedTheme === 'dark' || savedTheme === 'light' ? savedTheme : null) ||\r\n      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')\r\n    );\r\n  });\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n    root.classList.remove('light', 'dark');\r\n    root.classList.add(theme);\r\n    localStorage.setItem('theme', theme);\r\n  }, [theme]);\r\n\r\n  const toggleTheme = () => {\r\n    setTheme((prevTheme) => (prevTheme === 'light' ? 'dark' : 'light'));\r\n  };\r\n\r\n  return <ThemeContext.Provider value={{ theme, toggleTheme }}>{children}</ThemeContext.Provider>;\r\n};\r\n","const CLASS_PART_SEPARATOR = '-';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and remove it from classParts.\n    if (classParts[0] === '' && classParts.length !== 1) {\n      classParts.shift();\n    }\n    return getGroupRecursive(classParts, classMap) || getGroupIdForArbitraryProperty(className);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    const conflicts = conflictingClassGroups[classGroupId] || [];\n    if (hasPostfixModifier && conflictingClassGroupModifiers[classGroupId]) {\n      return [...conflicts, ...conflictingClassGroupModifiers[classGroupId]];\n    }\n    return conflicts;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, classPartObject) => {\n  if (classParts.length === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[0];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  const classGroupFromNextClassPart = nextClassPartObject ? getGroupRecursive(classParts.slice(1), nextClassPartObject) : undefined;\n  if (classGroupFromNextClassPart) {\n    return classGroupFromNextClassPart;\n  }\n  if (classPartObject.validators.length === 0) {\n    return undefined;\n  }\n  const classRest = classParts.join(CLASS_PART_SEPARATOR);\n  return classPartObject.validators.find(({\n    validator\n  }) => validator(classRest))?.classGroupId;\n};\nconst arbitraryPropertyRegex = /^\\[(.+)\\]$/;\nconst getGroupIdForArbitraryProperty = className => {\n  if (arbitraryPropertyRegex.test(className)) {\n    const arbitraryPropertyClassName = arbitraryPropertyRegex.exec(className)[1];\n    const property = arbitraryPropertyClassName?.substring(0, arbitraryPropertyClassName.indexOf(':'));\n    if (property) {\n      // I use two dots here because one dot is used as prefix for class groups in plugins\n      return 'arbitrary..' + property;\n    }\n  }\n};\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    classGroups\n  } = config;\n  const classMap = {\n    nextPart: new Map(),\n    validators: []\n  };\n  for (const classGroupId in classGroups) {\n    processClassesRecursively(classGroups[classGroupId], classMap, classGroupId, theme);\n  }\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  classGroup.forEach(classDefinition => {\n    if (typeof classDefinition === 'string') {\n      const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n      classPartObjectToEdit.classGroupId = classGroupId;\n      return;\n    }\n    if (typeof classDefinition === 'function') {\n      if (isThemeGetter(classDefinition)) {\n        processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n        return;\n      }\n      classPartObject.validators.push({\n        validator: classDefinition,\n        classGroupId\n      });\n      return;\n    }\n    Object.entries(classDefinition).forEach(([key, classGroup]) => {\n      processClassesRecursively(classGroup, getPart(classPartObject, key), classGroupId, theme);\n    });\n  });\n};\nconst getPart = (classPartObject, path) => {\n  let currentClassPartObject = classPartObject;\n  path.split(CLASS_PART_SEPARATOR).forEach(pathPart => {\n    if (!currentClassPartObject.nextPart.has(pathPart)) {\n      currentClassPartObject.nextPart.set(pathPart, {\n        nextPart: new Map(),\n        validators: []\n      });\n    }\n    currentClassPartObject = currentClassPartObject.nextPart.get(pathPart);\n  });\n  return currentClassPartObject;\n};\nconst isThemeGetter = func => func.isThemeGetter;\n\n// LRU cache inspired from hashlru (https://github.com/dominictarr/hashlru/blob/v1.0.4/index.js) but object replaced with Map to improve performance\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = new Map();\n  let previousCache = new Map();\n  const update = (key, value) => {\n    cache.set(key, value);\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = new Map();\n    }\n  };\n  return {\n    get(key) {\n      let value = cache.get(key);\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache.get(key)) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (cache.has(key)) {\n        cache.set(key, value);\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst MODIFIER_SEPARATOR = ':';\nconst MODIFIER_SEPARATOR_LENGTH = MODIFIER_SEPARATOR.length;\nconst createParseClassName = config => {\n  const {\n    prefix,\n    experimentalParseClassName\n  } = config;\n  /**\n   * Parse class name into parts.\n   *\n   * Inspired by `splitAtTopLevelOnly` used in Tailwind CSS\n   * @see https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n   */\n  let parseClassName = className => {\n    const modifiers = [];\n    let bracketDepth = 0;\n    let parenDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    for (let index = 0; index < className.length; index++) {\n      let currentCharacter = className[index];\n      if (bracketDepth === 0 && parenDepth === 0) {\n        if (currentCharacter === MODIFIER_SEPARATOR) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + MODIFIER_SEPARATOR_LENGTH;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') {\n        bracketDepth++;\n      } else if (currentCharacter === ']') {\n        bracketDepth--;\n      } else if (currentCharacter === '(') {\n        parenDepth++;\n      } else if (currentCharacter === ')') {\n        parenDepth--;\n      }\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.substring(modifierStart);\n    const baseClassName = stripImportantModifier(baseClassNameWithImportantModifier);\n    const hasImportantModifier = baseClassName !== baseClassNameWithImportantModifier;\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    };\n  };\n  if (prefix) {\n    const fullPrefix = prefix + MODIFIER_SEPARATOR;\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => className.startsWith(fullPrefix) ? parseClassNameOriginal(className.substring(fullPrefix.length)) : {\n      isExternal: true,\n      modifiers: [],\n      hasImportantModifier: false,\n      baseClassName: className,\n      maybePostfixModifierPosition: undefined\n    };\n  }\n  if (experimentalParseClassName) {\n    const parseClassNameOriginal = parseClassName;\n    parseClassName = className => experimentalParseClassName({\n      className,\n      parseClassName: parseClassNameOriginal\n    });\n  }\n  return parseClassName;\n};\nconst stripImportantModifier = baseClassName => {\n  if (baseClassName.endsWith(IMPORTANT_MODIFIER)) {\n    return baseClassName.substring(0, baseClassName.length - 1);\n  }\n  /**\n   * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.\n   * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864\n   */\n  if (baseClassName.startsWith(IMPORTANT_MODIFIER)) {\n    return baseClassName.substring(1);\n  }\n  return baseClassName;\n};\n\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst createSortModifiers = config => {\n  const orderSensitiveModifiers = Object.fromEntries(config.orderSensitiveModifiers.map(modifier => [modifier, true]));\n  const sortModifiers = modifiers => {\n    if (modifiers.length <= 1) {\n      return modifiers;\n    }\n    const sortedModifiers = [];\n    let unsortedModifiers = [];\n    modifiers.forEach(modifier => {\n      const isPositionSensitive = modifier[0] === '[' || orderSensitiveModifiers[modifier];\n      if (isPositionSensitive) {\n        sortedModifiers.push(...unsortedModifiers.sort(), modifier);\n        unsortedModifiers = [];\n      } else {\n        unsortedModifiers.push(modifier);\n      }\n    });\n    sortedModifiers.push(...unsortedModifiers.sort());\n    return sortedModifiers;\n  };\n  return sortModifiers;\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  sortModifiers: createSortModifiers(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds,\n    sortModifiers\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      isExternal,\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    if (isExternal) {\n      result = originalClassName + (result.length > 0 ? ' ' + result : result);\n      continue;\n    }\n    let hasPostfixModifier = !!maybePostfixModifierPosition;\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    const variantModifier = sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.includes(classId)) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nfunction twJoin() {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < arguments.length) {\n    if (argument = arguments[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n}\nconst toValue = mix => {\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nfunction createTailwindMerge(createConfigFirst, ...createConfigRest) {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall = initTailwindMerge;\n  function initTailwindMerge(classList) {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  }\n  function tailwindMerge(classList) {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  }\n  return function callTailwindMerge() {\n    return functionToCall(twJoin.apply(null, arguments));\n  };\n}\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || [];\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:(\\w[\\w-]*):)?(.+)\\]$/i;\nconst arbitraryVariableRegex = /^\\((?:(\\w[\\w-]*):)?(.+)\\)$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isFraction = value => fractionRegex.test(value);\nconst isNumber = value => !!value && !Number.isNaN(Number(value));\nconst isInteger = value => !!value && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst isAny = () => true;\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst isAnyNonArbitrary = value => !isArbitraryValue(value) && !isArbitraryVariable(value);\nconst isArbitrarySize = value => getIsArbitraryValue(value, isLabelSize, isNever);\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, isLabelLength, isLengthOnly);\nconst isArbitraryNumber = value => getIsArbitraryValue(value, isLabelNumber, isNumber);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, isLabelPosition, isNever);\nconst isArbitraryImage = value => getIsArbitraryValue(value, isLabelImage, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, isLabelShadow, isShadow);\nconst isArbitraryVariable = value => arbitraryVariableRegex.test(value);\nconst isArbitraryVariableLength = value => getIsArbitraryVariable(value, isLabelLength);\nconst isArbitraryVariableFamilyName = value => getIsArbitraryVariable(value, isLabelFamilyName);\nconst isArbitraryVariablePosition = value => getIsArbitraryVariable(value, isLabelPosition);\nconst isArbitraryVariableSize = value => getIsArbitraryVariable(value, isLabelSize);\nconst isArbitraryVariableImage = value => getIsArbitraryVariable(value, isLabelImage);\nconst isArbitraryVariableShadow = value => getIsArbitraryVariable(value, isLabelShadow, true);\n// Helpers\nconst getIsArbitraryValue = (value, testLabel, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst getIsArbitraryVariable = (value, testLabel, shouldMatchNoLabel = false) => {\n  const result = arbitraryVariableRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return testLabel(result[1]);\n    }\n    return shouldMatchNoLabel;\n  }\n  return false;\n};\n// Labels\nconst isLabelPosition = label => label === 'position' || label === 'percentage';\nconst isLabelImage = label => label === 'image' || label === 'url';\nconst isLabelSize = label => label === 'length' || label === 'size' || label === 'bg-size';\nconst isLabelLength = label => label === 'length';\nconst isLabelNumber = label => label === 'number';\nconst isLabelFamilyName = label => label === 'family-name';\nconst isLabelShadow = label => label === 'shadow';\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isAnyNonArbitrary,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isArbitraryVariable,\n  isArbitraryVariableFamilyName,\n  isArbitraryVariableImage,\n  isArbitraryVariableLength,\n  isArbitraryVariablePosition,\n  isArbitraryVariableShadow,\n  isArbitraryVariableSize,\n  isFraction,\n  isInteger,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  /**\n   * Theme getters for theme variable namespaces\n   * @see https://tailwindcss.com/docs/theme#theme-variable-namespaces\n   */\n  /***/\n  const themeColor = fromTheme('color');\n  const themeFont = fromTheme('font');\n  const themeText = fromTheme('text');\n  const themeFontWeight = fromTheme('font-weight');\n  const themeTracking = fromTheme('tracking');\n  const themeLeading = fromTheme('leading');\n  const themeBreakpoint = fromTheme('breakpoint');\n  const themeContainer = fromTheme('container');\n  const themeSpacing = fromTheme('spacing');\n  const themeRadius = fromTheme('radius');\n  const themeShadow = fromTheme('shadow');\n  const themeInsetShadow = fromTheme('inset-shadow');\n  const themeTextShadow = fromTheme('text-shadow');\n  const themeDropShadow = fromTheme('drop-shadow');\n  const themeBlur = fromTheme('blur');\n  const themePerspective = fromTheme('perspective');\n  const themeAspect = fromTheme('aspect');\n  const themeEase = fromTheme('ease');\n  const themeAnimate = fromTheme('animate');\n  /**\n   * Helpers to avoid repeating the same scales\n   *\n   * We use functions that create a new array every time they're called instead of static arrays.\n   * This ensures that users who modify any scale by mutating the array (e.g. with `array.push(element)`) don't accidentally mutate arrays in other parts of the config.\n   */\n  /***/\n  const scaleBreak = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const scalePosition = () => ['center', 'top', 'bottom', 'left', 'right', 'top-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-top', 'top-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-top', 'bottom-right',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'right-bottom', 'bottom-left',\n  // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n  'left-bottom'];\n  const scalePositionWithArbitrary = () => [...scalePosition(), isArbitraryVariable, isArbitraryValue];\n  const scaleOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const scaleOverscroll = () => ['auto', 'contain', 'none'];\n  const scaleUnambiguousSpacing = () => [isArbitraryVariable, isArbitraryValue, themeSpacing];\n  const scaleInset = () => [isFraction, 'full', 'auto', ...scaleUnambiguousSpacing()];\n  const scaleGridTemplateColsRows = () => [isInteger, 'none', 'subgrid', isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartAndEnd = () => ['auto', {\n    span: ['full', isInteger, isArbitraryVariable, isArbitraryValue]\n  }, isInteger, isArbitraryVariable, isArbitraryValue];\n  const scaleGridColRowStartOrEnd = () => [isInteger, 'auto', isArbitraryVariable, isArbitraryValue];\n  const scaleGridAutoColsRows = () => ['auto', 'min', 'max', 'fr', isArbitraryVariable, isArbitraryValue];\n  const scaleAlignPrimaryAxis = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch', 'baseline', 'center-safe', 'end-safe'];\n  const scaleAlignSecondaryAxis = () => ['start', 'end', 'center', 'stretch', 'center-safe', 'end-safe'];\n  const scaleMargin = () => ['auto', ...scaleUnambiguousSpacing()];\n  const scaleSizing = () => [isFraction, 'auto', 'full', 'dvw', 'dvh', 'lvw', 'lvh', 'svw', 'svh', 'min', 'max', 'fit', ...scaleUnambiguousSpacing()];\n  const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue];\n  const scaleBgPosition = () => [...scalePosition(), isArbitraryVariablePosition, isArbitraryPosition, {\n    position: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleBgRepeat = () => ['no-repeat', {\n    repeat: ['', 'x', 'y', 'space', 'round']\n  }];\n  const scaleBgSize = () => ['auto', 'cover', 'contain', isArbitraryVariableSize, isArbitrarySize, {\n    size: [isArbitraryVariable, isArbitraryValue]\n  }];\n  const scaleGradientStopPosition = () => [isPercent, isArbitraryVariableLength, isArbitraryLength];\n  const scaleRadius = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', 'full', themeRadius, isArbitraryVariable, isArbitraryValue];\n  const scaleBorderWidth = () => ['', isNumber, isArbitraryVariableLength, isArbitraryLength];\n  const scaleLineStyle = () => ['solid', 'dashed', 'dotted', 'double'];\n  const scaleBlendMode = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const scaleMaskImagePosition = () => [isNumber, isPercent, isArbitraryVariablePosition, isArbitraryPosition];\n  const scaleBlur = () => [\n  // Deprecated since Tailwind CSS v4.0.0\n  '', 'none', themeBlur, isArbitraryVariable, isArbitraryValue];\n  const scaleRotate = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleScale = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleSkew = () => [isNumber, isArbitraryVariable, isArbitraryValue];\n  const scaleTranslate = () => [isFraction, 'full', ...scaleUnambiguousSpacing()];\n  return {\n    cacheSize: 500,\n    theme: {\n      animate: ['spin', 'ping', 'pulse', 'bounce'],\n      aspect: ['video'],\n      blur: [isTshirtSize],\n      breakpoint: [isTshirtSize],\n      color: [isAny],\n      container: [isTshirtSize],\n      'drop-shadow': [isTshirtSize],\n      ease: ['in', 'out', 'in-out'],\n      font: [isAnyNonArbitrary],\n      'font-weight': ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black'],\n      'inset-shadow': [isTshirtSize],\n      leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose'],\n      perspective: ['dramatic', 'near', 'normal', 'midrange', 'distant', 'none'],\n      radius: [isTshirtSize],\n      shadow: [isTshirtSize],\n      spacing: ['px', isNumber],\n      text: [isTshirtSize],\n      'text-shadow': [isTshirtSize],\n      tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest']\n    },\n    classGroups: {\n      // --------------\n      // --- Layout ---\n      // --------------\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', isFraction, isArbitraryValue, isArbitraryVariable, themeAspect]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       * @deprecated since Tailwind CSS v4.0.0\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isNumber, isArbitraryValue, isArbitraryVariable, themeContainer]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': scaleBreak()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': scaleBreak()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Screen Reader Only\n       * @see https://tailwindcss.com/docs/display#screen-reader-only\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: scalePositionWithArbitrary()\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: scaleOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': scaleOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': scaleOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': scaleOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': scaleOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: scaleInset()\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': scaleInset()\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': scaleInset()\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: scaleInset()\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: scaleInset()\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: scaleInset()\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: scaleInset()\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: scaleInset()\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: scaleInset()\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: [isInteger, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------------\n      // --- Flexbox and Grid ---\n      // ------------------------\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: [isFraction, 'full', 'auto', themeContainer, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['nowrap', 'wrap', 'wrap-reverse']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: [isNumber, isFraction, 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: [isInteger, 'first', 'last', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': scaleGridTemplateColsRows()\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: scaleGridColRowStartAndEnd()\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': scaleGridColRowStartOrEnd()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': scaleGridAutoColsRows()\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': scaleGridAutoColsRows()\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: [...scaleAlignPrimaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': [...scaleAlignSecondaryAxis(), 'normal']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...scaleAlignPrimaryAxis()]\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: [...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', ...scaleAlignSecondaryAxis(), {\n          baseline: ['', 'last']\n        }]\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': scaleAlignPrimaryAxis()\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': [...scaleAlignSecondaryAxis(), 'baseline']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', ...scaleAlignSecondaryAxis()]\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: scaleMargin()\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: scaleMargin()\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: scaleMargin()\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: scaleMargin()\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: scaleMargin()\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: scaleMargin()\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: scaleMargin()\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: scaleMargin()\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: scaleMargin()\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x': [{\n        'space-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y': [{\n        'space-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // --------------\n      // --- Sizing ---\n      // --------------\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/width#setting-both-width-and-height\n       */\n      size: [{\n        size: scaleSizing()\n      }],\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: [themeContainer, 'screen', ...scaleSizing()]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [themeContainer, 'screen', /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [themeContainer, 'screen', 'none', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        'prose', /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        {\n          screen: [themeBreakpoint]\n        }, ...scaleSizing()]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: ['screen', 'lh', ...scaleSizing()]\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': ['screen', 'lh', 'none', ...scaleSizing()]\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': ['screen', 'lh', ...scaleSizing()]\n      }],\n      // ------------------\n      // --- Typography ---\n      // ------------------\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', themeText, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Font Stretch\n       * @see https://tailwindcss.com/docs/font-stretch\n       */\n      'font-stretch': [{\n        'font-stretch': ['ultra-condensed', 'extra-condensed', 'condensed', 'semi-condensed', 'normal', 'semi-expanded', 'expanded', 'extra-expanded', 'ultra-expanded', isPercent, isArbitraryValue]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: [themeTracking, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': [isNumber, 'none', isArbitraryVariable, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: [/** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n        themeLeading, ...scaleUnambiguousSpacing()]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['disc', 'decimal', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://v3.tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: scaleColor()\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: scaleColor()\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...scaleLineStyle(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: [isNumber, 'from-font', 'auto', isArbitraryVariable, isArbitraryLength]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: scaleColor()\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': [isNumber, 'auto', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: scaleUnambiguousSpacing()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Overflow Wrap\n       * @see https://tailwindcss.com/docs/overflow-wrap\n       */\n      wrap: [{\n        wrap: ['break-word', 'anywhere', 'normal']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -------------------\n      // --- Backgrounds ---\n      // -------------------\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: scaleBgPosition()\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: scaleBgRepeat()\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: scaleBgSize()\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          linear: [{\n            to: ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n          }, isInteger, isArbitraryVariable, isArbitraryValue],\n          radial: ['', isArbitraryVariable, isArbitraryValue],\n          conic: [isInteger, isArbitraryVariable, isArbitraryValue]\n        }, isArbitraryVariableImage, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: scaleGradientStopPosition()\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: scaleColor()\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: scaleColor()\n      }],\n      // ---------------\n      // --- Borders ---\n      // ---------------\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: scaleRadius()\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': scaleRadius()\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': scaleRadius()\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': scaleRadius()\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': scaleRadius()\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': scaleRadius()\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': scaleRadius()\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': scaleRadius()\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': scaleRadius()\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': scaleRadius()\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': scaleRadius()\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': scaleRadius()\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: scaleBorderWidth()\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': scaleBorderWidth()\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': scaleBorderWidth()\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x': [{\n        'divide-x': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y': [{\n        'divide-y': scaleBorderWidth()\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/border-width#between-children\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style\n       */\n      'divide-style': [{\n        divide: [...scaleLineStyle(), 'hidden', 'none']\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: scaleColor()\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': scaleColor()\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': scaleColor()\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': scaleColor()\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': scaleColor()\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': scaleColor()\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': scaleColor()\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': scaleColor()\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': scaleColor()\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: scaleColor()\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: [...scaleLineStyle(), 'none', 'hidden']\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: ['', isNumber, isArbitraryVariableLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: scaleColor()\n      }],\n      // ---------------\n      // --- Effects ---\n      // ---------------\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color\n       */\n      'shadow-color': [{\n        shadow: scaleColor()\n      }],\n      /**\n       * Inset Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow\n       */\n      'inset-shadow': [{\n        'inset-shadow': ['none', themeInsetShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Inset Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color\n       */\n      'inset-shadow-color': [{\n        'inset-shadow': scaleColor()\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring\n       */\n      'ring-w': [{\n        ring: scaleBorderWidth()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color\n       */\n      'ring-color': [{\n        ring: scaleColor()\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://v3.tailwindcss.com/docs/ring-offset-width\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isNumber, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://v3.tailwindcss.com/docs/ring-offset-color\n       * @deprecated since Tailwind CSS v4.0.0\n       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n       */\n      'ring-offset-color': [{\n        'ring-offset': scaleColor()\n      }],\n      /**\n       * Inset Ring Width\n       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring\n       */\n      'inset-ring-w': [{\n        'inset-ring': scaleBorderWidth()\n      }],\n      /**\n       * Inset Ring Color\n       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color\n       */\n      'inset-ring-color': [{\n        'inset-ring': scaleColor()\n      }],\n      /**\n       * Text Shadow\n       * @see https://tailwindcss.com/docs/text-shadow\n       */\n      'text-shadow': [{\n        'text-shadow': ['none', themeTextShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Text Shadow Color\n       * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color\n       */\n      'text-shadow-color': [{\n        'text-shadow': scaleColor()\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...scaleBlendMode(), 'plus-darker', 'plus-lighter']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': scaleBlendMode()\n      }],\n      /**\n       * Mask Clip\n       * @see https://tailwindcss.com/docs/mask-clip\n       */\n      'mask-clip': [{\n        'mask-clip': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }, 'mask-no-clip'],\n      /**\n       * Mask Composite\n       * @see https://tailwindcss.com/docs/mask-composite\n       */\n      'mask-composite': [{\n        mask: ['add', 'subtract', 'intersect', 'exclude']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image-linear-pos': [{\n        'mask-linear': [isNumber]\n      }],\n      'mask-image-linear-from-pos': [{\n        'mask-linear-from': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-to-pos': [{\n        'mask-linear-to': scaleMaskImagePosition()\n      }],\n      'mask-image-linear-from-color': [{\n        'mask-linear-from': scaleColor()\n      }],\n      'mask-image-linear-to-color': [{\n        'mask-linear-to': scaleColor()\n      }],\n      'mask-image-t-from-pos': [{\n        'mask-t-from': scaleMaskImagePosition()\n      }],\n      'mask-image-t-to-pos': [{\n        'mask-t-to': scaleMaskImagePosition()\n      }],\n      'mask-image-t-from-color': [{\n        'mask-t-from': scaleColor()\n      }],\n      'mask-image-t-to-color': [{\n        'mask-t-to': scaleColor()\n      }],\n      'mask-image-r-from-pos': [{\n        'mask-r-from': scaleMaskImagePosition()\n      }],\n      'mask-image-r-to-pos': [{\n        'mask-r-to': scaleMaskImagePosition()\n      }],\n      'mask-image-r-from-color': [{\n        'mask-r-from': scaleColor()\n      }],\n      'mask-image-r-to-color': [{\n        'mask-r-to': scaleColor()\n      }],\n      'mask-image-b-from-pos': [{\n        'mask-b-from': scaleMaskImagePosition()\n      }],\n      'mask-image-b-to-pos': [{\n        'mask-b-to': scaleMaskImagePosition()\n      }],\n      'mask-image-b-from-color': [{\n        'mask-b-from': scaleColor()\n      }],\n      'mask-image-b-to-color': [{\n        'mask-b-to': scaleColor()\n      }],\n      'mask-image-l-from-pos': [{\n        'mask-l-from': scaleMaskImagePosition()\n      }],\n      'mask-image-l-to-pos': [{\n        'mask-l-to': scaleMaskImagePosition()\n      }],\n      'mask-image-l-from-color': [{\n        'mask-l-from': scaleColor()\n      }],\n      'mask-image-l-to-color': [{\n        'mask-l-to': scaleColor()\n      }],\n      'mask-image-x-from-pos': [{\n        'mask-x-from': scaleMaskImagePosition()\n      }],\n      'mask-image-x-to-pos': [{\n        'mask-x-to': scaleMaskImagePosition()\n      }],\n      'mask-image-x-from-color': [{\n        'mask-x-from': scaleColor()\n      }],\n      'mask-image-x-to-color': [{\n        'mask-x-to': scaleColor()\n      }],\n      'mask-image-y-from-pos': [{\n        'mask-y-from': scaleMaskImagePosition()\n      }],\n      'mask-image-y-to-pos': [{\n        'mask-y-to': scaleMaskImagePosition()\n      }],\n      'mask-image-y-from-color': [{\n        'mask-y-from': scaleColor()\n      }],\n      'mask-image-y-to-color': [{\n        'mask-y-to': scaleColor()\n      }],\n      'mask-image-radial': [{\n        'mask-radial': [isArbitraryVariable, isArbitraryValue]\n      }],\n      'mask-image-radial-from-pos': [{\n        'mask-radial-from': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-to-pos': [{\n        'mask-radial-to': scaleMaskImagePosition()\n      }],\n      'mask-image-radial-from-color': [{\n        'mask-radial-from': scaleColor()\n      }],\n      'mask-image-radial-to-color': [{\n        'mask-radial-to': scaleColor()\n      }],\n      'mask-image-radial-shape': [{\n        'mask-radial': ['circle', 'ellipse']\n      }],\n      'mask-image-radial-size': [{\n        'mask-radial': [{\n          closest: ['side', 'corner'],\n          farthest: ['side', 'corner']\n        }]\n      }],\n      'mask-image-radial-pos': [{\n        'mask-radial-at': scalePosition()\n      }],\n      'mask-image-conic-pos': [{\n        'mask-conic': [isNumber]\n      }],\n      'mask-image-conic-from-pos': [{\n        'mask-conic-from': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-to-pos': [{\n        'mask-conic-to': scaleMaskImagePosition()\n      }],\n      'mask-image-conic-from-color': [{\n        'mask-conic-from': scaleColor()\n      }],\n      'mask-image-conic-to-color': [{\n        'mask-conic-to': scaleColor()\n      }],\n      /**\n       * Mask Mode\n       * @see https://tailwindcss.com/docs/mask-mode\n       */\n      'mask-mode': [{\n        mask: ['alpha', 'luminance', 'match']\n      }],\n      /**\n       * Mask Origin\n       * @see https://tailwindcss.com/docs/mask-origin\n       */\n      'mask-origin': [{\n        'mask-origin': ['border', 'padding', 'content', 'fill', 'stroke', 'view']\n      }],\n      /**\n       * Mask Position\n       * @see https://tailwindcss.com/docs/mask-position\n       */\n      'mask-position': [{\n        mask: scaleBgPosition()\n      }],\n      /**\n       * Mask Repeat\n       * @see https://tailwindcss.com/docs/mask-repeat\n       */\n      'mask-repeat': [{\n        mask: scaleBgRepeat()\n      }],\n      /**\n       * Mask Size\n       * @see https://tailwindcss.com/docs/mask-size\n       */\n      'mask-size': [{\n        mask: scaleBgSize()\n      }],\n      /**\n       * Mask Type\n       * @see https://tailwindcss.com/docs/mask-type\n       */\n      'mask-type': [{\n        'mask-type': ['alpha', 'luminance']\n      }],\n      /**\n       * Mask Image\n       * @see https://tailwindcss.com/docs/mask-image\n       */\n      'mask-image': [{\n        mask: ['none', isArbitraryVariable, isArbitraryValue]\n      }],\n      // ---------------\n      // --- Filters ---\n      // ---------------\n      /**\n       * Filter\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: scaleBlur()\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': [\n        // Deprecated since Tailwind CSS v4.0.0\n        '', 'none', themeDropShadow, isArbitraryVariableShadow, isArbitraryShadow]\n      }],\n      /**\n       * Drop Shadow Color\n       * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color\n       */\n      'drop-shadow-color': [{\n        'drop-shadow': scaleColor()\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Filter\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': [\n        // Deprecated since Tailwind CSS v3.0.0\n        '', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': scaleBlur()\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': ['', isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      // --------------\n      // --- Tables ---\n      // --------------\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // ---------------------------------\n      // --- Transitions and Animation ---\n      // ---------------------------------\n      /**\n       * Transition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['', 'all', 'colors', 'opacity', 'shadow', 'transform', 'none', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Behavior\n       * @see https://tailwindcss.com/docs/transition-behavior\n       */\n      'transition-behavior': [{\n        transition: ['normal', 'discrete']\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: [isNumber, 'initial', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'initial', themeEase, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: [isNumber, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', themeAnimate, isArbitraryVariable, isArbitraryValue]\n      }],\n      // ------------------\n      // --- Transforms ---\n      // ------------------\n      /**\n       * Backface Visibility\n       * @see https://tailwindcss.com/docs/backface-visibility\n       */\n      backface: [{\n        backface: ['hidden', 'visible']\n      }],\n      /**\n       * Perspective\n       * @see https://tailwindcss.com/docs/perspective\n       */\n      perspective: [{\n        perspective: [themePerspective, isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Perspective Origin\n       * @see https://tailwindcss.com/docs/perspective-origin\n       */\n      'perspective-origin': [{\n        'perspective-origin': scalePositionWithArbitrary()\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: scaleRotate()\n      }],\n      /**\n       * Rotate X\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-x': [{\n        'rotate-x': scaleRotate()\n      }],\n      /**\n       * Rotate Y\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-y': [{\n        'rotate-y': scaleRotate()\n      }],\n      /**\n       * Rotate Z\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      'rotate-z': [{\n        'rotate-z': scaleRotate()\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: scaleScale()\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': scaleScale()\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': scaleScale()\n      }],\n      /**\n       * Scale Z\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-z': [{\n        'scale-z': scaleScale()\n      }],\n      /**\n       * Scale 3D\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-3d': ['scale-3d'],\n      /**\n       * Skew\n       * @see https://tailwindcss.com/docs/skew\n       */\n      skew: [{\n        skew: scaleSkew()\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': scaleSkew()\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': scaleSkew()\n      }],\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: [isArbitraryVariable, isArbitraryValue, '', 'none', 'gpu', 'cpu']\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: scalePositionWithArbitrary()\n      }],\n      /**\n       * Transform Style\n       * @see https://tailwindcss.com/docs/transform-style\n       */\n      'transform-style': [{\n        transform: ['3d', 'flat']\n      }],\n      /**\n       * Translate\n       * @see https://tailwindcss.com/docs/translate\n       */\n      translate: [{\n        translate: scaleTranslate()\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': scaleTranslate()\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': scaleTranslate()\n      }],\n      /**\n       * Translate Z\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-z': [{\n        'translate-z': scaleTranslate()\n      }],\n      /**\n       * Translate None\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-none': ['translate-none'],\n      // ---------------------\n      // --- Interactivity ---\n      // ---------------------\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: scaleColor()\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: scaleColor()\n      }],\n      /**\n       * Color Scheme\n       * @see https://tailwindcss.com/docs/color-scheme\n       */\n      'color-scheme': [{\n        scheme: ['normal', 'dark', 'light', 'light-dark', 'only-dark', 'only-light']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryVariable, isArbitraryValue]\n      }],\n      /**\n       * Field Sizing\n       * @see https://tailwindcss.com/docs/field-sizing\n       */\n      'field-sizing': [{\n        'field-sizing': ['fixed', 'content']\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['auto', 'none']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', '', 'y', 'x']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': scaleUnambiguousSpacing()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryVariable, isArbitraryValue]\n      }],\n      // -----------\n      // --- SVG ---\n      // -----------\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: ['none', ...scaleColor()]\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isNumber, isArbitraryVariableLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: ['none', ...scaleColor()]\n      }],\n      // ---------------------\n      // --- Accessibility ---\n      // ---------------------\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-x', 'border-w-y', 'border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-x', 'border-color-y', 'border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      translate: ['translate-x', 'translate-y', 'translate-none'],\n      'translate-none': ['translate', 'translate-x', 'translate-y', 'translate-z'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    },\n    orderSensitiveModifiers: ['*', '**', 'after', 'backdrop', 'before', 'details-content', 'file', 'first-letter', 'first-line', 'marker', 'placeholder', 'selection']\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  overrideConfigProperties(baseConfig.theme, override.theme);\n  overrideConfigProperties(baseConfig.classGroups, override.classGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroups, override.conflictingClassGroups);\n  overrideConfigProperties(baseConfig.conflictingClassGroupModifiers, override.conflictingClassGroupModifiers);\n  overrideProperty(baseConfig, 'orderSensitiveModifiers', override.orderSensitiveModifiers);\n  mergeConfigProperties(baseConfig.theme, extend.theme);\n  mergeConfigProperties(baseConfig.classGroups, extend.classGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroups, extend.conflictingClassGroups);\n  mergeConfigProperties(baseConfig.conflictingClassGroupModifiers, extend.conflictingClassGroupModifiers);\n  mergeArrayProperties(baseConfig, extend, 'orderSensitiveModifiers');\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      mergeArrayProperties(baseObject, mergeObject, key);\n    }\n  }\n};\nconst mergeArrayProperties = (baseObject, mergeObject, key) => {\n  const mergeValue = mergeObject[key];\n  if (mergeValue !== undefined) {\n    baseObject[key] = baseObject[key] ? baseObject[key].concat(mergeValue) : mergeValue;\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\nexport { createTailwindMerge, extendTailwindMerge, fromTheme, getDefaultConfig, mergeConfigs, twJoin, twMerge, validators };\n//# sourceMappingURL=bundle-mjs.mjs.map\n","import { type ClassValue, clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\n/**\r\n * Utility function to merge Tailwind CSS classes\r\n * Combines clsx for conditional classes and tailwind-merge for deduplication\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n","import React from 'react';\r\nimport { cva, type VariantProps } from 'class-variance-authority';\r\nimport { cn } from '../utils/cn';\r\n\r\nconst buttonVariants = cva(\r\n  'inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        primary: 'bg-emerald-600 text-white shadow-sm hover:bg-emerald-700 hover:shadow-md focus:ring-emerald-500',\r\n        secondary: 'bg-white text-stone-700 border border-stone-300 shadow-sm hover:bg-stone-50 hover:shadow-md focus:ring-stone-500',\r\n        success: 'bg-green-600 text-white shadow-sm hover:bg-green-700 hover:shadow-md focus:ring-green-500',\r\n        danger: 'bg-red-600 text-white shadow-sm hover:bg-red-700 hover:shadow-md focus:ring-red-500',\r\n        warning: 'bg-orange-600 text-white shadow-sm hover:bg-orange-700 hover:shadow-md focus:ring-orange-500',\r\n        ghost: 'text-stone-600 hover:text-stone-900 hover:bg-stone-100 focus:ring-stone-500',\r\n        outline: 'border border-stone-300 bg-transparent text-stone-700 hover:bg-stone-50 focus:ring-stone-500',\r\n      },\r\n      size: {\r\n        sm: 'h-8 px-3 text-xs',\r\n        md: 'h-10 px-4 text-sm',\r\n        lg: 'h-12 px-6 text-base',\r\n        xl: 'h-14 px-8 text-lg',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'primary',\r\n      size: 'md',\r\n    },\r\n  }\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  loading?: boolean;\r\n  leftIcon?: React.ReactNode;\r\n  rightIcon?: React.ReactNode;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, loading, leftIcon, rightIcon, children, disabled, ...props }, ref) => {\r\n    return (\r\n      <button\r\n        className={cn(buttonVariants({ variant, size }), className)}\r\n        ref={ref}\r\n        disabled={disabled || loading}\r\n        {...props}\r\n      >\r\n        {loading && (\r\n          <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n          </svg>\r\n        )}\r\n        {!loading && leftIcon && <span className=\"mr-1\">{leftIcon}</span>}\r\n        {children}\r\n        {!loading && rightIcon && <span className=\"ml-1\">{rightIcon}</span>}\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\nButton.displayName = 'Button';\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport Button from './Button';\r\n\r\ninterface ToastMessageProps {\r\n  message: string;\r\n  type?: 'success' | 'error' | 'info' | 'warning';\r\n  onClose: () => void;\r\n}\r\n\r\nconst typeStyles = {\r\n  success:\r\n    'bg-green-100 text-green-800 border-green-400 dark:bg-green-800 dark:text-green-100 dark:border-green-600',\r\n  error:\r\n    'bg-red-100 text-red-800 border-red-400 dark:bg-red-800 dark:text-red-100 dark:border-red-600',\r\n  warning:\r\n    'bg-yellow-100 text-yellow-800 border-yellow-400 dark:bg-yellow-700 dark:text-yellow-100 dark:border-yellow-500',\r\n  info: 'bg-blue-100 text-blue-800 border-blue-400 dark:bg-blue-800 dark:text-blue-100 dark:border-blue-600',\r\n};\r\n\r\nconst ToastMessage: React.FC<ToastMessageProps> = ({ message, type = 'info', onClose }) => (\r\n  <div\r\n    className={`p-4 rounded-md shadow-lg border w-full flex items-start text-sm ${typeStyles[type] || typeStyles.info}`}\r\n    data-testid=\"toast-message\"\r\n    role=\"alert\"\r\n    aria-live=\"assertive\"\r\n  >\r\n    <div className=\"flex-1 font-medium\">{message}</div>\r\n    <Button\r\n      onClick={onClose}\r\n      variant=\"secondary\"\r\n      className=\"ml-4 p-1 h-7 w-7 flex items-center justify-center text-slate-500 hover:text-slate-800 dark:text-slate-300 dark:hover:text-white\"\r\n      aria-label=\"Toast schließen\"\r\n      title=\"Schließen\"\r\n    >\r\n      ×\r\n    </Button>\r\n  </div>\r\n);\r\n\r\nexport default ToastMessage;\r\n","import React from 'react';\r\nimport ToastMessage from './ToastMessage';\r\n\r\ninterface Toast {\r\n  id: string;\r\n  message: string;\r\n  type: 'success' | 'error' | 'info' | 'warning';\r\n  duration?: number;\r\n}\r\n\r\ninterface ToastContainerProps {\r\n  toasts: Toast[];\r\n  removeToast: (id: string) => void;\r\n}\r\n\r\nconst ToastContainer: React.FC<ToastContainerProps> = ({ toasts, removeToast }) => (\r\n  <div className=\"fixed top-4 right-4 z-[10001] space-y-3 w-full max-w-xs sm:max-w-sm\">\r\n    {toasts.map((toast) => (\r\n      <ToastMessage key={toast.id} {...toast} onClose={() => removeToast(toast.id)} />\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default ToastContainer;\r\n","import React, { createContext, useContext, useState, useRef, useCallback } from 'react';\r\nimport ToastContainer from '../components/ToastContainer';\r\n\r\ninterface Toast {\r\n  id: number;\r\n  message: string;\r\n  type: 'info' | 'success' | 'warning' | 'error';\r\n}\r\n\r\ninterface ToastContextType {\r\n  addToast: (\r\n    message: string,\r\n    type?: 'info' | 'success' | 'warning' | 'error',\r\n    duration?: number\r\n  ) => void;\r\n  removeToast: (id: number) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | null>(null);\r\n\r\nexport const ToastProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [toasts, setToasts] = useState<Toast[]>([]);\r\n  const toastIdRef = useRef<number>(0);\r\n\r\n  const removeToast = useCallback((id: number) => {\r\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\r\n  }, []);\r\n\r\n  const addToast = useCallback(\r\n    (\r\n      message: string,\r\n      type: 'info' | 'success' | 'warning' | 'error' = 'info',\r\n      duration: number = 3000\r\n    ) => {\r\n      const id = toastIdRef.current++;\r\n      setToasts((prev) => [...prev, { id, message, type }]);\r\n      if (duration && duration > 0) {\r\n        setTimeout(() => removeToast(id), duration);\r\n      }\r\n    },\r\n    [removeToast]\r\n  );\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ addToast, removeToast }}>\r\n      {children}\r\n      <ToastContainer toasts={toasts} removeToast={removeToast} />\r\n    </ToastContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useToasts = (): ToastContextType => {\r\n  const context = useContext(ToastContext);\r\n  if (!context) throw new Error('useToasts must be used within a ToastProvider');\r\n  return context;\r\n};\r\n","interface WaterProfile {\r\n  name: string;\r\n  ph: number;\r\n  ec: number; // mS/cm\r\n  ca: number; // mg/L\r\n  mg: number; // mg/L\r\n  na: number; // mg/L\r\n  s: number;\r\n  fe: number;\r\n  mn: number;\r\n  zn: number;\r\n  cu: number;\r\n  b: number;\r\n  mo: number;\r\n}\r\n\r\ninterface WaterDefaults {\r\n  tapWater: WaterProfile;\r\n  roWater: WaterProfile;\r\n}\r\n\r\nexport const WATER_DEFAULTS: WaterDefaults = {\r\n  tapWater: {\r\n    name: 'Leitungswasser',\r\n    ph: 7.5,\r\n    ec: 0.5, // mS/cm\r\n    ca: 50, // mg/L\r\n    mg: 10, // mg/L\r\n    na: 20, // mg/L\r\n    s: 5, // Default for Tap Water\r\n    fe: 0.05, // Default for Tap Water\r\n    mn: 0.02, // Default for Tap Water\r\n    zn: 0.01, // Default for Tap Water\r\n    cu: 0.005, // Default for Tap Water\r\n    b: 0.01, // Default for Tap Water\r\n    mo: 0.001, // Default for Tap Water\r\n  },\r\n  roWater: {\r\n    name: 'Umkehrosmosewasser',\r\n    ph: 6.5,\r\n    ec: 0.05,\r\n    ca: 0,\r\n    mg: 0,\r\n    na: 0,\r\n    s: 0,\r\n    fe: 0,\r\n    mn: 0,\r\n    zn: 0,\r\n    cu: 0,\r\n    b: 0,\r\n    mo: 0,\r\n  },\r\n};\r\n","// Storage keys\r\nexport const LOCAL_STORAGE_KEY_GEMINI_API_KEY = 'nutricalc_gemini_api_key';\r\nexport const LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS = 'nutricalc_custom_fertilizers';\r\nexport const LOCAL_STORAGE_KEY_CUSTOM_WATER = 'nutricalc_custom_water';\r\n\r\n// Tab IDs\r\nexport const TAB_BASIC = 'basic';\r\nexport const TAB_ADVANCED = 'advanced';\r\nexport const TAB_ANALYSIS = 'analysis';\r\nexport const TAB_CUSTOM_FERTILIZER = 'customFertilizer';\r\nexport const TAB_AI_ASSISTANT = 'ai-assistant';\r\nexport const TAB_SETTINGS = 'settings';\r\nexport const TAB_REFERENCES = 'references';\r\nexport const TAB_MIXING_ASSISTANT = 'mixingassistant';\r\nexport const TAB_WATERING_SCHEDULER = 'watering';\r\n\r\n// Tab configuration\r\nexport const TABS_CONFIG = [\r\n  { id: TAB_BASIC, label: 'Setup' },\r\n  { id: TAB_ADVANCED, label: 'Details' },\r\n  { id: TAB_ANALYSIS, label: 'Analyse' },\r\n  { id: TAB_CUSTOM_FERTILIZER, label: 'Dünger' },\r\n  { id: TAB_AI_ASSISTANT, label: 'AI-Assistent' },\r\n  { id: TAB_SETTINGS, label: 'Einstellungen' },\r\n  { id: TAB_MIXING_ASSISTANT, label: 'Misch-Assistent' },\r\n  { id: TAB_WATERING_SCHEDULER, label: 'Gießplaner' },\r\n  { id: TAB_REFERENCES, label: 'Referenzen' },\r\n];\r\n\r\ninterface GrowthStageConfig {\r\n  name: string;\r\n  n: [number, number];\r\n  p: [number, number];\r\n  k: [number, number];\r\n  ec: [number, number];\r\n}\r\n\r\ninterface GrowthStages {\r\n  [key: string]: GrowthStageConfig;\r\n}\r\n\r\n// Growth stages configuration\r\nexport const GROWTH_STAGES: GrowthStages = {\r\n  early_veg: {\r\n    name: 'Frühe Vegetation',\r\n    n: [100, 150],\r\n    p: [30, 50],\r\n    k: [100, 150],\r\n    ec: [0.8, 1.2],\r\n  },\r\n  late_veg: {\r\n    name: 'Späte Vegetation',\r\n    n: [150, 200],\r\n    p: [50, 70],\r\n    k: [150, 200],\r\n    ec: [1.2, 1.6],\r\n  },\r\n  early_flower: {\r\n    name: 'Frühe Blüte',\r\n    n: [100, 150],\r\n    p: [70, 90],\r\n    k: [200, 250],\r\n    ec: [1.4, 1.8],\r\n  },\r\n  mid_flower: {\r\n    name: 'Mittlere Blüte',\r\n    n: [80, 120],\r\n    p: [90, 110],\r\n    k: [250, 300],\r\n    ec: [1.6, 2.0],\r\n  },\r\n  late_flower: {\r\n    name: 'Späte Blüte',\r\n    n: [50, 80],\r\n    p: [110, 130],\r\n    k: [300, 350],\r\n    ec: [1.8, 2.2],\r\n  },\r\n};\r\n\r\ninterface WaterType {\r\n  name: string;\r\n}\r\n\r\ninterface WaterTypes {\r\n  [key: string]: WaterType;\r\n}\r\n\r\n// Water types configuration\r\nexport const WATER_TYPES: WaterTypes = {\r\n  ro: { name: 'Umkehrosmose' },\r\n  tap: { name: 'Leitungswasser' },\r\n  custom: { name: 'Eigenes Profil' },\r\n};\r\n\r\ninterface NutrientField {\r\n  key: string;\r\n  label: string;\r\n}\r\n\r\n// Nutrient fields configuration\r\nexport const NUTRIENT_FIELDS: NutrientField[] = [\r\n  { key: 'n', label: 'Stickstoff (N)' },\r\n  { key: 'p', label: 'Phosphor (P)' },\r\n  { key: 'k', label: 'Kalium (K)' },\r\n  { key: 'ca', label: 'Calcium (Ca)' },\r\n  { key: 'mg', label: 'Magnesium (Mg)' },\r\n  { key: 's', label: 'Schwefel (S)' },\r\n  { key: 'fe', label: 'Eisen (Fe)' },\r\n  { key: 'mn', label: 'Mangan (Mn)' },\r\n  { key: 'zn', label: 'Zink (Zn)' },\r\n  { key: 'cu', label: 'Kupfer (Cu)' },\r\n  { key: 'b', label: 'Bor (B)' },\r\n  { key: 'mo', label: 'Molybdän (Mo)' },\r\n  { key: 'ec', label: 'EC' },\r\n];\r\n\r\ninterface FertilizerComposition {\r\n  n: number;\r\n  p: number;\r\n  k: number;\r\n  ca: number;\r\n  mg: number;\r\n  s: number;\r\n  b: number;\r\n  cu: number;\r\n  fe: number;\r\n  mn: number;\r\n  mo: number;\r\n  zn: number;\r\n}\r\n\r\ninterface FertilizerData {\r\n  name: string;\r\n  type: 'liquid' | 'powder';\r\n  unit: 'ml' | 'g';\r\n  description?: string;\r\n  composition: FertilizerComposition;\r\n}\r\n\r\ninterface FertilizerDatabase {\r\n  [key: string]: FertilizerData;\r\n}\r\n\r\n// Base fertilizer database\r\nexport const BASE_FERTILIZER_DATABASE: FertilizerDatabase = {\r\n  atami_ata_calmag: {\r\n    name: 'Atami ATA CalMag',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 72.616,\r\n      p: 0,\r\n      k: 0,\r\n      ca: 60.87224,\r\n      mg: 18.8739,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0.3756,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_ata_clean: {\r\n    name: 'Atami ATA Clean',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 10.36,\r\n      p: 101.159702,\r\n      k: 65.581649,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0.3885,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_ata_terra_leaves: {\r\n    name: 'Atami ATA Terra Leaves',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 23.69,\r\n      p: 4.944412,\r\n      k: 23.942968,\r\n      ca: 0,\r\n      mg: 6.83199,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_ata_terra_max: {\r\n    name: 'Atami ATA Terra Max',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 24.42,\r\n      p: 8.719272,\r\n      k: 35.939358,\r\n      ca: 0,\r\n      mg: 4.68531,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_bcuzz_bloom_stimulator: {\r\n    name: \"Atami B'cuzz Bloom Stimulator\",\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 0.998,\r\n      p: 0.78394896,\r\n      k: 1.98849504,\r\n      ca: 1.997996,\r\n      mg: 1.203588,\r\n      s: 0.51896,\r\n      b: 0,\r\n      cu: 0.00499,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0.00499,\r\n    },\r\n  },\r\n  atami_bcuzz_blossom_builder: {\r\n    name: \"Atami B'cuzz Blossom Builder\",\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    description: '',\r\n    composition: {\r\n      n: 0,\r\n      p: 108.017728,\r\n      k: 254.0412,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_bcuzz_coco_nutrition_a: {\r\n    name: \"Atami B'cuzz Coco Nutrition A\",\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    description: '',\r\n    composition: {\r\n      n: 60.75,\r\n      p: 0,\r\n      k: 50.43465,\r\n      ca: 48.6486,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_bcuzz_coco_nutrition_b: {\r\n    name: \"Atami B'cuzz Coco Nutrition B\",\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    description: '',\r\n    composition: {\r\n      n: 0,\r\n      p: 19.847472,\r\n      k: 56.636244,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  atami_bcuzz_premium_plant_powder: {\r\n    name: \"Atami B'cuzz Premium Plant Powder\",\r\n    type: 'powder',\r\n    unit: 'g',\r\n    description: '',\r\n    composition: {\r\n      n: 90,\r\n      p: 30.548,\r\n      k: 141.134,\r\n      ca: 28.6,\r\n      mg: 18.09,\r\n      s: 0,\r\n      b: 0.2,\r\n      cu: 0.004,\r\n      fe: 0.9,\r\n      mn: 0.4,\r\n      mo: 0.03,\r\n      zn: 0.5,\r\n    },\r\n  },\r\n  athena_blended_bloom_a: {\r\n    name: 'Athena Blended Bloom A',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    description: '',\r\n    composition: {\r\n      n: 47.8,\r\n      p: 0,\r\n      k: 49.60445,\r\n      ca: 38.27824,\r\n      mg: 2.0320497,\r\n      s: 0,\r\n      b: 0.1195,\r\n      cu: 0,\r\n      fe: 0.717,\r\n      mn: 0.15535,\r\n      mo: 0.008365,\r\n      zn: 0.053775,\r\n    },\r\n  },\r\n  athena_blended_bloom_b: {\r\n    name: 'Athena Blended Bloom B',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 8.078,\r\n      p: 30.216336,\r\n      k: 47.90254,\r\n      ca: 0,\r\n      mg: 10.8554472,\r\n      s: 15.002,\r\n      b: 0,\r\n      cu: 0.0577,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  athena_blended_camg: {\r\n    name: 'Athena Blended CaMg',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 22.24,\r\n      p: 0,\r\n      k: 0,\r\n      ca: 23.375352,\r\n      mg: 12.23057664,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0.6672,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  athena_blended_grow_a: {\r\n    name: 'Athena Blended Grow A',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 48.36,\r\n      p: 0,\r\n      k: 10.037118,\r\n      ca: 50.828778,\r\n      mg: 2.29643505,\r\n      s: 0,\r\n      b: 0.1209,\r\n      cu: 0,\r\n      fe: 0.7254,\r\n      mn: 0.15717,\r\n      mo: 0.008463,\r\n      zn: 0.054405,\r\n    },\r\n  },\r\n  athena_blended_grow_b: {\r\n    name: 'Athena Blended Grow B',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 11.4,\r\n      p: 14.92488,\r\n      k: 47.3214,\r\n      ca: 0,\r\n      mg: 10.1531934,\r\n      s: 14.82,\r\n      b: 0,\r\n      cu: 0.057,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  athena_blended_pk: {\r\n    name: 'Athena Blended PK',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 0,\r\n      p: 26.655312,\r\n      k: 63.38577,\r\n      ca: 0,\r\n      mg: 14.6404179,\r\n      s: 22.905,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  athena_pro_bloom: {\r\n    name: 'Athena Pro Bloom',\r\n    type: 'powder',\r\n    unit: 'g',\r\n    composition: {\r\n      n: 0,\r\n      p: 52.368,\r\n      k: 199.248,\r\n      ca: 0,\r\n      mg: 30.0294,\r\n      s: 90,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 1,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  athena_pro_core: {\r\n    name: 'Athena Pro Core',\r\n    type: 'powder',\r\n    unit: 'g',\r\n    composition: {\r\n      n: 140,\r\n      p: 0,\r\n      k: 0,\r\n      ca: 170.17,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0.15,\r\n      cu: 0.1,\r\n      fe: 0.7,\r\n      mn: 0.25,\r\n      mo: 0.02,\r\n      zn: 0.1,\r\n    },\r\n  },\r\n  athena_pro_fade: {\r\n    name: 'Athena Pro Fade',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 0,\r\n      p: 0,\r\n      k: 0,\r\n      ca: 44.52448,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0.1112,\r\n      cu: 0.0556,\r\n      fe: 0.6672,\r\n      mn: 0.14456,\r\n      mo: 0.007784,\r\n      zn: 0.05004,\r\n    },\r\n  },\r\n  athena_pro_grow: {\r\n    name: 'Athena Pro Grow',\r\n    type: 'powder',\r\n    unit: 'g',\r\n    composition: {\r\n      n: 20,\r\n      p: 34.912,\r\n      k: 166.04,\r\n      ca: 0,\r\n      mg: 30.0294,\r\n      s: 80,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 1,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_alg_a_mic: {\r\n    name: 'BioBizz Alg-a-mic',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 2.088,\r\n      p: 0.9112032,\r\n      k: 1.7334576,\r\n      ca: 1.045044,\r\n      mg: 1.04502312,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_bio_bloom: {\r\n    name: 'BioBizz Bio Bloom',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 21.1464,\r\n      p: 30.24828048,\r\n      k: 38.65809696,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_bio_grow: {\r\n    name: 'BioBizz Bio Grow',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 54.6,\r\n      p: 17.0196,\r\n      k: 64.7556,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_bio_heaven: {\r\n    name: 'BioBizz Bio Heaven',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 12.288,\r\n      p: 0.13406208,\r\n      k: 0.17002496,\r\n      ca: 2.855424,\r\n      mg: 0.1234944,\r\n      s: 0,\r\n      b: 0.1024,\r\n      cu: 0,\r\n      fe: 2.56,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0.03072,\r\n    },\r\n  },\r\n  biobizz_calmag: {\r\n    name: 'BioBizz CalMag',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 0,\r\n      p: 0,\r\n      k: 0,\r\n      ca: 35.31528,\r\n      mg: 12.055176,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_fish_mix: {\r\n    name: 'BioBizz Fish Mix',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 61.1,\r\n      p: 5.332808,\r\n      k: 40.580176,\r\n      ca: 0,\r\n      mg: 0,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_root_juice: {\r\n    name: 'BioBizz Root Juice',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 2.3092,\r\n      p: 0.8762912,\r\n      k: 1.08357704,\r\n      ca: 0,\r\n      mg: 0.0605412,\r\n      s: 0,\r\n      b: 0,\r\n      cu: 0,\r\n      fe: 0,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0,\r\n    },\r\n  },\r\n  biobizz_top_max: {\r\n    name: 'BioBizz Top Max',\r\n    type: 'liquid',\r\n    unit: 'ml',\r\n    composition: {\r\n      n: 1.7068,\r\n      p: 0.8762912,\r\n      k: 1.16692912,\r\n      ca: 0,\r\n      mg: 0.1816236,\r\n      s: 0,\r\n      b: 0.11044,\r\n      cu: 0.01004,\r\n      fe: 0.1004,\r\n      mn: 0,\r\n      mo: 0,\r\n      zn: 0.03012,\r\n    },\r\n  },\r\n};\r\n\r\n// Recipe version\r\nexport const RECIPE_VERSION = '1.0.0';\r\n","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { WATER_DEFAULTS } from '../constants/waterDefaults';\r\nimport { NUTRIENT_FIELDS } from '../constants';\r\n\r\ninterface WaterSource {\r\n  id: string;\r\n  name: string;\r\n  ph: number;\r\n  ec: number;\r\n  ca: number;\r\n  mg: number;\r\n  na: number;\r\n  s: number;\r\n  fe: number;\r\n  mn: number;\r\n  zn: number;\r\n  cu: number;\r\n  b: number;\r\n  mo: number;\r\n  volume: number;\r\n}\r\n\r\ninterface MixedWater extends Omit<WaterSource, 'id' | 'name' | 'volume'> {\r\n  totalVolume: number;\r\n}\r\n\r\ninterface WaterContextType {\r\n  waterSources: WaterSource[];\r\n  mixedWater: MixedWater | null;\r\n  addWaterSource: (type: string) => void;\r\n  removeWaterSource: (id: string) => void;\r\n  updateWaterSource: (id: string, field: keyof WaterSource, value: number | string) => void;\r\n}\r\n\r\nconst WaterContext = createContext<WaterContextType | undefined>(undefined);\r\n\r\ninterface WaterProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const WaterProvider: React.FC<WaterProviderProps> = ({ children }) => {\r\n  const [waterSources, setWaterSources] = useState<WaterSource[]>([\r\n    { id: 'tapWater', ...WATER_DEFAULTS.tapWater, volume: 100 },\r\n    { id: 'roWater', ...WATER_DEFAULTS.roWater, volume: 0 },\r\n  ]);\r\n  const [mixedWater, setMixedWater] = useState<MixedWater | null>(null);\r\n\r\n  useEffect(() => {\r\n    calculateMixedWater();\r\n  }, [waterSources]);\r\n\r\n  const calculateMixedWater = () => {\r\n    if (waterSources.length === 0) {\r\n      setMixedWater(null);\r\n      return;\r\n    }\r\n\r\n    let sum_H_plus_volume = 0;\r\n    let sum_volume = 0;\r\n\r\n    const paramSums: Record<string, number> = {};\r\n    NUTRIENT_FIELDS.forEach((field) => {\r\n      paramSums[field.key] = 0;\r\n    });\r\n    paramSums.ec = 0; // EC is a separate calculated value\r\n\r\n    waterSources.forEach((source) => {\r\n      const { ph, ec, volume } = source;\r\n      if (volume > 0) {\r\n        // pH calculation (logarithmic)\r\n        const H_i = Math.pow(10, -ph);\r\n        sum_H_plus_volume += H_i * volume;\r\n        sum_volume += volume;\r\n\r\n        // Other parameters (linear average)\r\n        NUTRIENT_FIELDS.forEach((field) => {\r\n          paramSums[field.key] +=\r\n            ((source[field.key as keyof WaterSource] as number) || 0) * volume;\r\n        });\r\n        paramSums.ec += ec * volume;\r\n      }\r\n    });\r\n\r\n    if (sum_volume === 0) {\r\n      setMixedWater(null);\r\n      return;\r\n    }\r\n\r\n    // Calculate mixed pH\r\n    const H_plus_mix = sum_H_plus_volume / sum_volume;\r\n    const ph_mix = -Math.log10(H_plus_mix);\r\n\r\n    // Calculate mixed values for other parameters\r\n    const mixedNutrients: Record<string, number> = {};\r\n    NUTRIENT_FIELDS.forEach((field) => {\r\n      mixedNutrients[field.key] = paramSums[field.key] / sum_volume;\r\n    });\r\n    const mixedEC = paramSums.ec / sum_volume;\r\n\r\n    setMixedWater({\r\n      ph: ph_mix,\r\n      ec: mixedEC,\r\n      ...mixedNutrients,\r\n      totalVolume: sum_volume,\r\n    });\r\n  };\r\n\r\n  const addWaterSource = (type: string) => {\r\n    const newSource: WaterSource = {\r\n      id: `${type}-${Date.now()}`, // Unique ID\r\n      ...(WATER_DEFAULTS[type] || {\r\n        name: 'Neue Quelle',\r\n        ph: 7.0,\r\n        ec: 0.2,\r\n        ca: 0,\r\n        mg: 0,\r\n        na: 0,\r\n        s: 0,\r\n        fe: 0,\r\n        mn: 0,\r\n        zn: 0,\r\n        cu: 0,\r\n        b: 0,\r\n        mo: 0,\r\n      }),\r\n      volume: 0,\r\n    };\r\n    setWaterSources((prevSources) => [...prevSources, newSource]);\r\n  };\r\n\r\n  const removeWaterSource = (id: string) => {\r\n    setWaterSources((prevSources) => prevSources.filter((source) => source.id !== id));\r\n  };\r\n\r\n  const updateWaterSource = (id: string, field: keyof WaterSource, value: number | string) => {\r\n    setWaterSources((prevSources) =>\r\n      prevSources.map((source) => (source.id === id ? { ...source, [field]: value } : source))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <WaterContext.Provider\r\n      value={{\r\n        waterSources,\r\n        mixedWater,\r\n        addWaterSource,\r\n        removeWaterSource,\r\n        updateWaterSource,\r\n      }}\r\n    >\r\n      {children}\r\n    </WaterContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useWater = (): WaterContextType => {\r\n  const context = useContext(WaterContext);\r\n  if (!context) {\r\n    throw new Error('useWater must be used within a WaterProvider');\r\n  }\r\n  return context;\r\n};\r\n","import React, { useState, useRef } from 'react';\r\nimport Button from './Button';\r\n\r\ninterface ChatBarProps {\r\n  apiKey: boolean;\r\n  onSend: (message: string) => void;\r\n  isLoading: boolean;\r\n  displayMessage: string;\r\n  suggestions?: string[];\r\n}\r\n\r\nconst ChatBar: React.FC<ChatBarProps> = React.memo(({ apiKey, onSend, isLoading, displayMessage, suggestions = [] }) => {\r\n  const [inputValue, setInputValue] = useState('');\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleSend = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!inputValue.trim() || !apiKey) return;\r\n    onSend(inputValue.trim());\r\n    setInputValue('');\r\n  };\r\n\r\n  const suggestionClicked = (suggestion: string) => {\r\n    setInputValue(suggestion);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-xl p-4 shadow-sm border border-stone-200\">\r\n      <div className=\"flex items-start gap-3\">\r\n        <div className=\"flex-shrink-0 pt-0.5\">\r\n          <div className=\"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center\">\r\n            <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-grow text-sm text-stone-700 min-h-[36px] leading-relaxed\">\r\n          {isLoading && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <svg className=\"animate-spin h-4 w-4 text-emerald-600\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n              </svg>\r\n              <span className=\"text-stone-500\">AI denkt nach...</span>\r\n            </div>\r\n          )}\r\n          {!isLoading && displayMessage && (\r\n            <div className=\"prose prose-sm max-w-none\">\r\n              {displayMessage}\r\n            </div>\r\n          )}\r\n          {!isLoading && !displayMessage && (\r\n            <div className=\"text-stone-500 italic\">\r\n              Stellen Sie eine Frage zur Nährstoffberechnung...\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {!isLoading && displayMessage && suggestions.length > 0 && (\r\n        <div className=\"mt-4 pl-11\">\r\n          <div className=\"text-xs text-stone-500 mb-2\">Vorschläge:</div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {suggestions.map((s, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => suggestionClicked(s)}\r\n                className=\"px-3 py-1 text-xs bg-white border border-stone-200 rounded-full hover:bg-stone-50 hover:border-emerald-300 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500\"\r\n                aria-label={`Vorschlag: ${s}`}\r\n              >\r\n                {s}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      <form onSubmit={handleSend} className=\"mt-4 flex items-center gap-3 pl-11\">\r\n        <div className=\"flex-1 relative\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={inputValue}\r\n            onChange={(e) => setInputValue(e.target.value)}\r\n            placeholder={!apiKey ? 'API Key fehlt' : 'Stellen Sie eine Frage zur Nährstoffberechnung...'}\r\n            className=\"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors\"\r\n            disabled={isLoading || !apiKey}\r\n            aria-label=\"KI Frage eingeben\"\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n          loading={isLoading}\r\n          disabled={!inputValue.trim() || !apiKey}\r\n          aria-label=\"Frage senden\"\r\n          rightIcon={\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n            </svg>\r\n          }\r\n        >\r\n          Fragen\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n});\r\n\r\nChatBar.displayName = 'ChatBar';\r\n\r\nexport default ChatBar;\r\n","import type { NutrientCalculation, SelectedFertilizer, Fertilizer, NutrientField, GrowthStageConfig, WaterTypeConfig, MixedWater } from '../types/index.js';\r\n\r\ninterface CalculateNutrientResultsParams {\r\n  waterVolume: number;\r\n  growthStage: string;\r\n  waterType: string;\r\n  selectedFertilizers: SelectedFertilizer[];\r\n  fertilizerDatabase: Record<string, Fertilizer>;\r\n  customWaterProfile?: Record<string, number>;\r\n  NUTRIENT_FIELDS: NutrientField[];\r\n  GROWTH_STAGES: Record<string, GrowthStageConfig>;\r\n  WATER_TYPES: Record<string, WaterTypeConfig>;\r\n  mixedWater?: MixedWater;\r\n}\r\n\r\nexport function calculateNutrientResults({\r\n  waterVolume,\r\n  growthStage,\r\n  waterType,\r\n  selectedFertilizers,\r\n  fertilizerDatabase,\r\n  customWaterProfile,\r\n  NUTRIENT_FIELDS,\r\n  GROWTH_STAGES,\r\n  WATER_TYPES,\r\n  mixedWater,\r\n}: CalculateNutrientResultsParams): NutrientCalculation {\r\n  if (waterVolume <= 0) {\r\n    return { nutrients: {}, contributions: {}, stage: GROWTH_STAGES[growthStage] };\r\n  }\r\n\r\n  let baseN: Record<string, number> = {};\r\n  let currentEC = 0;\r\n  let basePH = 0;\r\n\r\n  if (mixedWater) {\r\n    NUTRIENT_FIELDS.forEach((field) => {\r\n      baseN[field.key] = mixedWater[field.key] || 0;\r\n    });\r\n    currentEC = mixedWater.ec || 0;\r\n    basePH = mixedWater.ph || 0;\r\n  } else if (waterType === 'custom') {\r\n    baseN = {\r\n      ca: customWaterProfile?.ca || 0,\r\n      mg: customWaterProfile?.mg || 0,\r\n      s: customWaterProfile?.s || 0,\r\n      na: customWaterProfile?.na || 0,\r\n      cl: customWaterProfile?.cl || 0,\r\n      no3: customWaterProfile?.no3 || 0,\r\n      so4: customWaterProfile?.so4 || 0,\r\n      po4: customWaterProfile?.po4 || 0,\r\n    };\r\n    currentEC = customWaterProfile?.baseEC || 0;\r\n    basePH = customWaterProfile?.ph || 0;\r\n  } else {\r\n    const pWater = WATER_TYPES[waterType];\r\n    baseN = {\r\n      ca: pWater.ca || 0,\r\n      mg: pWater.mg || 0,\r\n      s: pWater.s || 0,\r\n      na: 0,\r\n      cl: 0,\r\n      no3: 0,\r\n      so4: 0,\r\n      po4: 0,\r\n    };\r\n    currentEC = pWater.baseEC !== undefined ? pWater.baseEC : 0;\r\n    basePH = pWater.ph || 0;\r\n  }\r\n\r\n  const tN: Record<string, number> = NUTRIENT_FIELDS.reduce((acc: Record<string, number>, f) => {\r\n    acc[f.key] = 0;\r\n    return acc;\r\n  }, {});\r\n\r\n  NUTRIENT_FIELDS.forEach((field) => {\r\n    tN[field.key] = baseN[field.key] || 0;\r\n  });\r\n  tN.ec = currentEC;\r\n  tN.ph = basePH;\r\n\r\n  const contrib: Record<string, Record<string, number>> = {};\r\n  let nutrEC = 0;\r\n\r\n  (selectedFertilizers || []).forEach((fert) => {\r\n    if (!fert.active || !fert.amount || Number(fert.amount) === 0) return;\r\n    const fD = fertilizerDatabase[fert.id];\r\n    if (!fD?.composition) return;\r\n\r\n    const cFC: Record<string, number> = {};\r\n    const fA = Number(fert.amount);\r\n\r\n    Object.keys(fD.composition).forEach((nk) => {\r\n      const nC = Number(fD.composition[nk]) || 0;\r\n      if (nC === 0 || !NUTRIENT_FIELDS.find((field) => field.key === nk)) return;\r\n\r\n      const nVppm = fD.type === 'powder' ? (fA * nC * 10) / waterVolume : (fA * nC) / waterVolume;\r\n\r\n      cFC[nk] = nVppm;\r\n      tN[nk] = (tN[nk] || 0) + nVppm;\r\n    });\r\n    contrib[fert.id] = cFC;\r\n  });\r\n\r\n  nutrEC =\r\n    ((tN.n || 0) - (baseN.n || 0)) * 0.007 +\r\n    ((tN.p || 0) - (baseN.p || 0)) * 0.005 +\r\n    ((tN.k || 0) - (baseN.k || 0)) * 0.008 +\r\n    ((tN.ca || 0) - baseN.ca) * 0.006 +\r\n    ((tN.mg || 0) - baseN.mg) * 0.004 +\r\n    ((tN.s || 0) - baseN.s) * 0.003;\r\n\r\n  tN.ec = currentEC + Math.max(0, nutrEC);\r\n\r\n  Object.keys(tN).forEach((k) => {\r\n    tN[k] = Number(Math.round(tN[k] * 100) / 100);\r\n    if (isNaN(tN[k])) tN[k] = 0;\r\n  });\r\n\r\n  return { nutrients: tN, contributions: contrib, stage: GROWTH_STAGES[growthStage] };\r\n}\r\n","import React from 'react';\r\nimport Button from './Button';\r\n\r\ninterface SelectedFertilizer {\r\n  id: string;\r\n  amount: number;\r\n  active: boolean;\r\n}\r\n\r\ninterface FertilizerData {\r\n  name: string;\r\n  type: 'liquid' | 'powder';\r\n  unit: string;\r\n  composition: Record<string, number>;\r\n  description?: string;\r\n}\r\n\r\ninterface FertilizerManagerProps {\r\n  selectedFertilizers: SelectedFertilizer[];\r\n  fertilizerDatabase: Record<string, FertilizerData>;\r\n  waterVolume: number;\r\n  addFertilizer: (id: string) => void;\r\n  removeFertilizer: (id: string) => void;\r\n  updateFertilizerAmount: (id: string, value: string) => void;\r\n  toggleFertilizer: (id: string) => void;\r\n}\r\n\r\nconst FertilizerManager: React.FC<FertilizerManagerProps> = React.memo(({\r\n  selectedFertilizers,\r\n  fertilizerDatabase,\r\n  waterVolume,\r\n  addFertilizer,\r\n  removeFertilizer,\r\n  updateFertilizerAmount,\r\n  toggleFertilizer,\r\n}) => (\r\n  <div className=\"space-y-2 max-h-[400px] lg:max-h-[calc(100vh-350px)] overflow-y-auto p-0.5\">\r\n    {(selectedFertilizers || []).map((fert) => {\r\n      const fertData = fertilizerDatabase[fert.id];\r\n      if (!fertData) return null;\r\n      return (\r\n        <div\r\n          key={fert.id}\r\n          className={`p-2 border rounded-md ${fert.active ? 'bg-white dark:bg-slate-800 border-blue-300 dark:border-blue-600' : 'bg-slate-100 dark:bg-slate-900/50 border-slate-300 dark:border-slate-700'}`}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-1.5\">\r\n            <div className=\"flex items-center gap-1.5\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id={`fertActive-${fert.id}`}\r\n                checked={fert.active}\r\n                onChange={() => toggleFertilizer(fert.id)}\r\n                className=\"w-3.5 h-3.5 text-blue-600 dark:text-blue-500 border-slate-300 dark:border-slate-600 rounded focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-slate-700\"\r\n                aria-label={`Aktivieren ${fertData.name}`}\r\n              />\r\n              <div>\r\n                <label\r\n                  htmlFor={`fertActive-${fert.id}`}\r\n                  className=\"text-xs font-medium text-slate-700 dark:text-slate-200 cursor-pointer\"\r\n                >\r\n                  {fertData.name}\r\n                  {fert.id && fert.id.startsWith('custom_') && (\r\n                    <span className=\"ml-1 px-1 py-0.5 text-[10px] bg-yellow-200 dark:bg-yellow-700 text-yellow-800 dark:text-yellow-100 rounded align-middle\">\r\n                      Custom\r\n                    </span>\r\n                  )}\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              onClick={() => removeFertilizer(fert.id)}\r\n              variant=\"danger\"\r\n              className=\"p-0.5 h-7 w-7 flex items-center justify-center text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300\"\r\n              aria-label={`Entfernen ${fertData.name}`}\r\n              title={`Entfernen ${fertData.name}`}\r\n            >\r\n              ×\r\n            </Button>\r\n          </div>\r\n          <div className=\"flex items-center gap-1.5\">\r\n            <input\r\n              type=\"number\"\r\n              value={fert.amount}\r\n              onChange={(e) => updateFertilizerAmount(fert.id, e.target.value)}\r\n              disabled={!fert.active}\r\n              className=\"flex-1 px-2 py-1 border rounded-md text-xs disabled:opacity-60 dark:bg-slate-700 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              min=\"0\"\r\n              step={fertData.type === 'powder' ? '0.01' : '0.1'}\r\n              aria-label={`Menge für ${fertData.name}`}\r\n            />\r\n            <span className=\"text-xs text-slate-500 dark:text-slate-400 min-w-fit\">\r\n              {fertData.unit}/{waterVolume > 0 ? waterVolume : 1}L\r\n            </span>\r\n          </div>\r\n        </div>\r\n      );\r\n    })}\r\n    <div className=\"border-t border-slate-300 dark:border-slate-700 pt-2 mt-2\">\r\n      <select\r\n        onChange={(e) => addFertilizer(e.target.value)}\r\n        className=\"w-full px-2 py-1 border rounded-md text-xs dark:bg-slate-700 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        value=\"\"\r\n        aria-label=\"Dünger hinzufügen\"\r\n      >\r\n        <option value=\"\">Dünger hinzufügen...</option>\r\n        {Object.entries(fertilizerDatabase)\r\n          .sort(([, a], [, b]) => a.name.localeCompare(b.name))\r\n          .map(([key, fert]) => (\r\n            <option\r\n              key={key}\r\n              value={key}\r\n              disabled={(selectedFertilizers || []).some((f) => f.id === key)}\r\n            >\r\n              {fert.name}\r\n              {key.startsWith('custom_') ? ' (Custom)' : ''}\r\n            </option>\r\n          ))}\r\n      </select>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nFertilizerManager.displayName = 'FertilizerManager';\r\n\r\nexport default FertilizerManager;\r\n","import { useState, useEffect } from 'react';\r\n\r\ninterface AppSettings {\r\n  unit: 'liter' | 'gallon';\r\n  waterAmount: string;\r\n  growthPhase: string;\r\n  waterType: string;\r\n}\r\n\r\nconst useAppSettings = () => {\r\n  const [settings, setSettings] = useState<AppSettings>(() => {\r\n    try {\r\n      const storedSettings = localStorage.getItem('appSettings');\r\n      return storedSettings\r\n        ? JSON.parse(storedSettings)\r\n        : {\r\n            unit: 'liter', // 'liter' or 'gallon'\r\n            waterAmount: '',\r\n            growthPhase: '',\r\n            waterType: '',\r\n          };\r\n    } catch {\r\n      // Silently fall back to defaults if localStorage parsing fails\r\n      return {\r\n        unit: 'liter',\r\n        waterAmount: '',\r\n        growthPhase: '',\r\n        waterType: '',\r\n      };\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('appSettings', JSON.stringify(settings));\r\n    } catch {\r\n      // Silently handle localStorage save errors\r\n    }\r\n  }, [settings]);\r\n\r\n  const updateSetting = (key: string, value: string) => {\r\n    setSettings((prevSettings) => ({\r\n      ...prevSettings,\r\n      [key]: value,\r\n    }));\r\n  };\r\n\r\n  return { settings, updateSetting };\r\n};\r\n\r\nexport default useAppSettings;\r\n","import React from 'react';\r\nimport { useWater } from '../contexts/WaterContext';\r\nimport { NUTRIENT_FIELDS } from '../constants';\r\nimport useAppSettings from '../hooks/useAppSettings';\r\nimport Button from './Button';\r\n\r\n\r\n\r\nconst WaterInput: React.FC = React.memo(() => {\r\n  const { waterSources, mixedWater, addWaterSource, removeWaterSource, updateWaterSource } =\r\n    useWater();\r\n  const { settings } = useAppSettings();\r\n\r\n  const handleChange = (id: string, field: string, value: string) => {\r\n    const numericValue = parseFloat(value);\r\n    const safeValue = isNaN(numericValue) ? 0 : Math.max(0, numericValue);\r\n    updateWaterSource(id, field as 'ph' | 'ec' | 'ca' | 'mg' | 'na' | 's' | 'fe' | 'mn' | 'zn' | 'cu' | 'b' | 'mo' | 'volume', safeValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 bg-gray-800 rounded-lg shadow-md\">\r\n      <h2 className=\"text-xl font-bold mb-4 text-white\">Wasserqualität & Mischung</h2>\r\n\r\n      {waterSources.map((source) => (\r\n        <div key={source.id} className=\"mb-4 p-3 border border-gray-700 rounded-md bg-gray-750\">\r\n          <div className=\"flex justify-between items-center mb-2\">\r\n            <h3 className=\"text-lg font-semibold text-white\">{source.name}</h3>\r\n            {waterSources.length > 1 && (\r\n              <Button\r\n                onClick={() => removeWaterSource(source.id)}\r\n                variant=\"danger\"\r\n                className=\"text-red-400 hover:text-red-500 font-bold py-1 px-2 text-xs\"\r\n                aria-label={`Wasserquelle ${source.name} entfernen`}\r\n                title={`Wasserquelle ${source.name} entfernen`}\r\n              >\r\n                Entfernen\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <h4 className=\"text-md font-semibold text-gray-200 mb-2\">Basische Parameter</h4>\r\n          <div className=\"grid grid-cols-2 gap-2 text-sm mb-4\">\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">pH-Wert:</span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                value={source.ph}\r\n                onChange={(e) => handleChange(source.id, 'ph', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">EC (mS/cm):</span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                value={source.ec}\r\n                onChange={(e) => handleChange(source.id, 'ec', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n          </div>\r\n          <h4 className=\"text-md font-semibold text-gray-200 mb-2\">Mineralgehalt (mg/L)</h4>\r\n          <div className=\"grid grid-cols-2 gap-2 text-sm mb-4\">\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">Ca:</span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"1\"\r\n                value={source.ca}\r\n                onChange={(e) => handleChange(source.id, 'ca', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">Mg:</span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"1\"\r\n                value={source.mg}\r\n                onChange={(e) => handleChange(source.id, 'mg', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">Na:</span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"1\"\r\n                value={source.na}\r\n                onChange={(e) => handleChange(source.id, 'na', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n            {NUTRIENT_FIELDS.filter(\r\n              (field) => !['n', 'p', 'k', 'ca', 'mg', 'na'].includes(field.key)\r\n            ).map((field) => (\r\n              <label key={field.key} className=\"block\">\r\n                <span className=\"text-gray-300\">{field.label ? field.label.split(' ')[0] : field.key.toUpperCase()}:</span>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  value={(source as Record<string, number>)[field.key]}\r\n                  onChange={(e) => handleChange(source.id, field.key, e.target.value)}\r\n                  className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n                />\r\n              </label>\r\n            ))}\r\n            <label className=\"block\">\r\n              <span className=\"text-gray-300\">\r\n                Volumen ({settings.unit === 'liter' ? 'L' : 'Gal'}):\r\n              </span>\r\n              <input\r\n                type=\"number\"\r\n                step=\"1\"\r\n                value={source.volume}\r\n                onChange={(e) => handleChange(source.id, 'volume', e.target.value)}\r\n                className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 bg-white text-gray-900 mt-1 block\"\r\n              />\r\n            </label>\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <div className=\"flex justify-center space-x-2 mt-4\">\r\n        <Button\r\n          onClick={() => addWaterSource('tapWater')}\r\n          variant=\"primary\"\r\n          aria-label=\"Leitungswasser hinzufügen\"\r\n          title=\"Leitungswasser hinzufügen\"\r\n        >\r\n          Leitungswasser hinzufügen\r\n        </Button>\r\n        <Button\r\n          onClick={() => addWaterSource('roWater')}\r\n          variant=\"primary\"\r\n          aria-label=\"Osmosewasser hinzufügen\"\r\n          title=\"Osmosewasser hinzufügen\"\r\n        >\r\n          Osmosewasser hinzufügen\r\n        </Button>\r\n        <Button\r\n          onClick={() => addWaterSource('custom')}\r\n          variant=\"primary\"\r\n          aria-label=\"Eigene Quelle hinzufügen\"\r\n          title=\"Eigene Quelle hinzufügen\"\r\n        >\r\n          Eigene Quelle hinzufügen\r\n        </Button>\r\n      </div>\r\n\r\n      {mixedWater && (\r\n        <div className=\"mt-6 p-4 bg-gray-700 rounded-md text-white\">\r\n          <h3 className=\"text-lg font-semibold mb-2\">Zusammenfassung der Wasserwerte</h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-600\">\r\n              <thead className=\"bg-gray-700\">\r\n                <tr>\r\n                  <th className=\"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">\r\n                    Quelle\r\n                  </th>\r\n                  <th className=\"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">\r\n                    Volumen (L)\r\n                  </th>\r\n                  <th className=\"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">\r\n                    pH\r\n                  </th>\r\n                  <th className=\"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">\r\n                    EC (mS/cm)\r\n                  </th>\r\n                  {NUTRIENT_FIELDS.map((field) => (\r\n                    <th\r\n                      key={field.key}\r\n                      className=\"py-2 px-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\"\r\n                    >\r\n                      {field.label ? field.label.split(' ')[0] : field.key.toUpperCase()} ({field.key.toUpperCase()})\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-gray-800 divide-y divide-gray-700\">\r\n                {waterSources.map((source) => (\r\n                  <tr key={source.id}>\r\n                    <td className=\"py-2 px-4 whitespace-nowrap text-sm text-gray-200\">\r\n                      {source.name}\r\n                    </td>\r\n                    <td className=\"py-2 px-4 whitespace-nowrap text-sm text-gray-200\">\r\n                      {source.volume.toFixed(1)}\r\n                    </td>\r\n                    <td className=\"py-2 px-4 whitespace-nowrap text-sm text-gray-200\">\r\n                      {source.ph.toFixed(2)}\r\n                    </td>\r\n                    <td className=\"py-2 px-4 whitespace-nowrap text-sm text-gray-200\">\r\n                      {source.ec.toFixed(2)}\r\n                    </td>\r\n                    {NUTRIENT_FIELDS.map((field) => (\r\n                      <td\r\n                        key={field.key}\r\n                        className=\"py-2 px-4 whitespace-nowrap text-sm text-gray-200\"\r\n                      >\r\n                        {((source as Record<string, number>)[field.key] || 0).toFixed(1)}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n                <tr className=\"bg-gray-600 font-bold\">\r\n                  <td className=\"py-2 px-4 whitespace-nowrap text-sm text-white\">Gemischt</td>\r\n                  <td className=\"py-2 px-4 whitespace-nowrap text-sm text-white\">\r\n                    {mixedWater.totalVolume.toFixed(1)} {settings.unit === 'liter' ? 'L' : 'Gal'}\r\n                  </td>\r\n                  <td className=\"py-2 px-4 whitespace-nowrap text-sm text-white\">\r\n                    {mixedWater.ph.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"py-2 px-4 whitespace-nowrap text-sm text-white\">\r\n                    {mixedWater.ec.toFixed(2)}\r\n                  </td>\r\n                  {NUTRIENT_FIELDS.map((field) => (\r\n                    <td key={field.key} className=\"py-2 px-4 whitespace-nowrap text-sm text-white\">\r\n                      {((mixedWater as Record<string, number>)[field.key] || 0).toFixed(1)}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nWaterInput.displayName = 'WaterInput';\r\n\r\nexport default WaterInput;\r\n","import React from 'react';\r\nimport { cva, type VariantProps } from 'class-variance-authority';\r\nimport { cn } from '../utils/cn';\r\n\r\nconst cardVariants = cva(\r\n  'bg-white rounded-xl border border-stone-200 overflow-hidden',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'shadow-sm',\r\n        elevated: 'shadow-lg hover:shadow-xl transition-shadow duration-300',\r\n        outlined: 'border-2 shadow-none',\r\n        ghost: 'border-none shadow-none bg-transparent',\r\n      },\r\n      padding: {\r\n        none: '',\r\n        sm: 'p-4',\r\n        md: 'p-6',\r\n        lg: 'p-8',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      padding: 'md',\r\n    },\r\n  }\r\n);\r\n\r\nexport interface CardProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof cardVariants> {}\r\n\r\nconst Card = React.forwardRef<HTMLDivElement, CardProps>(\r\n  ({ className, variant, padding, ...props }, ref) => (\r\n    <div\r\n      ref={ref}\r\n      className={cn(cardVariants({ variant, padding, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n);\r\nCard.displayName = 'Card';\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('px-6 py-4 bg-stone-50 border-b border-stone-200', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = 'CardHeader';\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn('text-lg font-semibold text-stone-900 leading-tight', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = 'CardTitle';\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn('text-sm text-stone-600 mt-1', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = 'CardDescription';\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn('px-6 py-5', className)} {...props} />\r\n));\r\nCardContent.displayName = 'CardContent';\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('px-6 py-4 bg-stone-50 border-t border-stone-200', className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = 'CardFooter';\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n","import React, { useState, useEffect } from 'react';\r\nimport { calculateNutrientResults } from '../utils/calculateNutrients';\r\nimport { useToasts } from '../contexts/ToastContext';\r\nimport FertilizerManager from './FertilizerManager';\r\nimport WaterInput from './WaterInput';\r\nimport { GROWTH_STAGES, WATER_TYPES, NUTRIENT_FIELDS } from '../constants';\r\nimport useAppSettings from '../hooks/useAppSettings';\r\nimport Button from './Button';\r\nimport { Card, CardHeader, CardTitle, CardContent } from './Card';\r\nimport { Fertilizer } from '../types';\r\n\r\nconst initialCustomWaterProfile = {\r\n  ca: 0,\r\n  mg: 0,\r\n  s: 0,\r\n  na: 0,\r\n  cl: 0,\r\n  no3: 0,\r\n  so4: 0,\r\n  po4: 0,\r\n  baseEC: 0.0,\r\n};\r\n\r\nconst defaultFertilizerSelection = [\r\n  // Example: { id: 'hesi_tnt', amount: 3.0, active: true },\r\n];\r\n\r\nconst mainNutrients = [\r\n  { key: 'n', label: 'N (Stickstoff)', unit: 'ppm' },\r\n  { key: 'p', label: 'P (Phosphor)', unit: 'ppm' },\r\n  { key: 'k', label: 'K (Kalium)', unit: 'ppm' },\r\n  { key: 'ec', label: 'EC', unit: 'mS/cm' },\r\n];\r\n\r\ninterface SetupTabProps {\r\n  NUTRIENT_FIELDS: typeof NUTRIENT_FIELDS;\r\n  GROWTH_STAGES: typeof GROWTH_STAGES;\r\n  WATER_TYPES: typeof WATER_TYPES;\r\n  fertilizerDatabase: Record<string, Fertilizer>;\r\n  onAnalysisUpdate?: (data: Record<string, unknown>) => void;\r\n  mixedWater?: Record<string, number>;\r\n}\r\n\r\nexport const SetupTab: React.FC<SetupTabProps> = ({\r\n  NUTRIENT_FIELDS: propNutrientFields,\r\n  GROWTH_STAGES,\r\n  WATER_TYPES,\r\n  fertilizerDatabase,\r\n  onAnalysisUpdate,\r\n  mixedWater,\r\n}) => {\r\n  const { addToast } = useToasts();\r\n  const { settings } = useAppSettings();\r\n\r\n  const [waterVolume, setWaterVolume] = useState(() => {\r\n    const defaultVolume = settings.waterAmount ? Number(settings.waterAmount) : 10;\r\n    return Math.max(0.1, defaultVolume);\r\n  });\r\n  const [growthStage, setGrowthStage] = useState(\r\n    settings.growthPhase || Object.keys(GROWTH_STAGES)[0]\r\n  );\r\n  const [waterType, setWaterType] = useState(settings.waterType || Object.keys(WATER_TYPES)[0]);\r\n  const [customWaterProfile, setCustomWaterProfile] =\r\n    useState<Record<string, number>>(initialCustomWaterProfile);\r\n  const [selectedFertilizers, setSelectedFertilizers] = useState<\r\n    Array<{ id: string; amount: number; active: boolean }>\r\n  >(defaultFertilizerSelection);\r\n\r\n  const initialNutrientResults = {};\r\n  mainNutrients.forEach((field) => {\r\n    initialNutrientResults[field.key] = 0;\r\n  });\r\n\r\n  const [results, setResults] = useState({\r\n    nutrients: initialNutrientResults,\r\n    contributions: {},\r\n    stage: GROWTH_STAGES[growthStage],\r\n  });\r\n\r\n  useEffect(() => {\r\n    const newResults = calculateNutrientResults({\r\n      waterVolume,\r\n      growthStage,\r\n      waterType,\r\n      selectedFertilizers,\r\n      fertilizerDatabase: fertilizerDatabase || {},\r\n      customWaterProfile,\r\n      NUTRIENT_FIELDS: propNutrientFields,\r\n      GROWTH_STAGES,\r\n      WATER_TYPES,\r\n      mixedWater,\r\n    });\r\n    const populatedNutrients = {};\r\n    mainNutrients.forEach((nutrient) => {\r\n      populatedNutrients[nutrient.key] = newResults.nutrients?.[nutrient.key] ?? 0;\r\n    });\r\n\r\n    setResults({ ...newResults, nutrients: populatedNutrients });\r\n    if (onAnalysisUpdate) {\r\n      onAnalysisUpdate({\r\n        NUTRIENT_FIELDS: propNutrientFields,\r\n        GROWTH_STAGES,\r\n        WATER_TYPES,\r\n        fertilizerDatabase,\r\n        selectedFertilizers,\r\n        waterVolume,\r\n        growthStage,\r\n        waterType,\r\n        customWaterProfile,\r\n        results: newResults,\r\n        mixedWater,\r\n      });\r\n    }\r\n  }, [\r\n    waterVolume,\r\n    growthStage,\r\n    waterType,\r\n    customWaterProfile,\r\n    selectedFertilizers,\r\n    fertilizerDatabase,\r\n    propNutrientFields,\r\n    GROWTH_STAGES,\r\n    WATER_TYPES,\r\n    mixedWater,\r\n  ]);\r\n\r\n  // Refresh selectedFertilizers if fertilizerDatabase changes (e.g., custom fertilizer added/removed)\r\n  useEffect(() => {\r\n    setSelectedFertilizers((prev) => prev.filter((f) => fertilizerDatabase[f.id]));\r\n  }, [fertilizerDatabase]);\r\n\r\n  // Fertilizer handlers\r\n  const addFertilizer = (id) => {\r\n    if (!id || selectedFertilizers.find((f) => f.id === id)) return;\r\n    const fert = fertilizerDatabase[id];\r\n    setSelectedFertilizers((prev) => [\r\n      ...prev,\r\n      { id, amount: fert?.type === 'powder' ? 0.1 : 1.0, active: true },\r\n    ]);\r\n  };\r\n  const removeFertilizer = (id) => {\r\n    setSelectedFertilizers((prev) => prev.filter((f) => f.id !== id));\r\n  };\r\n  const updateFertilizerAmount = (id, value) => {\r\n    const amount = parseFloat(value);\r\n    setSelectedFertilizers((prev) =>\r\n      prev.map((f) =>\r\n        f.id === id ? { ...f, amount: isNaN(amount) || amount < 0 ? 0 : amount } : f\r\n      )\r\n    );\r\n  };\r\n  const toggleFertilizer = (id) => {\r\n    setSelectedFertilizers((prev) =>\r\n      prev.map((f) => (f.id === id ? { ...f, active: !f.active } : f))\r\n    );\r\n  };\r\n\r\n  // Export/Import logic\r\n  const handleExport = () => {\r\n    try {\r\n      const customFertilizers = JSON.parse(\r\n        localStorage.getItem('nutricalc_custom_fertilizers') || '[]'\r\n      );\r\n      const data = {\r\n        selectedFertilizers,\r\n        waterVolume,\r\n        growthStage,\r\n        waterType,\r\n        customWaterProfile,\r\n        customFertilizers,\r\n      };\r\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'nutricalc-setup.json';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n      addToast('Setup exportiert!', 'success');\r\n    } catch {\r\n      addToast('Fehler beim Export!', 'error');\r\n    }\r\n  };\r\n\r\n  const handleImport = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      try {\r\n        const data = JSON.parse(evt.target.result);\r\n        if (!data || typeof data !== 'object') throw new Error();\r\n        setSelectedFertilizers(\r\n          Array.isArray(data.selectedFertilizers) ? data.selectedFertilizers : []\r\n        );\r\n        setWaterVolume(Number(data.waterVolume) || 10);\r\n        setGrowthStage(data.growthStage || Object.keys(GROWTH_STAGES)[0]);\r\n        setWaterType(data.waterType || Object.keys(WATER_TYPES)[0]);\r\n        setCustomWaterProfile(\r\n          typeof data.customWaterProfile === 'object'\r\n            ? data.customWaterProfile\r\n            : initialCustomWaterProfile\r\n        );\r\n        if (Array.isArray(data.customFertilizers)) {\r\n          localStorage.setItem(\r\n            'nutricalc_custom_fertilizers',\r\n            JSON.stringify(data.customFertilizers)\r\n          );\r\n          if (window.dispatchEvent) {\r\n            window.dispatchEvent(\r\n              new StorageEvent('storage', { key: 'nutricalc_custom_fertilizers' })\r\n            );\r\n          }\r\n        }\r\n        addToast('Setup importiert!', 'success');\r\n      } catch {\r\n        addToast('Ungültige Datei!', 'error');\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  // Auto-Optimize logic\r\n  const autoOptimize = () => {\r\n    // Example logic: set recommended amounts for common fertilizers based on growthStage\r\n    let updated = [...selectedFertilizers];\r\n    let changed = false;\r\n    if (growthStage.includes('veg')) {\r\n      updated = updated.map((f) =>\r\n        f.id === 'hesi_tnt'\r\n          ? { ...f, amount: 5.0, active: true }\r\n          : f.id === 'ta_calmg'\r\n            ? { ...f, amount: 2.5, active: true }\r\n            : f\r\n      );\r\n      changed = true;\r\n    } else if (growthStage.includes('flower')) {\r\n      updated = updated.map((f) =>\r\n        f.id === 'hesi_bloom' ? { ...f, amount: 6.0, active: true } : f\r\n      );\r\n      changed = true;\r\n    }\r\n    if (changed) {\r\n      setSelectedFertilizers(updated);\r\n      addToast('Empfohlene Dosierung geladen!', 'info');\r\n    } else {\r\n      addToast('Keine Empfehlung für diese Phase.', 'warning');\r\n    }\r\n  };\r\n\r\n  // Clear All Data logic\r\n  const clearAllData = () => {\r\n    if (window.confirm('Alle Daten (eigene Dünger, Wasserprofil, Auswahl) wirklich löschen?')) {\r\n      setSelectedFertilizers([]);\r\n      setCustomWaterProfile(initialCustomWaterProfile);\r\n      localStorage.removeItem('nutricalc_custom_fertilizers');\r\n      addToast('Alle Daten wurden zurückgesetzt.', 'info');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"grid lg:grid-cols-2 gap-8\">\r\n        {/* Basic Settings Card */}\r\n        <Card variant=\"elevated\">\r\n          <CardHeader>\r\n            <CardTitle>Grundeinstellungen</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-stone-700 mb-2\" htmlFor=\"waterVolume\">\r\n                Wassermenge ({settings.unit === 'liter' ? 'Liter' : 'Gallonen'})\r\n              </label>\r\n              <input\r\n                id=\"waterVolume\"\r\n                type=\"number\"\r\n                min=\"0.1\"\r\n                step=\"0.1\"\r\n                value={waterVolume}\r\n                onChange={(e) => setWaterVolume(Math.max(0.1, Number(e.target.value)))}\r\n                className=\"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors\"\r\n                placeholder=\"z.B. 10\"\r\n                aria-label=\"Wassermenge\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-stone-700 mb-2\" htmlFor=\"growthStage\">\r\n                Wachstumsphase\r\n              </label>\r\n              <select\r\n                id=\"growthStage\"\r\n                value={growthStage}\r\n                onChange={(e) => setGrowthStage(e.target.value)}\r\n                className=\"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors\"\r\n                aria-label=\"Wachstumsphase\"\r\n              >\r\n                {Object.entries(GROWTH_STAGES).map(([key, stage]) => (\r\n                  <option key={key} value={key}>\r\n                    {stage.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-stone-700 mb-2\" htmlFor=\"waterType\">\r\n                Wassertyp\r\n              </label>\r\n              <select\r\n                id=\"waterType\"\r\n                value={waterType}\r\n                onChange={(e) => setWaterType(e.target.value)}\r\n                className=\"w-full px-4 py-2.5 bg-white border border-stone-300 rounded-lg text-stone-900 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors\"\r\n                aria-label=\"Wassertyp\"\r\n              >\r\n                {Object.entries(WATER_TYPES).map(([key, type]) => (\r\n                  <option key={key} value={key}>\r\n                    {type.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            {waterType === 'custom' && (\r\n              <div className=\"mt-6 p-4 bg-stone-50 rounded-lg border border-stone-200\">\r\n                <h3 className=\"text-sm font-semibold text-stone-700 mb-3\">\r\n                  Eigenes Wasserprofil\r\n                </h3>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  {Object.keys(initialCustomWaterProfile).map((key) => (\r\n                    <div key={key}>\r\n                      <label className=\"block text-xs font-medium text-stone-600 mb-1\" htmlFor={key}>\r\n                        {key.toUpperCase()}\r\n                      </label>\r\n                      <input\r\n                        type=\"number\"\r\n                        name={key}\r\n                        value={customWaterProfile[key]}\r\n                        onChange={(e) =>\r\n                          setCustomWaterProfile((prev) => ({\r\n                            ...prev,\r\n                            [key]: parseFloat(e.target.value) || 0,\r\n                          }))\r\n                        }\r\n                        className=\"w-full px-3 py-2 bg-white border border-stone-300 rounded-md text-stone-900 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors\"\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                        aria-label={key.toUpperCase()}\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex flex-wrap gap-3 pt-4 border-t border-stone-200\">\r\n              <Button\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                onClick={autoOptimize}\r\n              >\r\n                Empfohlene Dosierung laden\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={handleExport}\r\n              >\r\n                Daten exportieren\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => document.getElementById('importFile')?.click()}\r\n              >\r\n                Daten importieren\r\n              </Button>\r\n              <Button\r\n                variant=\"danger\"\r\n                size=\"sm\"\r\n                onClick={clearAllData}\r\n              >\r\n                Alle Daten löschen\r\n              </Button>\r\n            </div>\r\n\r\n            <input\r\n              id=\"importFile\"\r\n              type=\"file\"\r\n              accept=\".json\"\r\n              onChange={handleImport}\r\n              className=\"hidden\"\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n        {/* Water Input and Mixed Water Results */}\r\n        <div className=\"space-y-6\">\r\n          <WaterInput />\r\n\r\n          {mixedWater && (\r\n            <Card variant=\"elevated\">\r\n              <CardHeader>\r\n                <CardTitle>Gemischtes Wasser Ergebnis</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\r\n                  <div className=\"text-center p-3 bg-emerald-50 rounded-lg\">\r\n                    <div className=\"text-2xl font-bold text-emerald-700\">\r\n                      {mixedWater.ph?.toFixed(2) ?? 'N/A'}\r\n                    </div>\r\n                    <div className=\"text-sm text-stone-600\">pH</div>\r\n                  </div>\r\n                  <div className=\"text-center p-3 bg-blue-50 rounded-lg\">\r\n                    <div className=\"text-2xl font-bold text-blue-700\">\r\n                      {mixedWater.ec?.toFixed(2) ?? 'N/A'}\r\n                    </div>\r\n                    <div className=\"text-sm text-stone-600\">EC (mS/cm)</div>\r\n                  </div>\r\n                  <div className=\"text-center p-3 bg-orange-50 rounded-lg\">\r\n                    <div className=\"text-2xl font-bold text-orange-700\">\r\n                      {mixedWater.totalVolume?.toFixed(1) ?? 'N/A'}\r\n                    </div>\r\n                    <div className=\"text-sm text-stone-600\">Volumen (L)</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-4 grid grid-cols-3 gap-3 text-sm\">\r\n                  <div>Ca: <span className=\"font-medium\">{mixedWater.ca?.toFixed(1) ?? 'N/A'} mg/L</span></div>\r\n                  <div>Mg: <span className=\"font-medium\">{mixedWater.mg?.toFixed(1) ?? 'N/A'} mg/L</span></div>\r\n                  <div>Na: <span className=\"font-medium\">{mixedWater.na?.toFixed(1) ?? 'N/A'} mg/L</span></div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n          {/* Fertilizer Manager */}\r\n          <Card variant=\"elevated\">\r\n            <CardHeader>\r\n              <CardTitle>Dünger & Dosierung</CardTitle>\r\n            </CardHeader>\r\n            <CardContent padding=\"none\">\r\n              <FertilizerManager\r\n                selectedFertilizers={selectedFertilizers}\r\n                fertilizerDatabase={fertilizerDatabase}\r\n                waterVolume={waterVolume}\r\n                addFertilizer={addFertilizer}\r\n                removeFertilizer={removeFertilizer}\r\n                updateFertilizerAmount={updateFertilizerAmount}\r\n                toggleFertilizer={toggleFertilizer}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results Section */}\r\n      {results && results.nutrients && (\r\n        <Card variant=\"elevated\">\r\n          <CardHeader>\r\n            <CardTitle>Berechnete Hauptwerte</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\r\n              {mainNutrients.map((nutrient) => (\r\n                <div\r\n                  key={nutrient.key}\r\n                  className=\"text-center p-4 bg-gradient-to-br from-stone-50 to-stone-100 rounded-lg border border-stone-200\"\r\n                >\r\n                  <div className=\"text-xs font-medium text-stone-600 mb-1\">{nutrient.label}</div>\r\n                  <div className=\"text-2xl font-bold text-emerald-700\">\r\n                    {results?.nutrients?.[nutrient.key] !== undefined &&\r\n                    results.nutrients?.[nutrient.key] !== null &&\r\n                    !isNaN(results.nutrients?.[nutrient.key])\r\n                      ? results.nutrients[nutrient.key].toFixed(2)\r\n                      : '0.00'}\r\n                  </div>\r\n                  <div className=\"text-xs text-stone-500\">{nutrient.unit}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SetupTab;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS } from '../constants';\r\nimport { useToasts } from '../contexts/ToastContext';\r\nimport Button from './Button';\r\n\r\ninterface FertilizerComposition {\r\n  n: string;\r\n  p: string;\r\n  k: string;\r\n}\r\n\r\ninterface FertilizerForm {\r\n  name: string;\r\n  type: 'liquid' | 'powder';\r\n  unit: 'ml' | 'g' | '%';\r\n  composition: FertilizerComposition;\r\n  concentration: string;\r\n  description: string;\r\n}\r\n\r\ninterface CustomFertilizer extends FertilizerForm {\r\n  id: string;\r\n  composition: {\r\n    n: string;\r\n    p: string;\r\n    k: string;\r\n  };\r\n}\r\n\r\ninterface FertilizerTabProps {\r\n  refreshFertilizerDatabase?: () => void;\r\n}\r\n\r\nconst defaultFertilizer: FertilizerForm = {\r\n  name: '',\r\n  type: 'liquid',\r\n  unit: 'ml',\r\n  composition: { n: '', p: '', k: '' },\r\n  concentration: '',\r\n  description: '',\r\n};\r\n\r\nconst generateCustomFertilizerId = (name: string): string =>\r\n  `custom_${name.replace(/\\s+/g, '_').toLowerCase()}_${Date.now()}`;\r\n\r\nconst FertilizerTab: React.FC<FertilizerTabProps> = ({ refreshFertilizerDatabase }) => {\r\n  const [fertilizers, setFertilizers] = useState<CustomFertilizer[]>([]);\r\n  const [form, setForm] = useState<FertilizerForm>(defaultFertilizer);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const { addToast } = useToasts();\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS);\r\n    if (stored) setFertilizers(JSON.parse(stored));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS, JSON.stringify(fertilizers));\r\n    if (refreshFertilizerDatabase) refreshFertilizerDatabase();\r\n  }, [fertilizers, refreshFertilizerDatabase]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    if (['n', 'p', 'k'].includes(name)) {\r\n      setForm({ ...form, composition: { ...form.composition, [name]: value } });\r\n    } else {\r\n      setForm({ ...form, [name]: value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const normalizedForm = {\r\n      ...form,\r\n      composition: Object.fromEntries(\r\n        Object.entries(form.composition).map(([k, v]) => [k.toLowerCase(), v])\r\n      ),\r\n    };\r\n    if (editingId !== null) {\r\n      setFertilizers(\r\n        fertilizers.map((f) =>\r\n          f.id === editingId ? ({ ...normalizedForm, id: editingId } as CustomFertilizer) : f\r\n        )\r\n      );\r\n      setEditingId(null);\r\n      addToast('Dünger erfolgreich bearbeitet!', 'success');\r\n    } else {\r\n      const id = generateCustomFertilizerId(form.name);\r\n      setFertilizers([...fertilizers, { ...normalizedForm, id } as CustomFertilizer]);\r\n      addToast('Dünger hinzugefügt!', 'success');\r\n    }\r\n    setForm(defaultFertilizer);\r\n  };\r\n\r\n  const handleEdit = (id: string) => {\r\n    const fert = fertilizers.find((f) => f.id === id);\r\n    if (fert) {\r\n      setForm({\r\n        name: fert.name,\r\n        type: fert.type,\r\n        unit: fert.unit,\r\n        composition: {\r\n          n: fert.composition.n || '',\r\n          p: fert.composition.p || '',\r\n          k: fert.composition.k || '',\r\n        },\r\n        concentration: fert.concentration || '',\r\n        description: fert.description || '',\r\n      });\r\n      setEditingId(id);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    setFertilizers(fertilizers.filter((f) => f.id !== id));\r\n    if (editingId === id) {\r\n      setForm(defaultFertilizer);\r\n      setEditingId(null);\r\n    }\r\n    addToast('Dünger gelöscht!', 'info');\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2\">\r\n        Dünger verwalten\r\n      </h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            name=\"name\"\r\n            value={form.name}\r\n            onChange={handleChange}\r\n            placeholder=\"Name\"\r\n            className=\"flex-1 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n            required\r\n          />\r\n          <select\r\n            name=\"type\"\r\n            value={form.type}\r\n            onChange={handleChange}\r\n            className=\"px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n          >\r\n            <option value=\"liquid\">Flüssig</option>\r\n            <option value=\"powder\">Pulver</option>\r\n          </select>\r\n          <select\r\n            name=\"unit\"\r\n            value={form.unit}\r\n            onChange={handleChange}\r\n            className=\"px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n          >\r\n            <option value=\"ml\">ml</option>\r\n            <option value=\"g\">g</option>\r\n            <option value=\"%\">%</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            name=\"n\"\r\n            value={form.composition.n}\r\n            onChange={handleChange}\r\n            placeholder=\"N (%)\"\r\n            type=\"number\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            className=\"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n            required\r\n          />\r\n          <input\r\n            name=\"p\"\r\n            value={form.composition.p}\r\n            onChange={handleChange}\r\n            placeholder=\"P (%)\"\r\n            type=\"number\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            className=\"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n            required\r\n          />\r\n          <input\r\n            name=\"k\"\r\n            value={form.composition.k}\r\n            onChange={handleChange}\r\n            placeholder=\"K (%)\"\r\n            type=\"number\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            className=\"w-1/3 px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n            required\r\n          />\r\n        </div>\r\n        <input\r\n          name=\"concentration\"\r\n          value={form.concentration}\r\n          onChange={handleChange}\r\n          placeholder=\"Konzentration (g/L oder %)\"\r\n          type=\"number\"\r\n          min=\"0\"\r\n          step=\"0.01\"\r\n          className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"description\"\r\n          value={form.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Beschreibung (optional)\"\r\n          className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"primary\"\r\n          aria-label={editingId !== null ? 'Dünger speichern' : 'Dünger hinzufügen'}\r\n          title={editingId !== null ? 'Dünger speichern' : 'Dünger hinzufügen'}\r\n        >\r\n          {editingId !== null ? 'Speichern' : 'Hinzufügen'}\r\n        </Button>\r\n        {editingId !== null && (\r\n          <Button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setForm(defaultFertilizer);\r\n              setEditingId(null);\r\n            }}\r\n            variant=\"secondary\"\r\n            className=\"ml-2\"\r\n            aria-label=\"Bearbeitung abbrechen\"\r\n            title=\"Bearbeitung abbrechen\"\r\n          >\r\n            Abbrechen\r\n          </Button>\r\n        )}\r\n      </form>\r\n      <div>\r\n        <h3 className=\"font-semibold mb-2\">Eigene Dünger</h3>\r\n        <ul className=\"space-y-2\">\r\n          {fertilizers.length === 0 && (\r\n            <li className=\"text-slate-500\">Noch keine Dünger hinzugefügt.</li>\r\n          )}\r\n          {fertilizers.map((fert) => (\r\n            <li\r\n              key={fert.id}\r\n              className=\"flex items-center gap-2 p-2 bg-slate-100 dark:bg-slate-700 rounded\"\r\n            >\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-medium\">\r\n                  {fert.name} <span className=\"text-xs text-slate-500\">({fert.type})</span>\r\n                </div>\r\n                <div className=\"text-xs\">\r\n                  N: {fert.composition.n}% , P: {fert.composition.p}% , K: {fert.composition.k}% |\r\n                  Konzentration: {fert.concentration}\r\n                </div>\r\n              </div>\r\n              <Button\r\n                onClick={() => handleEdit(fert.id)}\r\n                variant=\"secondary\"\r\n                aria-label={`Dünger ${fert.name} bearbeiten`}\r\n                title={`Dünger ${fert.name} bearbeiten`}\r\n                className=\"text-xs\"\r\n              >\r\n                Bearbeiten\r\n              </Button>\r\n              <Button\r\n                onClick={() => handleDelete(fert.id)}\r\n                variant=\"danger\"\r\n                aria-label={`Dünger ${fert.name} löschen`}\r\n                title={`Dünger ${fert.name} löschen`}\r\n                className=\"text-xs\"\r\n              >\r\n                Löschen\r\n              </Button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FertilizerTab;\r\n","// Helper function to get nutrient status\r\nexport const getNutrientStatus = (\r\n  value: number,\r\n  range: [number, number]\r\n): 'optimal' | 'suboptimal' | 'unknown' => {\r\n  if (!range || !Array.isArray(range) || range.length !== 2) return 'unknown';\r\n  if (value >= range[0] && value <= range[1]) return 'optimal';\r\n  return 'suboptimal';\r\n};\r\n\r\n// Helper function to get status color\r\nexport const getStatusColor = (status: string): string => {\r\n  switch (status) {\r\n    case 'optimal':\r\n      return 'bg-green-100 dark:bg-green-800/30 text-green-800 dark:text-green-200';\r\n    case 'suboptimal':\r\n      return 'bg-yellow-100 dark:bg-yellow-800/30 text-yellow-800 dark:text-yellow-200';\r\n    default:\r\n      return 'bg-slate-100 dark:bg-slate-800/30 text-slate-800 dark:text-slate-200';\r\n  }\r\n};\r\n\r\n// Helper function to get progress bar width\r\nexport const getProgressBarWidth = (value: number, range: [number, number]): number => {\r\n  if (!range || !Array.isArray(range) || range.length !== 2 || range[1] === 0) return 0;\r\n  const maxTarget = range[1] * 1.2;\r\n  return Math.min((value / maxTarget) * 100, 100);\r\n};\r\n\r\ninterface Fertilizer {\r\n  id: string;\r\n  active: boolean;\r\n  amount: string | number;\r\n}\r\n\r\ninterface FertilizerData {\r\n  composition: Record<string, number>;\r\n}\r\n\r\ninterface FertilizerDatabase {\r\n  [key: string]: FertilizerData;\r\n}\r\n\r\ninterface NutrientContributions {\r\n  contributions: Record<string, Record<string, number>>;\r\n  nutrients: Record<string, number>;\r\n}\r\n\r\n// Helper function to calculate nutrient contributions\r\nexport const calculateNutrientContributions = (\r\n  fertilizers: Fertilizer[],\r\n  waterVolume: number,\r\n  fertilizerDatabase: FertilizerDatabase\r\n): NutrientContributions => {\r\n  const contributions: Record<string, Record<string, number>> = {};\r\n  const nutrients: Record<string, number> = {};\r\n\r\n  fertilizers.forEach((fert) => {\r\n    if (!fert.active || Number(fert.amount) <= 0) return;\r\n\r\n    const fertData = fertilizerDatabase[fert.id];\r\n    if (!fertData) return;\r\n\r\n    contributions[fert.id] = {};\r\n    Object.entries(fertData.composition).forEach(([key, value]) => {\r\n      const contribution = (Number(value) * Number(fert.amount)) / waterVolume;\r\n      contributions[fert.id][key] = contribution;\r\n      nutrients[key] = (nutrients[key] || 0) + contribution;\r\n    });\r\n  });\r\n\r\n  return { contributions, nutrients };\r\n};\r\n\r\n// Helper function to get recommended fertilizers\r\nexport const getRecommendedFertilizers = (growthStage: string): string[] => {\r\n  if (growthStage.includes('veg')) return ['hesi_tnt', 'ta_calmg'];\r\n  if (growthStage.includes('flower')) return ['hesi_bloom'];\r\n  return ['hesi_tnt', 'ta_calmg'];\r\n};\r\n\r\n// Helper function to optimize nutrients\r\nexport const optimizeNutrients = (\r\n  growthStage: string,\r\n  fertilizerDatabase: FertilizerDatabase,\r\n  updateFertilizerAmount: (id: string, amount: string) => void\r\n): void => {\r\n  if (growthStage.includes('veg')) {\r\n    if (fertilizerDatabase['hesi_tnt']) updateFertilizerAmount('hesi_tnt', '5.0');\r\n    if (fertilizerDatabase['ta_calmg']) updateFertilizerAmount('ta_calmg', '2.5');\r\n  } else if (growthStage.includes('flower')) {\r\n    if (fertilizerDatabase['hesi_bloom']) updateFertilizerAmount('hesi_bloom', '6.0');\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { getNutrientStatus, getStatusColor } from '../utils/nutrientUtils';\r\n\r\ninterface NutrientField {\r\n  key: string;\r\n  label: string;\r\n}\r\n\r\ninterface GrowthStage {\r\n  name: string;\r\n  [key: string]: string | number | { min: number; max: number };\r\n}\r\n\r\ninterface WaterType {\r\n  name: string;\r\n}\r\n\r\ninterface FertilizerDatabase {\r\n  [key: string]: Record<string, unknown>;\r\n}\r\n\r\ninterface SelectedFertilizer {\r\n  [key: string]: string | number | boolean;\r\n}\r\n\r\ninterface CustomWaterProfile {\r\n  [key: string]: number;\r\n}\r\n\r\ninterface Results {\r\n  nutrients?: {\r\n    [key: string]: number;\r\n  };\r\n}\r\n\r\ninterface AnalysisTabProps {\r\n  NUTRIENT_FIELDS: NutrientField[];\r\n  GROWTH_STAGES: { [key: string]: GrowthStage };\r\n  WATER_TYPES: { [key: string]: WaterType };\r\n  fertilizerDatabase: FertilizerDatabase;\r\n  selectedFertilizers: SelectedFertilizer[];\r\n  waterVolume: number;\r\n  growthStage: string;\r\n  waterType: string;\r\n  customWaterProfile: CustomWaterProfile;\r\n  results: Results;\r\n}\r\n\r\nconst AnalysisTab: React.FC<AnalysisTabProps> = ({\r\n  NUTRIENT_FIELDS,\r\n  GROWTH_STAGES,\r\n  _WATER_TYPES,\r\n  _fertilizerDatabase,\r\n  _selectedFertilizers,\r\n  _waterVolume,\r\n  growthStage,\r\n  _waterType,\r\n  _customWaterProfile,\r\n  results,\r\n}) => {\r\n  // Determine optimal ranges for the current growth stage\r\n  const stage = GROWTH_STAGES[growthStage] || {};\r\n\r\n  // Warnings for suboptimal nutrients\r\n  const warnings = NUTRIENT_FIELDS.filter((field) => {\r\n    const value = results.nutrients?.[field.key];\r\n    const range = stage[field.key];\r\n    return value !== undefined && range && (value < range[0] || value > range[1]);\r\n  });\r\n\r\n  // Optimization tips (simple version)\r\n  const tips: string[] = [];\r\n  if (warnings.length > 0) {\r\n    tips.push(\r\n      'Passe die Dosierung deiner Dünger an, um die Nährstoffe in den optimalen Bereich zu bringen.'\r\n    );\r\n  } else {\r\n    tips.push('Alle Hauptnährstoffe sind im optimalen Bereich!');\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2\">\r\n        Nährstoff-Analyse\r\n      </h2>\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"min-w-full text-xs\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"px-2 py-1 text-left\">Nährstoff</th>\r\n              <th className=\"px-2 py-1 text-left\">Wert</th>\r\n              <th className=\"px-2 py-1 text-left\">Optimalbereich</th>\r\n              <th className=\"px-2 py-1 text-left\">Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {NUTRIENT_FIELDS.map((field) => {\r\n              const value = results.nutrients?.[field.key];\r\n              const range = stage[field.key];\r\n              const status = getNutrientStatus(value, range);\r\n              return (\r\n                <tr key={field.key} className={getStatusColor(status)}>\r\n                  <td className=\"px-2 py-1 font-medium\">{field.label}</td>\r\n                  <td className=\"px-2 py-1\">{value !== undefined ? value : '-'}</td>\r\n                  <td className=\"px-2 py-1\">{range ? `${range[0]} - ${range[1]}` : '-'}</td>\r\n                  <td className=\"px-2 py-1\">\r\n                    {status === 'optimal'\r\n                      ? 'Optimal'\r\n                      : status === 'suboptimal'\r\n                        ? 'Achtung'\r\n                        : 'Unbekannt'}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div className=\"mt-4\">\r\n        <h3 className=\"font-semibold mb-1\">Warnungen</h3>\r\n        {warnings.length === 0 ? (\r\n          <div className=\"text-green-700 dark:text-green-300\">\r\n            Keine Warnungen. Alle Werte sind im optimalen Bereich.\r\n          </div>\r\n        ) : (\r\n          <ul className=\"list-disc pl-5 text-yellow-700 dark:text-yellow-300\">\r\n            {warnings.map((field) => (\r\n              <li key={field.key}>{field.label}: Wert außerhalb des Optimalbereichs!</li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n      <div className=\"mt-4\">\r\n        <h3 className=\"font-semibold mb-1\">Optimierungstipps</h3>\r\n        <ul className=\"list-disc pl-5 text-blue-700 dark:text-blue-300\">\r\n          {tips.map((tip, idx) => (\r\n            <li key={idx}>{tip}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnalysisTab;\r\n","import React from 'react';\r\n\r\ninterface NutrientInfo {\r\n  key: string;\r\n  label: string;\r\n  optimal: [number, number];\r\n}\r\n\r\ninterface Results {\r\n  nutrients?: {\r\n    [key: string]: number;\r\n  };\r\n}\r\n\r\ninterface DetailsTabProps {\r\n  results: Results;\r\n}\r\n\r\nconst micronutrients: NutrientInfo[] = [\r\n  { key: 'fe', label: 'Eisen (Fe)', optimal: [0.5, 2.5] },\r\n  { key: 'mn', label: 'Mangan (Mn)', optimal: [0.2, 1.0] },\r\n  { key: 'zn', label: 'Zink (Zn)', optimal: [0.05, 0.2] },\r\n  { key: 'cu', label: 'Kupfer (Cu)', optimal: [0.01, 0.05] },\r\n  { key: 'b', label: 'Bor (B)', optimal: [0.02, 0.1] },\r\n  { key: 'mo', label: 'Molybdän (Mo)', optimal: [0.005, 0.02] },\r\n];\r\n\r\nconst secondaryNutrients: NutrientInfo[] = [{ key: 's', label: 'Schwefel (S)', optimal: [30, 70] }];\r\n\r\ntype NutrientStatus = 'low' | 'high' | 'optimal' | 'moderate' | 'neutral';\r\n\r\nfunction getNutrientStatus(value: number, range: [number, number] | undefined): NutrientStatus {\r\n  if (!range || !Array.isArray(range) || range.length !== 2) return 'neutral';\r\n  const [min, max] = range;\r\n  if (value < min * 0.8) return 'low';\r\n  if (value > max * 1.2) return 'high';\r\n  if (value >= min && value <= max) return 'optimal';\r\n  return 'moderate';\r\n}\r\n\r\nfunction getStatusColor(status: NutrientStatus): string {\r\n  switch (status) {\r\n    case 'low':\r\n      return 'text-blue-700 bg-blue-100 dark:text-blue-300 dark:bg-blue-700/30 border border-blue-200 dark:border-blue-600';\r\n    case 'high':\r\n      return 'text-red-700 bg-red-100 dark:text-red-300 dark:bg-red-700/30 border border-red-200 dark:border-red-600';\r\n    case 'optimal':\r\n      return 'text-green-700 bg-green-100 dark:text-green-300 dark:bg-green-700/30 border border-green-200 dark:border-green-600';\r\n    case 'moderate':\r\n      return 'text-yellow-700 bg-yellow-100 dark:text-yellow-300 dark:bg-yellow-600/30 border border-yellow-200 dark:border-yellow-500';\r\n    default:\r\n      return 'text-slate-600 bg-slate-100 dark:text-slate-400 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600';\r\n  }\r\n}\r\n\r\nconst DetailsTab: React.FC<DetailsTabProps> = ({ results }) => (\r\n  <div className=\"grid lg:grid-cols-2 gap-4\">\r\n    <div className=\"space-y-3\">\r\n      <h2 className=\"text-md font-semibold text-slate-700 dark:text-slate-200\">\r\n        Mikronährstoffe (ppm)\r\n      </h2>\r\n      <div className=\"space-y-1.5 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700\">\r\n        {micronutrients.map((micro) => {\r\n          const value = results?.nutrients?.[micro.key] ?? 0;\r\n          const status = getNutrientStatus(value, micro.optimal);\r\n          return (\r\n            <div\r\n              key={micro.key}\r\n              className={`flex justify-between items-center p-1.5 rounded-md text-xs ${getStatusColor(status)}`}\r\n            >\r\n              <span>{micro.label}:</span>\r\n              <div className=\"text-right\">\r\n                <span className=\"font-medium\">{value.toFixed(3)} ppm</span>\r\n                <div className=\"text-[0.65rem] opacity-70\">\r\n                  ({micro.optimal[0]}-{micro.optimal[1]})\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n    <div className=\"space-y-3\">\r\n      <h2 className=\"text-md font-semibold text-slate-700 dark:text-slate-200\">\r\n        Weitere Makro-/Sekundärnährstoffe (ppm)\r\n      </h2>\r\n      <div className=\"space-y-1.5 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700\">\r\n        {secondaryNutrients.map((sec) => {\r\n          const value = results?.nutrients?.[sec.key] ?? 0;\r\n          const status = getNutrientStatus(value, sec.optimal);\r\n          return (\r\n            <div\r\n              key={sec.key}\r\n              className={`flex justify-between items-center p-1.5 rounded-md text-xs ${getStatusColor(status)}`}\r\n            >\r\n              <span>{sec.label}:</span>\r\n              <div className=\"text-right\">\r\n                <span className=\"font-medium\">{value.toFixed(1)} ppm</span>\r\n                <div className=\"text-[0.65rem] opacity-70\">\r\n                  ({sec.optimal[0]}-{sec.optimal[1]})\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"bg-yellow-100 dark:bg-yellow-700/30 p-3 rounded-lg border border-yellow-300 dark:border-yellow-600 mt-3\">\r\n        <h3 className=\"font-medium text-yellow-800 dark:text-yellow-200 mb-1.5 text-sm\">\r\n          Nährstoff-Hinweise\r\n        </h3>\r\n        <ul className=\"text-xs text-yellow-700 dark:text-yellow-300 space-y-1 list-disc list-inside\">\r\n          <li>Weniger ist oft mehr, besonders bei Mikronährstoffen.</li>\r\n          <li>Bei Mangelerscheinungen zuerst pH-Wert und Wurzelgesundheit prüfen.</li>\r\n          <li>Fe-Mangel: junge Blätter hellgrün/gelb, Adern bleiben grün.</li>\r\n          <li>Ca-Mangel: junge Blätter verformt, Blütenendfäule.</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default DetailsTab;\r\n","import React from 'react';\r\n\r\nconst ReferencesTab = () => {\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4\">\r\n        Referenzen & Hilfe\r\n      </h2>\r\n\r\n      <section>\r\n        <h3 className=\"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2\">\r\n          Wichtige Links & Studien\r\n        </h3>\r\n        <ul className=\"list-disc list-inside space-y-1 text-slate-600 dark:text-slate-300\">\r\n          <li>\r\n            <a href=\"#\" className=\"text-blue-600 hover:underline\">\r\n              Link zu Nährstoffbedarf von Pflanzen (Beispielstudie)\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a href=\"#\" className=\"text-blue-600 hover:underline\">\r\n              Artikel über Wasserqualität und EC-Werte\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a href=\"#\" className=\"text-blue-600 hover:underline\">\r\n              Ressourcen zur Düngerzusammensetzung\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </section>\r\n\r\n      <section>\r\n        <h3 className=\"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2\">\r\n          Erklärungen zu Nährstoffen\r\n        </h3>\r\n        <div className=\"space-y-4 text-slate-600 dark:text-slate-300\">\r\n          <p>\r\n            <strong>Stickstoff (N):</strong> Essentiell für das vegetative Wachstum,\r\n            Blattentwicklung und Photosynthese. Mangel zeigt sich oft in blassen, gelben Blättern.\r\n          </p>\r\n          <p>\r\n            <strong>Phosphor (P):</strong> Wichtig für Blüten- und Fruchtentwicklung, Wurzelwachstum\r\n            und Energieübertragung. Ein Mangel kann zu verkümmertem Wachstum und dunklen Blättern\r\n            führen.\r\n          </p>\r\n          <p>\r\n            <strong>Kalium (K):</strong> Fördert die allgemeine Pflanzengesundheit, Wasseraufnahme\r\n            und den Transport von Nährstoffen. Mangel kann zu gelben oder braunen Blatträndern\r\n            führen.\r\n          </p>\r\n          {/* Add more nutrient explanations as needed */}\r\n        </div>\r\n      </section>\r\n\r\n      <section>\r\n        <h3 className=\"text-md font-semibold text-slate-700 dark:text-slate-200 mb-2\">\r\n          Häufig gestellte Fragen (FAQ)\r\n        </h3>\r\n        <div className=\"space-y-3 text-slate-600 dark:text-slate-300\">\r\n          <div>\r\n            <h4 className=\"font-semibold\">Q: Wie berechne ich die richtige Düngermenge?</h4>\r\n            <p>\r\n              A: Die App verwendet Ihre Eingaben zu Wasservolumen, Wachstumsphase und Wassertyp, um\r\n              die optimale Düngermenge zu berechnen. Passen Sie die Mengen für jeden Dünger an, um\r\n              die gewünschten Nährstoffwerte zu erreichen.\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <h4 className=\"font-semibold\">Q: Was bedeutet EC-Wert?</h4>\r\n            <p>\r\n              A: Der EC-Wert (elektrische Leitfähigkeit) misst die Gesamtkonzentration der gelösten\r\n              Salze (Nährstoffe) im Wasser. Ein optimaler EC-Wert ist entscheidend für die\r\n              Nährstoffaufnahme der Pflanzen.\r\n            </p>\r\n          </div>\r\n          {/* Add more FAQs as needed */}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReferencesTab;\r\n","// Simple obfuscation utility for client-side API key storage\r\n// Note: This is not true encryption, just basic obfuscation to prevent casual inspection\r\n\r\nconst STORAGE_KEY = 'nutricalc_secure_data';\r\nconst OBFUSCATION_KEY = 'NutriCalc2024SecureKey';\r\n\r\n/**\r\n * Simple XOR-based obfuscation\r\n */\r\nfunction obfuscate(text: string, key: string): string {\r\n  let result = '';\r\n  for (let i = 0; i < text.length; i++) {\r\n    const textChar = text.charCodeAt(i);\r\n    const keyChar = key.charCodeAt(i % key.length);\r\n    result += String.fromCharCode(textChar ^ keyChar);\r\n  }\r\n  return btoa(result); // Base64 encode\r\n}\r\n\r\n/**\r\n * Reverse the obfuscation\r\n */\r\nfunction deobfuscate(obfuscatedText: string, key: string): string {\r\n  try {\r\n    const decoded = atob(obfuscatedText); // Base64 decode\r\n    let result = '';\r\n    for (let i = 0; i < decoded.length; i++) {\r\n      const textChar = decoded.charCodeAt(i);\r\n      const keyChar = key.charCodeAt(i % key.length);\r\n      result += String.fromCharCode(textChar ^ keyChar);\r\n    }\r\n    return result;\r\n  } catch {\r\n    // Silently handle deobfuscation errors\r\n    return '';\r\n  }\r\n}\r\n\r\n/**\r\n * Securely store API key with obfuscation\r\n */\r\nexport function storeApiKey(apiKey: string): void {\r\n  try {\r\n    const obfuscated = obfuscate(apiKey, OBFUSCATION_KEY);\r\n    const data = {\r\n      key: obfuscated,\r\n      timestamp: Date.now(),\r\n      version: '1.0'\r\n    };\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\r\n  } catch {\r\n    // Fallback to regular storage if obfuscation fails\r\n    localStorage.setItem('nutricalc_gemini_api_key', apiKey);\r\n  }\r\n}\r\n\r\n/**\r\n * Retrieve and deobfuscate API key\r\n */\r\nexport function retrieveApiKey(): string {\r\n  try {\r\n    const storedData = localStorage.getItem(STORAGE_KEY);\r\n    if (storedData) {\r\n      const data = JSON.parse(storedData);\r\n      if (data.key && data.version) {\r\n        return deobfuscate(data.key, OBFUSCATION_KEY);\r\n      }\r\n    }\r\n    \r\n    // Fallback: check for old unencrypted key\r\n    const oldKey = localStorage.getItem('nutricalc_gemini_api_key');\r\n    if (oldKey) {\r\n      // Migrate to secure storage\r\n      storeApiKey(oldKey);\r\n      localStorage.removeItem('nutricalc_gemini_api_key');\r\n      return oldKey;\r\n    }\r\n    \r\n    return '';\r\n  } catch {\r\n    // Silently handle retrieval errors\r\n    return '';\r\n  }\r\n}\r\n\r\n/**\r\n * Remove stored API key\r\n */\r\nexport function removeApiKey(): void {\r\n  try {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    localStorage.removeItem('nutricalc_gemini_api_key'); // Remove old key too\r\n  } catch {\r\n    // Silently handle removal errors\r\n  }\r\n}\r\n\r\n/**\r\n * Check if API key is stored\r\n */\r\nexport function hasStoredApiKey(): boolean {\r\n  const secureData = localStorage.getItem(STORAGE_KEY);\r\n  const oldData = localStorage.getItem('nutricalc_gemini_api_key');\r\n  return !!(secureData || oldData);\r\n}\r\n\r\n/**\r\n * Validate API key format (basic validation)\r\n */\r\nexport function validateApiKey(apiKey: string): boolean {\r\n  if (!apiKey || typeof apiKey !== 'string') {\r\n    return false;\r\n  }\r\n  \r\n  // Basic Google API key format validation\r\n  const googleApiKeyPattern = /^AIza[0-9A-Za-z-_]{35}$/;\r\n  return googleApiKeyPattern.test(apiKey);\r\n}\r\n\r\n/**\r\n * Sanitize API key for logging (show only first/last few characters)\r\n */\r\nexport function sanitizeApiKeyForLogging(apiKey: string): string {\r\n  if (!apiKey || apiKey.length < 8) {\r\n    return '[INVALID_KEY]';\r\n  }\r\n  \r\n  const start = apiKey.substring(0, 4);\r\n  const end = apiKey.substring(apiKey.length - 4);\r\n  const middle = '*'.repeat(Math.max(0, apiKey.length - 8));\r\n  \r\n  return `${start}${middle}${end}`;\r\n}","import { useState, useEffect } from 'react';\r\nimport {\r\n  storeApiKey,\r\n  retrieveApiKey,\r\n  removeApiKey as removeStoredApiKey,\r\n  validateApiKey\r\n} from '../utils/secureStorage';\r\n\r\nexport const useApiKey = () => {\r\n  const [apiKey, setApiKey] = useState<string>('');\r\n  const [isValid, setIsValid] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    const storedKey = retrieveApiKey();\r\n    if (storedKey) {\r\n      setApiKey(storedKey);\r\n      setIsValid(validateApiKey(storedKey));\r\n    }\r\n  }, []);\r\n\r\n  const updateApiKey = (newKey: string) => {\r\n    const trimmedKey = newKey.trim();\r\n    const valid = validateApiKey(trimmedKey);\r\n    \r\n    setApiKey(trimmedKey);\r\n    setIsValid(valid);\r\n    \r\n    if (trimmedKey) {\r\n      storeApiKey(trimmedKey);\r\n    } else {\r\n      removeStoredApiKey();\r\n    }\r\n  };\r\n\r\n  const removeApiKey = () => {\r\n    setApiKey('');\r\n    setIsValid(false);\r\n    removeStoredApiKey();\r\n  };\r\n\r\n  return {\r\n    apiKey,\r\n    isValid,\r\n    updateApiKey,\r\n    removeApiKey,\r\n  };\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { cn } from '../../utils/cn';\r\nimport { Card, CardHeader, CardTitle, CardContent } from '../Card';\r\nimport Button from '../Button';\r\nimport { useToasts } from '../../contexts/ToastContext';\r\n\r\ninterface AISettingsProps {\r\n  language: 'de' | 'en';\r\n  onSettingsChange?: (settings: AISettingsConfig) => void;\r\n  className?: string;\r\n}\r\n\r\ninterface AISettingsConfig {\r\n  apiKey: string;\r\n  provider: 'gemini' | 'openai' | 'claude';\r\n  enableProactiveAlerts: boolean;\r\n  enableFloatingWidget: boolean;\r\n  conversationHistory: boolean;\r\n  dataPrivacy: boolean;\r\n}\r\n\r\nconst AISettings: React.FC<AISettingsProps> = ({\r\n  language,\r\n  onSettingsChange,\r\n  className\r\n}) => {\r\n  const [settings, setSettings] = useState<AISettingsConfig>({\r\n    apiKey: '',\r\n    provider: 'gemini',\r\n    enableProactiveAlerts: true,\r\n    enableFloatingWidget: true,\r\n    conversationHistory: true,\r\n    dataPrivacy: true\r\n  });\r\n  \r\n  const [showApiKey, setShowApiKey] = useState(false);\r\n  const [isTestingConnection, setIsTestingConnection] = useState(false);\r\n  const [connectionStatus, setConnectionStatus] = useState<'idle' | 'success' | 'error'>('idle');\r\n  const { addToast } = useToasts();\r\n\r\n  // Load settings from localStorage on mount\r\n  useEffect(() => {\r\n    const savedSettings = localStorage.getItem('ai-assistant-settings');\r\n    if (savedSettings) {\r\n      try {\r\n        const parsed = JSON.parse(savedSettings);\r\n        setSettings(prev => ({ ...prev, ...parsed }));\r\n      } catch (error) {\r\n        console.warn('Failed to parse saved AI settings');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save settings to localStorage when they change\r\n  useEffect(() => {\r\n    localStorage.setItem('ai-assistant-settings', JSON.stringify(settings));\r\n    onSettingsChange?.(settings);\r\n  }, [settings, onSettingsChange]);\r\n\r\n  const handleSettingChange = (key: keyof AISettingsConfig, value: string | boolean) => {\r\n    setSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const testConnection = async () => {\r\n    if (!settings.apiKey.trim()) {\r\n      addToast(\r\n        language === 'de' ? 'Bitte geben Sie einen API-Schlüssel ein' : 'Please enter an API key',\r\n        'error'\r\n      );\r\n      return;\r\n    }\r\n\r\n    setIsTestingConnection(true);\r\n    setConnectionStatus('idle');\r\n\r\n    try {\r\n      // Test the API connection based on provider\r\n      let testResult = false;\r\n      \r\n      switch (settings.provider) {\r\n        case 'gemini':\r\n          testResult = await testGeminiConnection(settings.apiKey);\r\n          break;\r\n        case 'openai':\r\n          testResult = await testOpenAIConnection(settings.apiKey);\r\n          break;\r\n        case 'claude':\r\n          testResult = await testClaudeConnection(settings.apiKey);\r\n          break;\r\n      }\r\n\r\n      if (testResult) {\r\n        setConnectionStatus('success');\r\n        addToast(\r\n          language === 'de' ? 'Verbindung erfolgreich!' : 'Connection successful!',\r\n          'success'\r\n        );\r\n      } else {\r\n        setConnectionStatus('error');\r\n        addToast(\r\n          language === 'de' ? 'Verbindung fehlgeschlagen' : 'Connection failed',\r\n          'error'\r\n        );\r\n      }\r\n    } catch (error) {\r\n      setConnectionStatus('error');\r\n      addToast(\r\n        language === 'de' ? 'Verbindungstest fehlgeschlagen' : 'Connection test failed',\r\n        'error'\r\n      );\r\n    } finally {\r\n      setIsTestingConnection(false);\r\n    }\r\n  };\r\n\r\n  const testGeminiConnection = async (apiKey: string): Promise<boolean> => {\r\n    try {\r\n      // Import GoogleGenerativeAI from the service to avoid duplicate imports\r\n      const AIAssistantService = (await import('../../services/AIAssistantService')).default;\r\n      const service = new AIAssistantService(apiKey);\r\n\r\n      // Simple test by creating the service - if it doesn't throw, the key is valid format\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Gemini connection test failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const testOpenAIConnection = async (apiKey: string): Promise<boolean> => {\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/models', {\r\n        headers: {\r\n          'Authorization': `Bearer ${apiKey}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('OpenAI connection test failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const testClaudeConnection = async (apiKey: string): Promise<boolean> => {\r\n    try {\r\n      const response = await fetch('https://api.anthropic.com/v1/messages', {\r\n        method: 'POST',\r\n        headers: {\r\n          'x-api-key': apiKey,\r\n          'Content-Type': 'application/json',\r\n          'anthropic-version': '2023-06-01'\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'claude-3-sonnet-20240229',\r\n          max_tokens: 10,\r\n          messages: [{ role: 'user', content: 'Test' }]\r\n        })\r\n      });\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Claude connection test failed:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const clearAllData = () => {\r\n    if (window.confirm(language === 'de' ?\r\n      'Möchten Sie wirklich alle AI-Daten löschen? Dies kann nicht rückgängig gemacht werden.' :\r\n      'Are you sure you want to clear all AI data? This cannot be undone.'\r\n    )) {\r\n      localStorage.removeItem('ai-assistant-settings');\r\n      localStorage.removeItem('ai-conversation-history');\r\n      setSettings({\r\n        apiKey: '',\r\n        provider: 'gemini',\r\n        enableProactiveAlerts: true,\r\n        enableFloatingWidget: true,\r\n        conversationHistory: true,\r\n        dataPrivacy: true\r\n      });\r\n      addToast(\r\n        language === 'de' ? 'Alle AI-Daten wurden gelöscht' : 'All AI data has been cleared',\r\n        'success'\r\n      );\r\n    }\r\n  };\r\n\r\n  const providers = [\r\n    {\r\n      id: 'gemini' as const,\r\n      name: 'Google Gemini',\r\n      description: language === 'de' ? 'Googles fortschrittliches AI-Modell' : 'Google\\'s advanced AI model',\r\n      setupUrl: 'https://makersuite.google.com/app/apikey'\r\n    },\r\n    {\r\n      id: 'openai' as const,\r\n      name: 'OpenAI GPT-4',\r\n      description: language === 'de' ? 'OpenAIs leistungsstarkes Sprachmodell' : 'OpenAI\\'s powerful language model',\r\n      setupUrl: 'https://platform.openai.com/api-keys'\r\n    },\r\n    {\r\n      id: 'claude' as const,\r\n      name: 'Anthropic Claude',\r\n      description: language === 'de' ? 'Anthropics sicheres AI-System' : 'Anthropic\\'s safe AI system',\r\n      setupUrl: 'https://console.anthropic.com/'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={cn('space-y-6', className)}>\r\n      {/* API Configuration */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>\r\n            {language === 'de' ? 'AI-Provider Konfiguration' : 'AI Provider Configuration'}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Provider Selection */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-stone-700 mb-2\">\r\n              {language === 'de' ? 'AI-Provider auswählen' : 'Select AI Provider'}\r\n            </label>\r\n            <div className=\"grid grid-cols-1 gap-3\">\r\n              {providers.map(provider => (\r\n                <div\r\n                  key={provider.id}\r\n                  className={cn(\r\n                    'p-3 border-2 rounded-lg cursor-pointer transition-all',\r\n                    settings.provider === provider.id\r\n                      ? 'border-emerald-500 bg-emerald-50'\r\n                      : 'border-stone-200 hover:border-stone-300'\r\n                  )}\r\n                  onClick={() => handleSettingChange('provider', provider.id)}\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <h4 className=\"font-medium\">{provider.name}</h4>\r\n                      <p className=\"text-sm text-stone-600\">{provider.description}</p>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {settings.provider === provider.id && (\r\n                        <span className=\"text-emerald-600\">✓</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* API Key Input */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-stone-700 mb-2\">\r\n              {language === 'de' ? 'API-Schlüssel' : 'API Key'}\r\n            </label>\r\n            <div className=\"flex space-x-2\">\r\n              <div className=\"flex-1 relative\">\r\n                <input\r\n                  type={showApiKey ? 'text' : 'password'}\r\n                  value={settings.apiKey}\r\n                  onChange={(e) => handleSettingChange('apiKey', e.target.value)}\r\n                  placeholder={language === 'de' ? 'Geben Sie Ihren API-Schlüssel ein' : 'Enter your API key'}\r\n                  className=\"w-full px-3 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowApiKey(!showApiKey)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-stone-400 hover:text-stone-600\"\r\n                >\r\n                  {showApiKey ? '🙈' : '👁️'}\r\n                </button>\r\n              </div>\r\n              <Button\r\n                onClick={testConnection}\r\n                disabled={isTestingConnection || !settings.apiKey.trim()}\r\n                variant=\"outline\"\r\n                className={cn(\r\n                  connectionStatus === 'success' && 'border-green-500 text-green-700',\r\n                  connectionStatus === 'error' && 'border-red-500 text-red-700'\r\n                )}\r\n              >\r\n                {isTestingConnection ? '⏳' : connectionStatus === 'success' ? '✅' : connectionStatus === 'error' ? '❌' : '🔍'}\r\n                {language === 'de' ? 'Testen' : 'Test'}\r\n              </Button>\r\n            </div>\r\n            <p className=\"text-xs text-stone-600 mt-1\">\r\n              {language === 'de' ? 'API-Schlüssel erhalten:' : 'Get API key:'}{' '}\r\n              <a\r\n                href={providers.find(p => p.id === settings.provider)?.setupUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-emerald-600 hover:underline\"\r\n              >\r\n                {providers.find(p => p.id === settings.provider)?.name}\r\n              </a>\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Feature Settings */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>\r\n            {language === 'de' ? 'Funktionen' : 'Features'}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* Proactive Alerts */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"font-medium\">\r\n                {language === 'de' ? 'Proaktive Warnungen' : 'Proactive Alerts'}\r\n              </h4>\r\n              <p className=\"text-sm text-stone-600\">\r\n                {language === 'de' \r\n                  ? 'Automatische Benachrichtigungen bei kritischen Problemen'\r\n                  : 'Automatic notifications for critical issues'\r\n                }\r\n              </p>\r\n            </div>\r\n            <label className=\"relative inline-flex items-center cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.enableProactiveAlerts}\r\n                onChange={(e) => handleSettingChange('enableProactiveAlerts', e.target.checked)}\r\n                className=\"sr-only peer\"\r\n              />\r\n              <div className=\"w-11 h-6 bg-stone-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-stone-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600\"></div>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Floating Widget */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"font-medium\">\r\n                {language === 'de' ? 'Schwebendes Chat-Widget' : 'Floating Chat Widget'}\r\n              </h4>\r\n              <p className=\"text-sm text-stone-600\">\r\n                {language === 'de' \r\n                  ? 'Chat-Button in der unteren rechten Ecke anzeigen'\r\n                  : 'Show chat button in bottom right corner'\r\n                }\r\n              </p>\r\n            </div>\r\n            <label className=\"relative inline-flex items-center cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.enableFloatingWidget}\r\n                onChange={(e) => handleSettingChange('enableFloatingWidget', e.target.checked)}\r\n                className=\"sr-only peer\"\r\n              />\r\n              <div className=\"w-11 h-6 bg-stone-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-stone-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600\"></div>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Conversation History */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"font-medium\">\r\n                {language === 'de' ? 'Gesprächsverlauf speichern' : 'Save Conversation History'}\r\n              </h4>\r\n              <p className=\"text-sm text-stone-600\">\r\n                {language === 'de' \r\n                  ? 'Chat-Verlauf lokal speichern für besseren Kontext'\r\n                  : 'Save chat history locally for better context'\r\n                }\r\n              </p>\r\n            </div>\r\n            <label className=\"relative inline-flex items-center cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.conversationHistory}\r\n                onChange={(e) => handleSettingChange('conversationHistory', e.target.checked)}\r\n                className=\"sr-only peer\"\r\n              />\r\n              <div className=\"w-11 h-6 bg-stone-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-stone-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600\"></div>\r\n            </label>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Privacy & Data */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>\r\n            {language === 'de' ? 'Datenschutz & Daten' : 'Privacy & Data'}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n            <h4 className=\"font-medium text-blue-900 mb-2\">\r\n              {language === 'de' ? 'Datenschutz-Hinweis' : 'Privacy Notice'}\r\n            </h4>\r\n            <p className=\"text-sm text-blue-800\">\r\n              {language === 'de' \r\n                ? 'Ihre Daten werden nur lokal gespeichert und nur für AI-Anfragen an den gewählten Provider gesendet. Keine Daten werden an Dritte weitergegeben.'\r\n                : 'Your data is only stored locally and only sent to the selected AI provider for requests. No data is shared with third parties.'\r\n              }\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-stone-200\">\r\n            <div>\r\n              <h4 className=\"font-medium text-red-700\">\r\n                {language === 'de' ? 'Alle AI-Daten löschen' : 'Clear All AI Data'}\r\n              </h4>\r\n              <p className=\"text-sm text-stone-600\">\r\n                {language === 'de' \r\n                  ? 'Löscht alle gespeicherten Einstellungen und Gesprächsverläufe'\r\n                  : 'Removes all saved settings and conversation history'\r\n                }\r\n              </p>\r\n            </div>\r\n            <Button onClick={clearAllData} variant=\"destructive\">\r\n              {language === 'de' ? 'Löschen' : 'Clear'}\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AISettings;\r\n","import React from 'react';\r\nimport { useApiKey } from '../hooks/useApiKey.js';\r\nimport useAppSettings from '../hooks/useAppSettings';\r\nimport { GROWTH_STAGES, WATER_TYPES } from '../constants/index.js';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport Button from './Button';\r\nimport AISettings from './AIAssistant/AISettings';\r\n\r\nconst SettingsPage = () => {\r\n  const { apiKey, updateApiKey, removeApiKey } = useApiKey();\r\n  const [inputValue, setInputValue] = React.useState(apiKey || '');\r\n  const { settings, updateSetting } = useAppSettings();\r\n  const { theme, toggleTheme } = useTheme();\r\n\r\n  const handleSaveApiKey = () => {\r\n    updateApiKey(inputValue.trim());\r\n  };\r\n\r\n  const handleRemoveApiKey = () => {\r\n    removeApiKey();\r\n    setInputValue('');\r\n  };\r\n\r\n  const handleUnitChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    updateSetting('unit', e.target.value);\r\n  };\r\n\r\n  const handleDefaultWaterAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    updateSetting('waterAmount', e.target.value);\r\n  };\r\n\r\n  const handleDefaultGrowthPhaseChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    updateSetting('growthPhase', e.target.value);\r\n  };\r\n\r\n  const handleDefaultWaterTypeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    updateSetting('waterType', e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4\">\r\n        Einstellungen\r\n      </h2>\r\n      {/* Gemini API Key Setting */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\" htmlFor=\"apiKey\">\r\n          Gemini API Key\r\n        </label>\r\n        <input\r\n          id=\"apiKey\"\r\n          type=\"text\"\r\n          value={inputValue}\r\n          onChange={(e) => setInputValue(e.target.value)}\r\n          className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n          placeholder=\"API Key eingeben...\"\r\n        />\r\n        <div className=\"flex gap-2 mt-2\">\r\n          <Button\r\n            onClick={handleSaveApiKey}\r\n            variant=\"primary\"\r\n            aria-label=\"API Key speichern\"\r\n            title=\"API Key speichern\"\r\n          >\r\n            Speichern\r\n          </Button>\r\n          <Button\r\n            onClick={handleRemoveApiKey}\r\n            variant=\"danger\"\r\n            aria-label=\"API Key entfernen\"\r\n            title=\"API Key entfernen\"\r\n          >\r\n            Entfernen\r\n          </Button>\r\n        </div>\r\n        <div className=\"text-xs text-slate-500 mt-2\">\r\n          Dein API Key wird lokal im Browser gespeichert.\r\n        </div>\r\n      </div>\r\n      {/* Unit Setting */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\" htmlFor=\"unit\">\r\n          Einheit für Wassermenge\r\n        </label>\r\n        <select\r\n          id=\"unit\"\r\n          value={settings.unit}\r\n          onChange={handleUnitChange}\r\n          className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n        >\r\n          <option value=\"liter\">Liter</option>\r\n          <option value=\"gallon\">Gallonen</option>\r\n        </select>\r\n      </div>\r\n      {/* Default Water Amount */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\" htmlFor=\"defaultWaterAmount\">\r\n          Standard-Wassermenge (ml/oz)\r\n        </label>\r\n        <input\r\n          id=\"defaultWaterAmount\"\r\n          type=\"number\"\r\n          value={settings.waterAmount}\r\n          onChange={handleDefaultWaterAmountChange}\r\n          className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n          placeholder=\"Standard-Wassermenge eingeben...\"\r\n        />\r\n      </div>\r\n      {/* Default Growth Phase */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\" htmlFor=\"defaultGrowthPhase\">\r\n          Standard-Wachstumsphase\r\n        </label>\r\n        <select\r\n          id=\"defaultGrowthPhase\"\r\n          value={settings.growthPhase}\r\n          onChange={handleDefaultGrowthPhaseChange}\r\n          className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n        >\r\n          <option value=\"\">Auswählen...</option>\r\n          {Object.entries(GROWTH_STAGES).map(([key, stage]) => (\r\n            <option key={key} value={key}>\r\n              {stage.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {/* Default Water Type */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium mb-1\" htmlFor=\"defaultWaterType\">\r\n          Standard-Wassertyp\r\n        </label>\r\n        <select\r\n          id=\"defaultWaterType\"\r\n          value={settings.waterType}\r\n          onChange={handleDefaultWaterTypeChange}\r\n          className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n        >\r\n          <option value=\"\">Auswählen...</option>\r\n          {Object.entries(WATER_TYPES).map(([key, type]) => (\r\n            <option key={key} value={key}>\r\n              {type.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {/* Dark Mode Toggle */}\r\n      <div className=\"flex items-center gap-3 pt-2\">\r\n        <span className=\"text-sm font-medium\">Dark Mode</span>\r\n        <Button\r\n          onClick={toggleTheme}\r\n          variant=\"secondary\"\r\n          aria-label=\"Dark Mode umschalten\"\r\n          title=\"Dark Mode umschalten\"\r\n        >\r\n          {theme === 'dark' ? 'Deaktivieren' : 'Aktivieren'}\r\n        </Button>\r\n        <span className=\"text-xs text-slate-500\">\r\n          Aktuell: {theme === 'dark' ? 'Dunkel' : 'Hell'}\r\n        </span>\r\n      </div>\r\n\r\n      {/* AI Assistant Settings */}\r\n      <div className=\"border-t border-slate-200 dark:border-slate-700 pt-6\">\r\n        <h3 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4\">\r\n          AI-Assistent\r\n        </h3>\r\n        <AISettings\r\n          language=\"de\"\r\n          onSettingsChange={(_settings) => {\r\n            // AI settings updated - could be used for analytics\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsPage;\r\n","import React, { useRef } from 'react';\r\nimport { TABS_CONFIG } from '../constants';\r\n\r\n// Simple SVG icon map for demonstration (replace with real icons as needed)\r\nconst tabIcons = {\r\n  setup: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M4 6h16M4 12h16M4 18h16\" />\r\n    </svg>\r\n  ),\r\n  details: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n      <path d=\"M12 8v4l3 3\" />\r\n    </svg>\r\n  ),\r\n  analysis: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" />\r\n      <path d=\"M8 16v-4M12 16v-8M16 16v-2\" />\r\n    </svg>\r\n  ),\r\n  fertilizer: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <rect x=\"6\" y=\"3\" width=\"12\" height=\"18\" rx=\"2\" />\r\n      <path d=\"M9 7h6\" />\r\n    </svg>\r\n  ),\r\n  'ai-assistant': (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423L16.5 15.75l.394 1.183a2.25 2.25 0 001.423 1.423L19.5 18.75l-1.183.394a2.25 2.25 0 00-1.423 1.423z\" />\r\n    </svg>\r\n  ),\r\n  settings: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n      <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z\" />\r\n    </svg>\r\n  ),\r\n  references: (\r\n    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" />\r\n      <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\" />\r\n    </svg>\r\n  ),\r\n};\r\n\r\nfunction getTabIcon(tabId) {\r\n  // Map tab id to icon, fallback to a default\r\n  return (\r\n    tabIcons[tabId] || (\r\n      <svg\r\n        className=\"w-5 h-5\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n      </svg>\r\n    )\r\n  );\r\n}\r\n\r\nconst Navigation = ({ activeTab, setActiveTab }) => {\r\n  const tabRefs = useRef([]);\r\n\r\n  // Keyboard navigation handler\r\n  const handleKeyDown = (e, idx) => {\r\n    if (['ArrowRight', 'ArrowDown'].includes(e.key)) {\r\n      e.preventDefault();\r\n      const next = (idx + 1) % TABS_CONFIG.length;\r\n      tabRefs.current[next]?.focus();\r\n    } else if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {\r\n      e.preventDefault();\r\n      const prev = (idx - 1 + TABS_CONFIG.length) % TABS_CONFIG.length;\r\n      tabRefs.current[prev]?.focus();\r\n    } else if (e.key === 'Home') {\r\n      e.preventDefault();\r\n      tabRefs.current[0]?.focus();\r\n    } else if (e.key === 'End') {\r\n      e.preventDefault();\r\n      tabRefs.current[TABS_CONFIG.length - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  // Sidebar for md+ screens\r\n  // Bottom nav for mobile\r\n  return (\r\n    <nav aria-label=\"App Navigation\" className=\"\">\r\n      {/* Sidebar (md+) */}\r\n      <div className=\"hidden md:flex flex-col w-64 min-h-full bg-white/95 backdrop-blur-sm border-r border-stone-200 py-6 px-4 space-y-1 fixed top-0 left-0 z-20 shadow-sm\">\r\n        <div className=\"mb-8 px-2\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg\">\r\n              <span className=\"text-white font-bold text-lg\">N</span>\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-stone-900\">NutriCalc</h1>\r\n              <p className=\"text-xs text-stone-500\">Nutrient Calculator</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div role=\"tablist\" aria-orientation=\"vertical\" className=\"flex flex-col gap-1\">\r\n          {TABS_CONFIG.map((tab, idx) => (\r\n            <button\r\n              key={tab.id}\r\n              ref={(el) => (tabRefs.current[idx] = el)}\r\n              role=\"tab\"\r\n              aria-selected={activeTab === tab.id}\r\n              tabIndex={activeTab === tab.id ? 0 : -1}\r\n              className={`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 ${activeTab === tab.id ? 'bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-200' : 'text-stone-600 hover:text-stone-900 hover:bg-stone-50'}`}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              onKeyDown={(e) => handleKeyDown(e, idx)}\r\n              aria-label={tab.label}\r\n            >\r\n              {getTabIcon(tab.id)}\r\n              <span>{tab.label}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Bottom nav (mobile) */}\r\n      <div className=\"fixed md:hidden bottom-0 left-0 right-0 z-30 bg-white/95 backdrop-blur-sm border-t border-stone-200 flex justify-around py-2 shadow-lg\">\r\n        <div role=\"tablist\" aria-orientation=\"horizontal\" className=\"flex w-full max-w-md mx-auto\">\r\n          {TABS_CONFIG.map((tab, idx) => (\r\n            <button\r\n              key={tab.id}\r\n              ref={(el) => (tabRefs.current[idx] = el)}\r\n              role=\"tab\"\r\n              aria-selected={activeTab === tab.id}\r\n              tabIndex={activeTab === tab.id ? 0 : -1}\r\n              className={`flex flex-col items-center flex-1 px-2 py-2 text-xs font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 ${activeTab === tab.id ? 'text-emerald-600 bg-emerald-50' : 'text-stone-600 hover:text-stone-900 hover:bg-stone-50'}`}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              onKeyDown={(e) => handleKeyDown(e, idx)}\r\n              aria-label={tab.label}\r\n            >\r\n              {getTabIcon(tab.id)}\r\n              <span className=\"mt-1 leading-tight\">{tab.label}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n  errorInfo?: ErrorInfo;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    this.setState({\r\n      error,\r\n      errorInfo,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      return (\r\n        <div className=\"min-h-screen bg-gray-100 dark:bg-slate-900 flex items-center justify-center p-4\">\r\n          <div className=\"max-w-md w-full bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg\r\n                  className=\"h-8 w-8 text-red-500\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\r\n                  Etwas ist schiefgelaufen\r\n                </h3>\r\n              </div>\r\n            </div>\r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-300\">\r\n                Ein unerwarteter Fehler ist aufgetreten. Bitte laden Sie die Seite neu oder versuchen Sie es später erneut.\r\n              </p>\r\n            </div>\r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                onClick={() => window.location.reload()}\r\n                className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200\"\r\n              >\r\n                Seite neu laden\r\n              </button>\r\n              <button\r\n                onClick={() => this.setState({ hasError: false, error: undefined, errorInfo: undefined })}\r\n                className=\"flex-1 bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-md transition-colors duration-200\"\r\n              >\r\n                Erneut versuchen\r\n              </button>\r\n            </div>\r\n            {process.env.NODE_ENV === 'development' && this.state.error && (\r\n              <details className=\"mt-4\">\r\n                <summary className=\"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\">\r\n                  Fehlerdetails (nur in Entwicklung sichtbar)\r\n                </summary>\r\n                <div className=\"mt-2 p-3 bg-gray-50 dark:bg-gray-700 rounded text-xs font-mono text-gray-800 dark:text-gray-200 overflow-auto max-h-40\">\r\n                  <div className=\"mb-2\">\r\n                    <strong>Error:</strong> {this.state.error.message}\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    <strong>Stack:</strong>\r\n                    <pre className=\"whitespace-pre-wrap\">{this.state.error.stack}</pre>\r\n                  </div>\r\n                  {this.state.errorInfo && (\r\n                    <div>\r\n                      <strong>Component Stack:</strong>\r\n                      <pre className=\"whitespace-pre-wrap\">{this.state.errorInfo.componentStack}</pre>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </details>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Harm categories that would cause prompts or candidates to be blocked.\n * @public\n */\nvar HarmCategory;\n(function (HarmCategory) {\n    HarmCategory[\"HARM_CATEGORY_UNSPECIFIED\"] = \"HARM_CATEGORY_UNSPECIFIED\";\n    HarmCategory[\"HARM_CATEGORY_HATE_SPEECH\"] = \"HARM_CATEGORY_HATE_SPEECH\";\n    HarmCategory[\"HARM_CATEGORY_SEXUALLY_EXPLICIT\"] = \"HARM_CATEGORY_SEXUALLY_EXPLICIT\";\n    HarmCategory[\"HARM_CATEGORY_HARASSMENT\"] = \"HARM_CATEGORY_HARASSMENT\";\n    HarmCategory[\"HARM_CATEGORY_DANGEROUS_CONTENT\"] = \"HARM_CATEGORY_DANGEROUS_CONTENT\";\n})(HarmCategory || (HarmCategory = {}));\n/**\n * Threshhold above which a prompt or candidate will be blocked.\n * @public\n */\nvar HarmBlockThreshold;\n(function (HarmBlockThreshold) {\n    // Threshold is unspecified.\n    HarmBlockThreshold[\"HARM_BLOCK_THRESHOLD_UNSPECIFIED\"] = \"HARM_BLOCK_THRESHOLD_UNSPECIFIED\";\n    // Content with NEGLIGIBLE will be allowed.\n    HarmBlockThreshold[\"BLOCK_LOW_AND_ABOVE\"] = \"BLOCK_LOW_AND_ABOVE\";\n    // Content with NEGLIGIBLE and LOW will be allowed.\n    HarmBlockThreshold[\"BLOCK_MEDIUM_AND_ABOVE\"] = \"BLOCK_MEDIUM_AND_ABOVE\";\n    // Content with NEGLIGIBLE, LOW, and MEDIUM will be allowed.\n    HarmBlockThreshold[\"BLOCK_ONLY_HIGH\"] = \"BLOCK_ONLY_HIGH\";\n    // All content will be allowed.\n    HarmBlockThreshold[\"BLOCK_NONE\"] = \"BLOCK_NONE\";\n})(HarmBlockThreshold || (HarmBlockThreshold = {}));\n/**\n * Probability that a prompt or candidate matches a harm category.\n * @public\n */\nvar HarmProbability;\n(function (HarmProbability) {\n    // Probability is unspecified.\n    HarmProbability[\"HARM_PROBABILITY_UNSPECIFIED\"] = \"HARM_PROBABILITY_UNSPECIFIED\";\n    // Content has a negligible chance of being unsafe.\n    HarmProbability[\"NEGLIGIBLE\"] = \"NEGLIGIBLE\";\n    // Content has a low chance of being unsafe.\n    HarmProbability[\"LOW\"] = \"LOW\";\n    // Content has a medium chance of being unsafe.\n    HarmProbability[\"MEDIUM\"] = \"MEDIUM\";\n    // Content has a high chance of being unsafe.\n    HarmProbability[\"HIGH\"] = \"HIGH\";\n})(HarmProbability || (HarmProbability = {}));\n/**\n * Reason that a prompt was blocked.\n * @public\n */\nvar BlockReason;\n(function (BlockReason) {\n    // A blocked reason was not specified.\n    BlockReason[\"BLOCKED_REASON_UNSPECIFIED\"] = \"BLOCKED_REASON_UNSPECIFIED\";\n    // Content was blocked by safety settings.\n    BlockReason[\"SAFETY\"] = \"SAFETY\";\n    // Content was blocked, but the reason is uncategorized.\n    BlockReason[\"OTHER\"] = \"OTHER\";\n})(BlockReason || (BlockReason = {}));\n/**\n * Reason that a candidate finished.\n * @public\n */\nvar FinishReason;\n(function (FinishReason) {\n    // Default value. This value is unused.\n    FinishReason[\"FINISH_REASON_UNSPECIFIED\"] = \"FINISH_REASON_UNSPECIFIED\";\n    // Natural stop point of the model or provided stop sequence.\n    FinishReason[\"STOP\"] = \"STOP\";\n    // The maximum number of tokens as specified in the request was reached.\n    FinishReason[\"MAX_TOKENS\"] = \"MAX_TOKENS\";\n    // The candidate content was flagged for safety reasons.\n    FinishReason[\"SAFETY\"] = \"SAFETY\";\n    // The candidate content was flagged for recitation reasons.\n    FinishReason[\"RECITATION\"] = \"RECITATION\";\n    // Unknown reason.\n    FinishReason[\"OTHER\"] = \"OTHER\";\n})(FinishReason || (FinishReason = {}));\n/**\n * Task type for embedding content.\n * @public\n */\nvar TaskType;\n(function (TaskType) {\n    TaskType[\"TASK_TYPE_UNSPECIFIED\"] = \"TASK_TYPE_UNSPECIFIED\";\n    TaskType[\"RETRIEVAL_QUERY\"] = \"RETRIEVAL_QUERY\";\n    TaskType[\"RETRIEVAL_DOCUMENT\"] = \"RETRIEVAL_DOCUMENT\";\n    TaskType[\"SEMANTIC_SIMILARITY\"] = \"SEMANTIC_SIMILARITY\";\n    TaskType[\"CLASSIFICATION\"] = \"CLASSIFICATION\";\n    TaskType[\"CLUSTERING\"] = \"CLUSTERING\";\n})(TaskType || (TaskType = {}));\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass GoogleGenerativeAIError extends Error {\n    constructor(message) {\n        super(`[GoogleGenerativeAI Error]: ${message}`);\n    }\n}\nclass GoogleGenerativeAIResponseError extends GoogleGenerativeAIError {\n    constructor(message, response) {\n        super(message);\n        this.response = response;\n    }\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst BASE_URL = \"https://generativelanguage.googleapis.com\";\nconst API_VERSION = \"v1\";\n/**\n * We can't `require` package.json if this runs on web. We will use rollup to\n * swap in the version number here at build time.\n */\nconst PACKAGE_VERSION = \"0.1.3\";\nconst PACKAGE_LOG_HEADER = \"genai-js\";\nvar Task;\n(function (Task) {\n    Task[\"GENERATE_CONTENT\"] = \"generateContent\";\n    Task[\"STREAM_GENERATE_CONTENT\"] = \"streamGenerateContent\";\n    Task[\"COUNT_TOKENS\"] = \"countTokens\";\n    Task[\"EMBED_CONTENT\"] = \"embedContent\";\n    Task[\"BATCH_EMBED_CONTENTS\"] = \"batchEmbedContents\";\n})(Task || (Task = {}));\nclass RequestUrl {\n    constructor(model, task, apiKey, stream) {\n        this.model = model;\n        this.task = task;\n        this.apiKey = apiKey;\n        this.stream = stream;\n    }\n    toString() {\n        let url = `${BASE_URL}/${API_VERSION}/models/${this.model}:${this.task}`;\n        if (this.stream) {\n            url += \"?alt=sse\";\n        }\n        return url;\n    }\n}\n/**\n * Simple, but may become more complex if we add more versions to log.\n */\nfunction getClientHeaders() {\n    return `${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`;\n}\nasync function makeRequest(url, body) {\n    let response;\n    try {\n        response = await fetch(url.toString(), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-goog-api-client\": getClientHeaders(),\n                \"x-goog-api-key\": url.apiKey,\n            },\n            body,\n        });\n        if (!response.ok) {\n            let message = \"\";\n            try {\n                const json = await response.json();\n                message = json.error.message;\n                if (json.error.details) {\n                    message += ` ${JSON.stringify(json.error.details)}`;\n                }\n            }\n            catch (e) {\n                // ignored\n            }\n            throw new Error(`[${response.status} ${response.statusText}] ${message}`);\n        }\n    }\n    catch (e) {\n        const err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n        throw err;\n    }\n    return response;\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Adds convenience helper methods to a response object, including stream\n * chunks (as long as each chunk is a complete GenerateContentResponse JSON).\n */\nfunction addHelpers(response) {\n    response.text = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning text from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getText(response);\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return \"\";\n    };\n    return response;\n}\n/**\n * Returns text of first candidate.\n */\nfunction getText(response) {\n    var _a, _b, _c, _d;\n    if ((_d = (_c = (_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.text) {\n        return response.candidates[0].content.parts[0].text;\n    }\n    else {\n        return \"\";\n    }\n}\nconst badFinishReasons = [FinishReason.RECITATION, FinishReason.SAFETY];\nfunction hadBadFinishReason(candidate) {\n    return (!!candidate.finishReason &&\n        badFinishReasons.includes(candidate.finishReason));\n}\nfunction formatBlockErrorMessage(response) {\n    var _a, _b, _c;\n    let message = \"\";\n    if ((!response.candidates || response.candidates.length === 0) &&\n        response.promptFeedback) {\n        message += \"Response was blocked\";\n        if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {\n            message += ` due to ${response.promptFeedback.blockReason}`;\n        }\n        if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {\n            message += `: ${response.promptFeedback.blockReasonMessage}`;\n        }\n    }\n    else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {\n        const firstCandidate = response.candidates[0];\n        if (hadBadFinishReason(firstCandidate)) {\n            message += `Candidate was blocked due to ${firstCandidate.finishReason}`;\n            if (firstCandidate.finishMessage) {\n                message += `: ${firstCandidate.finishMessage}`;\n            }\n        }\n    }\n    return message;\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst responseLineRE = /^data\\: (.*)(?:\\n\\n|\\r\\r|\\r\\n\\r\\n)/;\n/**\n * Process a response.body stream from the backend and return an\n * iterator that provides one complete GenerateContentResponse at a time\n * and a promise that resolves with a single aggregated\n * GenerateContentResponse.\n *\n * @param response - Response from a fetch call\n */\nfunction processStream(response) {\n    const inputStream = response.body.pipeThrough(new TextDecoderStream(\"utf8\", { fatal: true }));\n    const responseStream = getResponseStream(inputStream);\n    const [stream1, stream2] = responseStream.tee();\n    return {\n        stream: generateResponseSequence(stream1),\n        response: getResponsePromise(stream2),\n    };\n}\nasync function getResponsePromise(stream) {\n    const allResponses = [];\n    const reader = stream.getReader();\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n            return addHelpers(aggregateResponses(allResponses));\n        }\n        allResponses.push(value);\n    }\n}\nfunction generateResponseSequence(stream) {\n    return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {\n        const reader = stream.getReader();\n        while (true) {\n            const { value, done } = yield __await(reader.read());\n            if (done) {\n                break;\n            }\n            yield yield __await(addHelpers(value));\n        }\n    });\n}\n/**\n * Reads a raw stream from the fetch response and join incomplete\n * chunks, returning a new stream that provides a single complete\n * GenerateContentResponse in each iteration.\n */\nfunction getResponseStream(inputStream) {\n    const reader = inputStream.getReader();\n    const stream = new ReadableStream({\n        start(controller) {\n            let currentText = \"\";\n            return pump();\n            function pump() {\n                return reader.read().then(({ value, done }) => {\n                    if (done) {\n                        if (currentText.trim()) {\n                            controller.error(new GoogleGenerativeAIError(\"Failed to parse stream\"));\n                            return;\n                        }\n                        controller.close();\n                        return;\n                    }\n                    currentText += value;\n                    let match = currentText.match(responseLineRE);\n                    let parsedResponse;\n                    while (match) {\n                        try {\n                            parsedResponse = JSON.parse(match[1]);\n                        }\n                        catch (e) {\n                            controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: \"${match[1]}\"`));\n                            return;\n                        }\n                        controller.enqueue(parsedResponse);\n                        currentText = currentText.substring(match[0].length);\n                        match = currentText.match(responseLineRE);\n                    }\n                    return pump();\n                });\n            }\n        },\n    });\n    return stream;\n}\n/**\n * Aggregates an array of `GenerateContentResponse`s into a single\n * GenerateContentResponse.\n */\nfunction aggregateResponses(responses) {\n    const lastResponse = responses[responses.length - 1];\n    const aggregatedResponse = {\n        promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback,\n    };\n    for (const response of responses) {\n        if (response.candidates) {\n            for (const candidate of response.candidates) {\n                const i = candidate.index;\n                if (!aggregatedResponse.candidates) {\n                    aggregatedResponse.candidates = [];\n                }\n                if (!aggregatedResponse.candidates[i]) {\n                    aggregatedResponse.candidates[i] = {\n                        index: candidate.index,\n                    };\n                }\n                // Keep overwriting, the last one will be final\n                aggregatedResponse.candidates[i].citationMetadata =\n                    candidate.citationMetadata;\n                aggregatedResponse.candidates[i].finishReason = candidate.finishReason;\n                aggregatedResponse.candidates[i].finishMessage =\n                    candidate.finishMessage;\n                aggregatedResponse.candidates[i].safetyRatings =\n                    candidate.safetyRatings;\n                /**\n                 * Candidates should always have content and parts, but this handles\n                 * possible malformed responses.\n                 */\n                if (candidate.content && candidate.content.parts) {\n                    if (!aggregatedResponse.candidates[i].content) {\n                        aggregatedResponse.candidates[i].content = {\n                            role: candidate.content.role || \"user\",\n                            parts: [{ text: \"\" }],\n                        };\n                    }\n                    for (const part of candidate.content.parts) {\n                        if (part.text) {\n                            aggregatedResponse.candidates[i].content.parts[0].text +=\n                                part.text;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return aggregatedResponse;\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function generateContentStream(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.STREAM_GENERATE_CONTENT, apiKey, \n    /* stream */ true);\n    const response = await makeRequest(url, JSON.stringify(params));\n    return processStream(response);\n}\nasync function generateContent(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.GENERATE_CONTENT, apiKey, \n    /* stream */ false);\n    const response = await makeRequest(url, JSON.stringify(params));\n    const responseJson = await response.json();\n    const enhancedResponse = addHelpers(responseJson);\n    return {\n        response: enhancedResponse,\n    };\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction formatNewContent(request, role) {\n    let newParts = [];\n    if (typeof request === \"string\") {\n        newParts = [{ text: request }];\n    }\n    else {\n        for (const partOrString of request) {\n            if (typeof partOrString === \"string\") {\n                newParts.push({ text: partOrString });\n            }\n            else {\n                newParts.push(partOrString);\n            }\n        }\n    }\n    return { role, parts: newParts };\n}\nfunction formatGenerateContentInput(params) {\n    if (params.contents) {\n        return params;\n    }\n    else {\n        const content = formatNewContent(params, \"user\");\n        return { contents: [content] };\n    }\n}\nfunction formatEmbedContentInput(params) {\n    if (typeof params === \"string\" || Array.isArray(params)) {\n        const content = formatNewContent(params, \"user\");\n        return { content };\n    }\n    return params;\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Do not log a message for this error.\n */\nconst SILENT_ERROR = \"SILENT_ERROR\";\n/**\n * ChatSession class that enables sending chat messages and stores\n * history of sent and received messages so far.\n *\n * @public\n */\nclass ChatSession {\n    constructor(apiKey, model, params) {\n        this.model = model;\n        this.params = params;\n        this._history = [];\n        this._sendPromise = Promise.resolve();\n        this._apiKey = apiKey;\n        if (params === null || params === void 0 ? void 0 : params.history) {\n            this._history = params.history.map((content) => {\n                if (!content.role) {\n                    throw new Error(\"Missing role for history item: \" + JSON.stringify(content));\n                }\n                return formatNewContent(content.parts, content.role);\n            });\n        }\n    }\n    /**\n     * Gets the chat history so far. Blocked prompts are not added to history.\n     * Blocked candidates are not added to history, nor are the prompts that\n     * generated them.\n     */\n    async getHistory() {\n        await this._sendPromise;\n        return this._history;\n    }\n    /**\n     * Sends a chat message and receives a non-streaming\n     * {@link GenerateContentResult}\n     */\n    async sendMessage(request) {\n        var _a, _b;\n        await this._sendPromise;\n        const newContent = formatNewContent(request, \"user\");\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            contents: [...this._history, newContent],\n        };\n        let finalResult;\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => generateContent(this._apiKey, this.model, generateContentRequest))\n            .then((result) => {\n            var _a;\n            if (result.response.candidates &&\n                result.response.candidates.length > 0) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({ parts: [], \n                    // Response seems to come back without a role set.\n                    role: \"model\" }, (_a = result.response.candidates) === null || _a === void 0 ? void 0 : _a[0].content);\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(result.response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n            finalResult = result;\n        });\n        await this._sendPromise;\n        return finalResult;\n    }\n    /**\n     * Sends a chat message and receives the response as a\n     * {@link GenerateContentStreamResult} containing an iterable stream\n     * and a response promise.\n     */\n    async sendMessageStream(request) {\n        var _a, _b;\n        await this._sendPromise;\n        const newContent = formatNewContent(request, \"user\");\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            contents: [...this._history, newContent],\n        };\n        const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest);\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => streamPromise)\n            // This must be handled to avoid unhandled rejection, but jump\n            // to the final catch block with a label to not log this error.\n            .catch((_ignored) => {\n            throw new Error(SILENT_ERROR);\n        })\n            .then((streamResult) => streamResult.response)\n            .then((response) => {\n            if (response.candidates && response.candidates.length > 0) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({}, response.candidates[0].content);\n                // Response seems to come back without a role set.\n                if (!responseContent.role) {\n                    responseContent.role = \"model\";\n                }\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n        })\n            .catch((e) => {\n            // Errors in streamPromise are already catchable by the user as\n            // streamPromise is returned.\n            // Avoid duplicating the error message in logs.\n            if (e.message !== SILENT_ERROR) {\n                // Users do not have access to _sendPromise to catch errors\n                // downstream from streamPromise, so they should not throw.\n                console.error(e);\n            }\n        });\n        return streamPromise;\n    }\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function countTokens(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.COUNT_TOKENS, apiKey, false);\n    const response = await makeRequest(url, JSON.stringify(Object.assign(Object.assign({}, params), { model })));\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function embedContent(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.EMBED_CONTENT, apiKey, false);\n    const response = await makeRequest(url, JSON.stringify(params));\n    return response.json();\n}\nasync function batchEmbedContents(apiKey, model, params) {\n    const url = new RequestUrl(model, Task.BATCH_EMBED_CONTENTS, apiKey, false);\n    const requestsWithModel = params.requests.map((request) => {\n        return Object.assign(Object.assign({}, request), { model: `models/${model}` });\n    });\n    const response = await makeRequest(url, JSON.stringify({ requests: requestsWithModel }));\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Class for generative model APIs.\n * @public\n */\nclass GenerativeModel {\n    constructor(apiKey, modelParams) {\n        var _a;\n        this.apiKey = apiKey;\n        if (modelParams.model.startsWith(\"models/\")) {\n            this.model = (_a = modelParams.model.split(\"models/\")) === null || _a === void 0 ? void 0 : _a[1];\n        }\n        else {\n            this.model = modelParams.model;\n        }\n        this.generationConfig = modelParams.generationConfig || {};\n        this.safetySettings = modelParams.safetySettings || [];\n    }\n    /**\n     * Makes a single non-streaming call to the model\n     * and returns an object containing a single {@link GenerateContentResponse}.\n     */\n    async generateContent(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return generateContent(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings }, formattedParams));\n    }\n    /**\n     * Makes a single streaming call to the model\n     * and returns an object containing an iterable stream that iterates\n     * over all chunks in the streaming response as well as\n     * a promise that returns the final aggregated response.\n     */\n    async generateContentStream(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return generateContentStream(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings }, formattedParams));\n    }\n    /**\n     * Gets a new {@link ChatSession} instance which can be used for\n     * multi-turn chats.\n     */\n    startChat(startChatParams) {\n        return new ChatSession(this.apiKey, this.model, startChatParams);\n    }\n    /**\n     * Counts the tokens in the provided request.\n     */\n    async countTokens(request) {\n        const formattedParams = formatGenerateContentInput(request);\n        return countTokens(this.apiKey, this.model, formattedParams);\n    }\n    /**\n     * Embeds the provided content.\n     */\n    async embedContent(request) {\n        const formattedParams = formatEmbedContentInput(request);\n        return embedContent(this.apiKey, this.model, formattedParams);\n    }\n    /**\n     * Embeds an array of {@link EmbedContentRequest}s.\n     */\n    async batchEmbedContents(batchEmbedContentRequest) {\n        return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest);\n    }\n}\n\n/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Top-level class for this SDK\n * @public\n */\nclass GoogleGenerativeAI {\n    constructor(apiKey) {\n        this.apiKey = apiKey;\n    }\n    /**\n     * Gets a {@link GenerativeModel} instance for the provided model name.\n     */\n    getGenerativeModel(modelParams) {\n        if (!modelParams.model) {\n            throw new GoogleGenerativeAIError(`Must provide a model name. ` +\n                `Example: genai.getGenerativeModel({ model: 'my-model-name' })`);\n        }\n        return new GenerativeModel(this.apiKey, modelParams);\n    }\n}\n\nexport { BlockReason, ChatSession, FinishReason, GenerativeModel, GoogleGenerativeAI, HarmBlockThreshold, HarmCategory, HarmProbability, TaskType };\n//# sourceMappingURL=index.mjs.map\n","export interface GrowthStageInfo {\r\n  name: string;\r\n  duration: string;\r\n  characteristics: string[];\r\n  optimalNutrients: Record<string, [number, number]>;\r\n  commonIssues: string[];\r\n  tips: string[];\r\n  environmentalNeeds: {\r\n    temperature: [number, number];\r\n    humidity: [number, number];\r\n    lightCycle: string;\r\n    ph: [number, number];\r\n    ec: [number, number];\r\n  };\r\n}\r\n\r\nexport interface NutrientDeficiency {\r\n  nutrient: string;\r\n  symptoms: string[];\r\n  causes: string[];\r\n  solutions: string[];\r\n  severity: 'mild' | 'moderate' | 'severe';\r\n  affectedStages: string[];\r\n}\r\n\r\nexport interface CultivationTip {\r\n  category: 'nutrients' | 'environment' | 'training' | 'harvest' | 'general';\r\n  title: string;\r\n  description: string;\r\n  applicableStages: string[];\r\n  difficulty: 'beginner' | 'intermediate' | 'expert';\r\n  language: 'de' | 'en';\r\n}\r\n\r\nexport class CannabisKnowledgeBase {\r\n  private growthStages: Record<string, GrowthStageInfo>;\r\n  private nutrientDeficiencies: Record<string, NutrientDeficiency>;\r\n  private cultivationTips: CultivationTip[];\r\n  private commonProblems: Record<string, any>;\r\n\r\n  constructor() {\r\n    this.initializeGrowthStages();\r\n    this.initializeNutrientDeficiencies();\r\n    this.initializeCultivationTips();\r\n    this.initializeCommonProblems();\r\n  }\r\n\r\n  private initializeGrowthStages(): void {\r\n    this.growthStages = {\r\n      seedling: {\r\n        name: 'Seedling',\r\n        duration: '1-3 weeks',\r\n        characteristics: [\r\n          'First true leaves developing',\r\n          'Delicate root system',\r\n          'Low nutrient requirements',\r\n          'High humidity needs'\r\n        ],\r\n        optimalNutrients: {\r\n          n: [50, 100],\r\n          p: [20, 40],\r\n          k: [40, 80],\r\n          ca: [100, 150],\r\n          mg: [30, 50],\r\n          ec: [0.4, 0.8],\r\n          ph: [5.8, 6.2]\r\n        },\r\n        commonIssues: [\r\n          'Overwatering',\r\n          'Nutrient burn',\r\n          'Damping off',\r\n          'Light burn'\r\n        ],\r\n        tips: [\r\n          'Use quarter-strength nutrients',\r\n          'Maintain high humidity (70-80%)',\r\n          'Gentle lighting (18-24 hours)',\r\n          'Keep soil slightly moist'\r\n        ],\r\n        environmentalNeeds: {\r\n          temperature: [20, 25],\r\n          humidity: [70, 80],\r\n          lightCycle: '18/6 or 24/0',\r\n          ph: [5.8, 6.2],\r\n          ec: [0.4, 0.8]\r\n        }\r\n      },\r\n      \r\n      'early-veg': {\r\n        name: 'Early Vegetative',\r\n        duration: '3-6 weeks',\r\n        characteristics: [\r\n          'Rapid leaf development',\r\n          'Strong root growth',\r\n          'Increased nutrient uptake',\r\n          'Node development'\r\n        ],\r\n        optimalNutrients: {\r\n          n: [100, 150],\r\n          p: [40, 60],\r\n          k: [80, 120],\r\n          ca: [150, 200],\r\n          mg: [50, 70],\r\n          ec: [0.8, 1.2],\r\n          ph: [5.8, 6.3]\r\n        },\r\n        commonIssues: [\r\n          'Nitrogen deficiency',\r\n          'Overfeeding',\r\n          'pH fluctuations',\r\n          'Pest emergence'\r\n        ],\r\n        tips: [\r\n          'Increase nitrogen gradually',\r\n          'Monitor pH daily',\r\n          'Begin training techniques',\r\n          'Ensure good air circulation'\r\n        ],\r\n        environmentalNeeds: {\r\n          temperature: [22, 26],\r\n          humidity: [60, 70],\r\n          lightCycle: '18/6',\r\n          ph: [5.8, 6.3],\r\n          ec: [0.8, 1.2]\r\n        }\r\n      },\r\n\r\n      'late-veg': {\r\n        name: 'Late Vegetative',\r\n        duration: '4-8 weeks',\r\n        characteristics: [\r\n          'Vigorous growth',\r\n          'Pre-flower development',\r\n          'Maximum nutrient uptake',\r\n          'Training opportunities'\r\n        ],\r\n        optimalNutrients: {\r\n          n: [150, 200],\r\n          p: [60, 80],\r\n          k: [120, 160],\r\n          ca: [200, 250],\r\n          mg: [70, 90],\r\n          ec: [1.2, 1.6],\r\n          ph: [5.9, 6.4]\r\n        },\r\n        commonIssues: [\r\n          'Nutrient lockout',\r\n          'Calcium deficiency',\r\n          'Light stress',\r\n          'Training damage'\r\n        ],\r\n        tips: [\r\n          'Peak feeding time',\r\n          'Implement training methods',\r\n          'Monitor for pre-flowers',\r\n          'Prepare for flower transition'\r\n        ],\r\n        environmentalNeeds: {\r\n          temperature: [22, 27],\r\n          humidity: [55, 65],\r\n          lightCycle: '18/6',\r\n          ph: [5.9, 6.4],\r\n          ec: [1.2, 1.6]\r\n        }\r\n      },\r\n\r\n      flowering: {\r\n        name: 'Flowering',\r\n        duration: '8-12 weeks',\r\n        characteristics: [\r\n          'Bud development',\r\n          'Reduced nitrogen needs',\r\n          'Increased P-K requirements',\r\n          'Trichome production'\r\n        ],\r\n        optimalNutrients: {\r\n          n: [80, 120],\r\n          p: [80, 120],\r\n          k: [160, 220],\r\n          ca: [200, 250],\r\n          mg: [70, 90],\r\n          ec: [1.4, 1.8],\r\n          ph: [6.0, 6.5]\r\n        },\r\n        commonIssues: [\r\n          'Bud rot',\r\n          'Phosphorus deficiency',\r\n          'Calcium deficiency',\r\n          'Light burn on buds'\r\n        ],\r\n        tips: [\r\n          'Reduce nitrogen gradually',\r\n          'Increase P-K ratios',\r\n          'Lower humidity',\r\n          'Monitor trichomes for harvest'\r\n        ],\r\n        environmentalNeeds: {\r\n          temperature: [20, 25],\r\n          humidity: [40, 50],\r\n          lightCycle: '12/12',\r\n          ph: [6.0, 6.5],\r\n          ec: [1.4, 1.8]\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  private initializeNutrientDeficiencies(): void {\r\n    this.nutrientDeficiencies = {\r\n      nitrogen: {\r\n        nutrient: 'Nitrogen (N)',\r\n        symptoms: [\r\n          'Yellowing of lower leaves',\r\n          'Slow growth',\r\n          'Pale green coloration',\r\n          'Premature leaf drop'\r\n        ],\r\n        causes: [\r\n          'Insufficient nitrogen in nutrient solution',\r\n          'pH lockout (too high or low)',\r\n          'Root problems',\r\n          'Overwatering'\r\n        ],\r\n        solutions: [\r\n          'Increase nitrogen concentration',\r\n          'Check and adjust pH (5.8-6.3)',\r\n          'Improve root health',\r\n          'Reduce watering frequency'\r\n        ],\r\n        severity: 'moderate',\r\n        affectedStages: ['early-veg', 'late-veg']\r\n      },\r\n\r\n      phosphorus: {\r\n        nutrient: 'Phosphorus (P)',\r\n        symptoms: [\r\n          'Dark green leaves with purple stems',\r\n          'Purple/red leaf discoloration',\r\n          'Slow flowering',\r\n          'Reduced bud development'\r\n        ],\r\n        causes: [\r\n          'Low phosphorus levels',\r\n          'Cold temperatures',\r\n          'pH too high or low',\r\n          'Nutrient lockout'\r\n        ],\r\n        solutions: [\r\n          'Increase phosphorus levels',\r\n          'Maintain optimal temperature',\r\n          'Adjust pH to 6.0-6.5',\r\n          'Flush and reset nutrients'\r\n        ],\r\n        severity: 'severe',\r\n        affectedStages: ['flowering']\r\n      },\r\n\r\n      potassium: {\r\n        nutrient: 'Potassium (K)',\r\n        symptoms: [\r\n          'Brown leaf edges (burn)',\r\n          'Yellow spots on leaves',\r\n          'Weak stems',\r\n          'Poor bud quality'\r\n        ],\r\n        causes: [\r\n          'Insufficient potassium',\r\n          'High sodium levels',\r\n          'pH imbalance',\r\n          'Light burn stress'\r\n        ],\r\n        solutions: [\r\n          'Increase potassium levels',\r\n          'Check water quality',\r\n          'Maintain proper pH',\r\n          'Reduce light intensity'\r\n        ],\r\n        severity: 'moderate',\r\n        affectedStages: ['late-veg', 'flowering']\r\n      },\r\n\r\n      calcium: {\r\n        nutrient: 'Calcium (Ca)',\r\n        symptoms: [\r\n          'Brown spots on leaves',\r\n          'Weak cell walls',\r\n          'Bud rot susceptibility',\r\n          'Stunted growth'\r\n        ],\r\n        causes: [\r\n          'Low calcium levels',\r\n          'High humidity',\r\n          'Poor air circulation',\r\n          'Magnesium excess'\r\n        ],\r\n        solutions: [\r\n          'Add calcium supplement',\r\n          'Improve ventilation',\r\n          'Balance Mg:Ca ratio',\r\n          'Monitor humidity levels'\r\n        ],\r\n        severity: 'severe',\r\n        affectedStages: ['late-veg', 'flowering']\r\n      },\r\n\r\n      magnesium: {\r\n        nutrient: 'Magnesium (Mg)',\r\n        symptoms: [\r\n          'Yellowing between leaf veins',\r\n          'Leaf curling',\r\n          'Reduced chlorophyll',\r\n          'Poor light absorption'\r\n        ],\r\n        causes: [\r\n          'Low magnesium levels',\r\n          'High potassium levels',\r\n          'pH lockout',\r\n          'Cold temperatures'\r\n        ],\r\n        solutions: [\r\n          'Add Epsom salt (MgSO4)',\r\n          'Balance K:Mg ratio',\r\n          'Adjust pH to optimal range',\r\n          'Maintain proper temperature'\r\n        ],\r\n        severity: 'moderate',\r\n        affectedStages: ['late-veg', 'flowering']\r\n      }\r\n    };\r\n  }\r\n\r\n  private initializeCultivationTips(): void {\r\n    this.cultivationTips = [\r\n      {\r\n        category: 'nutrients',\r\n        title: 'Start Low, Go Slow',\r\n        description: 'Begin with 25% of recommended nutrient strength and gradually increase based on plant response.',\r\n        applicableStages: ['seedling', 'early-veg'],\r\n        difficulty: 'beginner',\r\n        language: 'en'\r\n      },\r\n      {\r\n        category: 'nutrients',\r\n        title: 'Niedrig anfangen, langsam steigern',\r\n        description: 'Beginnen Sie mit 25% der empfohlenen Nährstoffstärke und erhöhen Sie diese schrittweise basierend auf der Pflanzenreaktion.',\r\n        applicableStages: ['seedling', 'early-veg'],\r\n        difficulty: 'beginner',\r\n        language: 'de'\r\n      },\r\n      {\r\n        category: 'environment',\r\n        title: 'VPD Management',\r\n        description: 'Maintain optimal Vapor Pressure Deficit (VPD) for maximum growth efficiency.',\r\n        applicableStages: ['late-veg', 'flowering'],\r\n        difficulty: 'expert',\r\n        language: 'en'\r\n      },\r\n      {\r\n        category: 'training',\r\n        title: 'LST Timing',\r\n        description: 'Begin Low Stress Training when plants have 4-6 nodes for optimal results.',\r\n        applicableStages: ['early-veg', 'late-veg'],\r\n        difficulty: 'intermediate',\r\n        language: 'en'\r\n      },\r\n      {\r\n        category: 'harvest',\r\n        title: 'Trichome Inspection',\r\n        description: 'Harvest when trichomes are 70% cloudy, 30% amber for balanced effects.',\r\n        applicableStages: ['flowering'],\r\n        difficulty: 'intermediate',\r\n        language: 'en'\r\n      }\r\n    ];\r\n  }\r\n\r\n  private initializeCommonProblems(): void {\r\n    this.commonProblems = {\r\n      'nutrient_burn': {\r\n        symptoms: ['Leaf tip burn', 'Dark green leaves', 'Clawing'],\r\n        causes: ['Overfeeding', 'High EC levels'],\r\n        solutions: ['Reduce nutrient concentration', 'Flush with pH water']\r\n      },\r\n      'ph_lockout': {\r\n        symptoms: ['Multiple deficiency symptoms', 'Stunted growth'],\r\n        causes: ['pH too high/low', 'Nutrient precipitation'],\r\n        solutions: ['Adjust pH to optimal range', 'Flush and reset']\r\n      },\r\n      'light_burn': {\r\n        symptoms: ['Bleached leaves', 'Crispy leaf edges'],\r\n        causes: ['Lights too close', 'Excessive intensity'],\r\n        solutions: ['Increase light distance', 'Reduce intensity']\r\n      }\r\n    };\r\n  }\r\n\r\n  // Public methods for knowledge retrieval\r\n  getGrowthStageInfo(stage: string): GrowthStageInfo | null {\r\n    return this.growthStages[stage] || null;\r\n  }\r\n\r\n  getNutrientDeficiencyInfo(nutrient: string): NutrientDeficiency | null {\r\n    return this.nutrientDeficiencies[nutrient] || null;\r\n  }\r\n\r\n  getCultivationTips(\r\n    stage?: string,\r\n    difficulty?: string,\r\n    language: 'de' | 'en' = 'en'\r\n  ): CultivationTip[] {\r\n    return this.cultivationTips.filter(tip => {\r\n      if (language && tip.language !== language) return false;\r\n      if (stage && !tip.applicableStages.includes(stage)) return false;\r\n      if (difficulty && tip.difficulty !== difficulty) return false;\r\n      return true;\r\n    });\r\n  }\r\n\r\n  diagnoseIssue(symptoms: string[]): any[] {\r\n    const matches: any[] = [];\r\n    \r\n    // Check nutrient deficiencies\r\n    Object.values(this.nutrientDeficiencies).forEach(deficiency => {\r\n      const matchCount = symptoms.filter(symptom => \r\n        deficiency.symptoms.some(defSymptom => \r\n          defSymptom.toLowerCase().includes(symptom.toLowerCase()) ||\r\n          symptom.toLowerCase().includes(defSymptom.toLowerCase())\r\n        )\r\n      ).length;\r\n      \r\n      if (matchCount > 0) {\r\n        matches.push({\r\n          type: 'nutrient_deficiency',\r\n          issue: deficiency,\r\n          confidence: matchCount / symptoms.length\r\n        });\r\n      }\r\n    });\r\n\r\n    // Check common problems\r\n    Object.entries(this.commonProblems).forEach(([key, problem]) => {\r\n      const matchCount = symptoms.filter(symptom => \r\n        problem.symptoms.some((probSymptom: string) => \r\n          probSymptom.toLowerCase().includes(symptom.toLowerCase()) ||\r\n          symptom.toLowerCase().includes(probSymptom.toLowerCase())\r\n        )\r\n      ).length;\r\n      \r\n      if (matchCount > 0) {\r\n        matches.push({\r\n          type: 'common_problem',\r\n          issue: { name: key, ...problem },\r\n          confidence: matchCount / symptoms.length\r\n        });\r\n      }\r\n    });\r\n\r\n    return matches.sort((a, b) => b.confidence - a.confidence);\r\n  }\r\n\r\n  getOptimalNutrients(stage: string): Record<string, [number, number]> | null {\r\n    const stageInfo = this.getGrowthStageInfo(stage);\r\n    return stageInfo?.optimalNutrients || null;\r\n  }\r\n\r\n  getEnvironmentalNeeds(stage: string): any | null {\r\n    const stageInfo = this.getGrowthStageInfo(stage);\r\n    return stageInfo?.environmentalNeeds || null;\r\n  }\r\n}\r\n","import { CultivationContext, AIAction } from './AIAssistantService';\r\nimport { CannabisKnowledgeBase } from './CannabisKnowledgeBase';\r\n\r\nexport interface ContextAnalysis {\r\n  nutrientStatus: NutrientStatus;\r\n  growthStageAnalysis: GrowthStageAnalysis;\r\n  environmentalAssessment: EnvironmentalAssessment;\r\n  recommendations: Recommendation[];\r\n  alerts: Alert[];\r\n  confidence: number;\r\n}\r\n\r\nexport interface NutrientStatus {\r\n  overall: 'optimal' | 'suboptimal' | 'deficient' | 'excessive';\r\n  individual: Record<string, {\r\n    status: 'low' | 'optimal' | 'high';\r\n    current: number;\r\n    optimal: [number, number];\r\n    deviation: number;\r\n  }>;\r\n  ecStatus: 'low' | 'optimal' | 'high';\r\n  phStatus: 'low' | 'optimal' | 'high';\r\n}\r\n\r\nexport interface GrowthStageAnalysis {\r\n  currentStage: string;\r\n  weekInStage: number;\r\n  nextStage?: string;\r\n  stageProgress: number; // 0-1\r\n  stageOptimal: boolean;\r\n  transitionRecommendations?: string[];\r\n}\r\n\r\nexport interface EnvironmentalAssessment {\r\n  temperature: 'low' | 'optimal' | 'high' | 'unknown';\r\n  humidity: 'low' | 'optimal' | 'high' | 'unknown';\r\n  lightCycle: 'correct' | 'incorrect' | 'unknown';\r\n  overallScore: number; // 0-1\r\n}\r\n\r\nexport interface Recommendation {\r\n  type: 'nutrient' | 'environmental' | 'training' | 'harvest' | 'general';\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n  title: string;\r\n  description: string;\r\n  action?: AIAction;\r\n  reasoning: string;\r\n  timeframe: 'immediate' | 'within_day' | 'within_week' | 'next_stage';\r\n}\r\n\r\nexport interface Alert {\r\n  type: 'warning' | 'error' | 'info';\r\n  severity: 'low' | 'medium' | 'high' | 'critical';\r\n  title: string;\r\n  message: string;\r\n  action?: AIAction;\r\n  dismissible: boolean;\r\n}\r\n\r\nexport class AIContextEngine {\r\n  private knowledgeBase: CannabisKnowledgeBase;\r\n\r\n  constructor() {\r\n    this.knowledgeBase = new CannabisKnowledgeBase();\r\n  }\r\n\r\n  analyzeContext(context: CultivationContext): ContextAnalysis {\r\n    const nutrientStatus = this.analyzeNutrients(context);\r\n    const growthStageAnalysis = this.analyzeGrowthStage(context);\r\n    const environmentalAssessment = this.analyzeEnvironment(context);\r\n    const recommendations = this.generateRecommendations(context, nutrientStatus, growthStageAnalysis);\r\n    const alerts = this.generateAlerts(context, nutrientStatus, environmentalAssessment);\r\n    \r\n    const confidence = this.calculateOverallConfidence(\r\n      nutrientStatus,\r\n      growthStageAnalysis,\r\n      environmentalAssessment\r\n    );\r\n\r\n    return {\r\n      nutrientStatus,\r\n      growthStageAnalysis,\r\n      environmentalAssessment,\r\n      recommendations,\r\n      alerts,\r\n      confidence\r\n    };\r\n  }\r\n\r\n  private analyzeNutrients(context: CultivationContext): NutrientStatus {\r\n    const optimalRanges = this.knowledgeBase.getOptimalNutrients(context.growthStage);\r\n    if (!optimalRanges) {\r\n      return this.getDefaultNutrientStatus();\r\n    }\r\n\r\n    const individual: Record<string, any> = {};\r\n    let optimalCount = 0;\r\n    let totalNutrients = 0;\r\n\r\n    Object.entries(context.nutrients).forEach(([nutrient, value]) => {\r\n      const optimal = optimalRanges[nutrient];\r\n      if (optimal) {\r\n        totalNutrients++;\r\n        const [min, max] = optimal;\r\n        const deviation = this.calculateDeviation(value, min, max);\r\n        \r\n        let status: 'low' | 'optimal' | 'high';\r\n        if (value < min) status = 'low';\r\n        else if (value > max) status = 'high';\r\n        else {\r\n          status = 'optimal';\r\n          optimalCount++;\r\n        }\r\n\r\n        individual[nutrient] = {\r\n          status,\r\n          current: value,\r\n          optimal,\r\n          deviation\r\n        };\r\n      }\r\n    });\r\n\r\n    // Determine overall status\r\n    const optimalPercentage = optimalCount / totalNutrients;\r\n    let overall: 'optimal' | 'suboptimal' | 'deficient' | 'excessive';\r\n    \r\n    if (optimalPercentage >= 0.8) overall = 'optimal';\r\n    else if (optimalPercentage >= 0.6) overall = 'suboptimal';\r\n    else {\r\n      // Check if more nutrients are low or high\r\n      const lowCount = Object.values(individual).filter((n: any) => n.status === 'low').length;\r\n      const highCount = Object.values(individual).filter((n: any) => n.status === 'high').length;\r\n      overall = lowCount > highCount ? 'deficient' : 'excessive';\r\n    }\r\n\r\n    // Analyze EC and pH\r\n    const ecOptimal = optimalRanges.ec || [0.8, 1.6];\r\n    const phOptimal = optimalRanges.ph || [5.8, 6.3];\r\n    \r\n    const ecStatus = this.getStatus(context.nutrients.ec, ecOptimal[0], ecOptimal[1]);\r\n    const phStatus = this.getStatus(context.nutrients.ph, phOptimal[0], phOptimal[1]);\r\n\r\n    return {\r\n      overall,\r\n      individual,\r\n      ecStatus,\r\n      phStatus\r\n    };\r\n  }\r\n\r\n  private analyzeGrowthStage(context: CultivationContext): GrowthStageAnalysis {\r\n    const stageInfo = this.knowledgeBase.getGrowthStageInfo(context.growthStage);\r\n    if (!stageInfo) {\r\n      return this.getDefaultGrowthStageAnalysis(context.growthStage);\r\n    }\r\n\r\n    // Estimate week in stage based on grow week\r\n    const weekInStage = context.growWeek || 1;\r\n    \r\n    // Calculate stage progress (simplified)\r\n    const stageDurations = {\r\n      'seedling': 2,\r\n      'early-veg': 4,\r\n      'late-veg': 6,\r\n      'flowering': 10\r\n    };\r\n    \r\n    const expectedDuration = stageDurations[context.growthStage as keyof typeof stageDurations] || 4;\r\n    const stageProgress = Math.min(weekInStage / expectedDuration, 1);\r\n\r\n    // Determine next stage\r\n    const stageOrder = ['seedling', 'early-veg', 'late-veg', 'flowering'];\r\n    const currentIndex = stageOrder.indexOf(context.growthStage);\r\n    const nextStage = currentIndex < stageOrder.length - 1 ? stageOrder[currentIndex + 1] : undefined;\r\n\r\n    // Check if stage is optimal based on nutrients and environment\r\n    const nutrientStatus = this.analyzeNutrients(context);\r\n    const stageOptimal = nutrientStatus.overall === 'optimal';\r\n\r\n    // Generate transition recommendations\r\n    const transitionRecommendations = this.getTransitionRecommendations(\r\n      context.growthStage,\r\n      stageProgress,\r\n      nextStage\r\n    );\r\n\r\n    return {\r\n      currentStage: context.growthStage,\r\n      weekInStage,\r\n      nextStage,\r\n      stageProgress,\r\n      stageOptimal,\r\n      transitionRecommendations\r\n    };\r\n  }\r\n\r\n  private analyzeEnvironment(context: CultivationContext): EnvironmentalAssessment {\r\n    const environmentalNeeds = this.knowledgeBase.getEnvironmentalNeeds(context.growthStage);\r\n    if (!environmentalNeeds || !context.environmentalData) {\r\n      return {\r\n        temperature: 'unknown',\r\n        humidity: 'unknown',\r\n        lightCycle: 'unknown',\r\n        overallScore: 0.5\r\n      };\r\n    }\r\n\r\n    const { environmentalData } = context;\r\n    const { temperature: tempRange, humidity: humRange } = environmentalNeeds;\r\n\r\n    const temperature = environmentalData.temperature \r\n      ? this.getStatus(environmentalData.temperature, tempRange[0], tempRange[1])\r\n      : 'unknown';\r\n    \r\n    const humidity = environmentalData.humidity\r\n      ? this.getStatus(environmentalData.humidity, humRange[0], humRange[1])\r\n      : 'unknown';\r\n\r\n    const lightCycle = environmentalData.lightCycle === environmentalNeeds.lightCycle\r\n      ? 'correct'\r\n      : environmentalData.lightCycle\r\n        ? 'incorrect'\r\n        : 'unknown';\r\n\r\n    // Calculate overall score\r\n    const scores = [temperature, humidity, lightCycle].map(status => {\r\n      switch (status) {\r\n        case 'optimal':\r\n        case 'correct': return 1;\r\n        case 'low':\r\n        case 'high':\r\n        case 'incorrect': return 0.3;\r\n        default: return 0.5;\r\n      }\r\n    });\r\n\r\n    const overallScore = scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n\r\n    return {\r\n      temperature,\r\n      humidity,\r\n      lightCycle,\r\n      overallScore\r\n    };\r\n  }\r\n\r\n  private generateRecommendations(\r\n    context: CultivationContext,\r\n    nutrientStatus: NutrientStatus,\r\n    growthStageAnalysis: GrowthStageAnalysis\r\n  ): Recommendation[] {\r\n    const recommendations: Recommendation[] = [];\r\n\r\n    // Nutrient recommendations\r\n    Object.entries(nutrientStatus.individual).forEach(([nutrient, status]) => {\r\n      if (status.status !== 'optimal') {\r\n        const priority = Math.abs(status.deviation) > 0.5 ? 'high' : 'medium';\r\n        const action = status.status === 'low' ? 'increase' : 'decrease';\r\n        \r\n        recommendations.push({\r\n          type: 'nutrient',\r\n          priority,\r\n          title: `${action.charAt(0).toUpperCase() + action.slice(1)} ${nutrient.toUpperCase()}`,\r\n          description: `Current ${nutrient.toUpperCase()}: ${status.current}, Optimal: ${status.optimal[0]}-${status.optimal[1]}`,\r\n          reasoning: `${nutrient.toUpperCase()} levels are ${status.status} for ${context.growthStage} stage`,\r\n          timeframe: priority === 'high' ? 'immediate' : 'within_day'\r\n        });\r\n      }\r\n    });\r\n\r\n    // Growth stage recommendations\r\n    if (growthStageAnalysis.stageProgress > 0.8 && growthStageAnalysis.nextStage) {\r\n      recommendations.push({\r\n        type: 'general',\r\n        priority: 'medium',\r\n        title: `Prepare for ${growthStageAnalysis.nextStage}`,\r\n        description: `Consider transitioning to ${growthStageAnalysis.nextStage} stage`,\r\n        reasoning: `Current stage is ${Math.round(growthStageAnalysis.stageProgress * 100)}% complete`,\r\n        timeframe: 'within_week'\r\n      });\r\n    }\r\n\r\n    // Environmental recommendations\r\n    if (context.environmentalData) {\r\n      const envNeeds = this.knowledgeBase.getEnvironmentalNeeds(context.growthStage);\r\n      if (envNeeds) {\r\n        if (context.environmentalData.temperature && \r\n            (context.environmentalData.temperature < envNeeds.temperature[0] || \r\n             context.environmentalData.temperature > envNeeds.temperature[1])) {\r\n          recommendations.push({\r\n            type: 'environmental',\r\n            priority: 'medium',\r\n            title: 'Adjust Temperature',\r\n            description: `Optimal temperature for ${context.growthStage}: ${envNeeds.temperature[0]}-${envNeeds.temperature[1]}°C`,\r\n            reasoning: `Current temperature (${context.environmentalData.temperature}°C) is outside optimal range`,\r\n            timeframe: 'immediate'\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return recommendations.sort((a, b) => {\r\n      const priorityOrder = { critical: 4, high: 3, medium: 2, low: 1 };\r\n      return priorityOrder[b.priority] - priorityOrder[a.priority];\r\n    });\r\n  }\r\n\r\n  private generateAlerts(\r\n    context: CultivationContext,\r\n    nutrientStatus: NutrientStatus,\r\n    environmentalAssessment: EnvironmentalAssessment\r\n  ): Alert[] {\r\n    const alerts: Alert[] = [];\r\n\r\n    // Critical nutrient alerts\r\n    Object.entries(nutrientStatus.individual).forEach(([nutrient, status]) => {\r\n      if (Math.abs(status.deviation) > 0.7) {\r\n        alerts.push({\r\n          type: 'warning',\r\n          severity: 'high',\r\n          title: `Critical ${nutrient.toUpperCase()} ${status.status === 'low' ? 'Deficiency' : 'Excess'}`,\r\n          message: `${nutrient.toUpperCase()} levels are critically ${status.status}. Immediate action required.`,\r\n          dismissible: false\r\n        });\r\n      }\r\n    });\r\n\r\n    // pH alerts\r\n    if (nutrientStatus.phStatus !== 'optimal') {\r\n      const severity = Math.abs(context.nutrients.ph - 6.0) > 1.0 ? 'critical' : 'medium';\r\n      alerts.push({\r\n        type: 'warning',\r\n        severity,\r\n        title: 'pH Out of Range',\r\n        message: `pH (${context.nutrients.ph}) is ${nutrientStatus.phStatus}. This can cause nutrient lockout.`,\r\n        dismissible: severity !== 'critical'\r\n      });\r\n    }\r\n\r\n    // Environmental alerts\r\n    if (environmentalAssessment.overallScore < 0.4) {\r\n      alerts.push({\r\n        type: 'warning',\r\n        severity: 'medium',\r\n        title: 'Environmental Conditions Suboptimal',\r\n        message: 'Multiple environmental parameters are outside optimal ranges.',\r\n        dismissible: true\r\n      });\r\n    }\r\n\r\n    return alerts.sort((a, b) => {\r\n      const severityOrder = { critical: 4, high: 3, medium: 2, low: 1 };\r\n      return severityOrder[b.severity] - severityOrder[a.severity];\r\n    });\r\n  }\r\n\r\n  private calculateOverallConfidence(\r\n    nutrientStatus: NutrientStatus,\r\n    growthStageAnalysis: GrowthStageAnalysis,\r\n    environmentalAssessment: EnvironmentalAssessment\r\n  ): number {\r\n    let confidence = 0.7; // Base confidence\r\n\r\n    // Adjust based on data completeness\r\n    const nutrientCount = Object.keys(nutrientStatus.individual).length;\r\n    if (nutrientCount >= 5) confidence += 0.1;\r\n    if (nutrientCount >= 7) confidence += 0.1;\r\n\r\n    // Adjust based on environmental data availability\r\n    if (environmentalAssessment.overallScore > 0.5) confidence += 0.05;\r\n    if (environmentalAssessment.overallScore === 0.5) confidence -= 0.05; // Unknown data\r\n\r\n    // Adjust based on growth stage certainty\r\n    if (growthStageAnalysis.stageOptimal) confidence += 0.05;\r\n\r\n    return Math.max(0.3, Math.min(0.95, confidence));\r\n  }\r\n\r\n  // Helper methods\r\n  private calculateDeviation(value: number, min: number, max: number): number {\r\n    if (value < min) return (min - value) / min;\r\n    if (value > max) return (value - max) / max;\r\n    return 0;\r\n  }\r\n\r\n  private getStatus(value: number, min: number, max: number): 'low' | 'optimal' | 'high' {\r\n    if (value < min) return 'low';\r\n    if (value > max) return 'high';\r\n    return 'optimal';\r\n  }\r\n\r\n  private getDefaultNutrientStatus(): NutrientStatus {\r\n    return {\r\n      overall: 'suboptimal',\r\n      individual: {},\r\n      ecStatus: 'optimal',\r\n      phStatus: 'optimal'\r\n    };\r\n  }\r\n\r\n  private getDefaultGrowthStageAnalysis(stage: string): GrowthStageAnalysis {\r\n    return {\r\n      currentStage: stage,\r\n      weekInStage: 1,\r\n      stageProgress: 0.1,\r\n      stageOptimal: false\r\n    };\r\n  }\r\n\r\n  private getTransitionRecommendations(\r\n    currentStage: string,\r\n    progress: number,\r\n    nextStage?: string\r\n  ): string[] {\r\n    if (progress < 0.7 || !nextStage) return [];\r\n\r\n    const transitions = {\r\n      'seedling-early-veg': [\r\n        'Gradually increase nutrient strength',\r\n        'Begin monitoring for pest emergence',\r\n        'Prepare for increased water uptake'\r\n      ],\r\n      'early-veg-late-veg': [\r\n        'Increase nitrogen levels',\r\n        'Consider training techniques',\r\n        'Monitor for pre-flower signs'\r\n      ],\r\n      'late-veg-flowering': [\r\n        'Switch to 12/12 light cycle',\r\n        'Reduce nitrogen, increase P-K',\r\n        'Lower humidity to prevent mold'\r\n      ]\r\n    };\r\n\r\n    const transitionKey = `${currentStage}-${nextStage}` as keyof typeof transitions;\r\n    return transitions[transitionKey] || [];\r\n  }\r\n}\r\n","import { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { CannabisKnowledgeBase } from './CannabisKnowledgeBase';\r\nimport { AIContextEngine } from './AIContextEngine';\r\n\r\n// AI Provider Types\r\nexport type AIProvider = 'gemini' | 'openai' | 'claude';\r\n\r\nexport interface AIMessage {\r\n  id: string;\r\n  role: 'user' | 'assistant' | 'system';\r\n  content: string;\r\n  timestamp: number;\r\n  context?: CultivationContext;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface CultivationContext {\r\n  nutrients: Record<string, number>;\r\n  growthStage: string;\r\n  waterType: string;\r\n  waterVolume: number;\r\n  selectedFertilizers: any[];\r\n  environmentalData?: {\r\n    temperature?: number;\r\n    humidity?: number;\r\n    lightCycle?: string;\r\n    ph?: number;\r\n    ec?: number;\r\n  };\r\n  userLevel: 'beginner' | 'intermediate' | 'expert';\r\n  language: 'de' | 'en';\r\n  growWeek?: number;\r\n  strainType?: 'indica' | 'sativa' | 'hybrid';\r\n}\r\n\r\nexport interface AIResponse {\r\n  message: string;\r\n  confidence: number;\r\n  suggestions?: string[];\r\n  actions?: AIAction[];\r\n  warnings?: string[];\r\n  followUpQuestions?: string[];\r\n}\r\n\r\nexport interface AIAction {\r\n  type: 'adjust_nutrients' | 'change_ph' | 'modify_schedule' | 'environmental_change';\r\n  description: string;\r\n  parameters: Record<string, any>;\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n}\r\n\r\nclass AIAssistantService {\r\n  private geminiAI: GoogleGenerativeAI;\r\n  private conversationHistory: Map<string, AIMessage[]> = new Map();\r\n  private knowledgeBase: CannabisKnowledgeBase;\r\n  private contextEngine: AIContextEngine;\r\n\r\n  constructor(apiKey: string) {\r\n    this.geminiAI = new GoogleGenerativeAI(apiKey);\r\n    this.knowledgeBase = new CannabisKnowledgeBase();\r\n    this.contextEngine = new AIContextEngine();\r\n  }\r\n\r\n  async sendMessage(\r\n    message: string,\r\n    context: CultivationContext,\r\n    sessionId: string = 'default'\r\n  ): Promise<AIResponse> {\r\n    try {\r\n      // Get conversation history\r\n      const history = this.conversationHistory.get(sessionId) || [];\r\n      \r\n      // Create user message\r\n      const userMessage: AIMessage = {\r\n        id: this.generateId(),\r\n        role: 'user',\r\n        content: message,\r\n        timestamp: Date.now(),\r\n        context\r\n      };\r\n\r\n      // Add to history\r\n      history.push(userMessage);\r\n\r\n      // Generate AI response\r\n      const aiResponse = await this.generateResponse(message, context, history);\r\n\r\n      // Create assistant message\r\n      const assistantMessage: AIMessage = {\r\n        id: this.generateId(),\r\n        role: 'assistant',\r\n        content: aiResponse.message,\r\n        timestamp: Date.now(),\r\n        context,\r\n        metadata: {\r\n          confidence: aiResponse.confidence,\r\n          suggestions: aiResponse.suggestions,\r\n          actions: aiResponse.actions\r\n        }\r\n      };\r\n\r\n      // Update history\r\n      history.push(assistantMessage);\r\n      this.conversationHistory.set(sessionId, history.slice(-20)); // Keep last 20 messages\r\n\r\n      return aiResponse;\r\n    } catch (error) {\r\n      console.error('AI Assistant Error:', error);\r\n      return this.getFallbackResponse(context);\r\n    }\r\n  }\r\n\r\n  private async generateResponse(\r\n    message: string,\r\n    context: CultivationContext,\r\n    history: AIMessage[]\r\n  ): Promise<AIResponse> {\r\n    // Build comprehensive prompt\r\n    const prompt = this.buildPrompt(message, context, history);\r\n    \r\n    // Get AI response\r\n    const model = this.geminiAI.getGenerativeModel({ model: 'gemini-pro' });\r\n    const result = await model.generateContent(prompt);\r\n    const response = result.response.text();\r\n\r\n    // Parse and enhance response\r\n    return this.parseAIResponse(response, context);\r\n  }\r\n\r\n  private buildPrompt(\r\n    message: string,\r\n    context: CultivationContext,\r\n    history: AIMessage[]\r\n  ): string {\r\n    const systemPrompt = this.getSystemPrompt(context);\r\n    const contextPrompt = this.buildContextPrompt(context);\r\n    const historyPrompt = this.buildHistoryPrompt(history);\r\n    \r\n    return `${systemPrompt}\r\n\r\n${contextPrompt}\r\n\r\n${historyPrompt}\r\n\r\nUser Question: ${message}\r\n\r\nPlease provide a helpful, accurate response in ${context.language === 'de' ? 'German' : 'English'}.`;\r\n  }\r\n\r\n  private getSystemPrompt(context: CultivationContext): string {\r\n    const basePrompt = context.language === 'de' ? \r\n      `Du bist ein erfahrener Cannabis-Anbau-Experte und Nährstoff-Spezialist. Du hilfst Nutzern bei allen Aspekten des Cannabis-Anbaus, von der Keimung bis zur Ernte.` :\r\n      `You are an expert cannabis cultivation specialist and nutrient expert. You help users with all aspects of cannabis growing, from germination to harvest.`;\r\n\r\n    const levelPrompt = {\r\n      beginner: context.language === 'de' ? \r\n        'Erkläre Konzepte einfach und vermeide zu viel Fachjargon.' :\r\n        'Explain concepts simply and avoid too much technical jargon.',\r\n      intermediate: context.language === 'de' ? \r\n        'Gib detaillierte Erklärungen mit praktischen Tipps.' :\r\n        'Provide detailed explanations with practical tips.',\r\n      expert: context.language === 'de' ? \r\n        'Verwende Fachterminologie und gib präzise, technische Antworten.' :\r\n        'Use technical terminology and provide precise, technical answers.'\r\n    };\r\n\r\n    return `${basePrompt} ${levelPrompt[context.userLevel]}\r\n\r\nYour expertise includes:\r\n- Nutrient management and deficiency diagnosis\r\n- Growth stage optimization\r\n- Environmental control\r\n- Pest and disease management\r\n- Harvest timing and techniques\r\n- Strain-specific guidance\r\n\r\nAlways provide actionable advice and explain the reasoning behind your recommendations.`;\r\n  }\r\n\r\n  private buildContextPrompt(context: CultivationContext): string {\r\n    const nutrients = Object.entries(context.nutrients)\r\n      .map(([key, value]) => `${key.toUpperCase()}: ${value}`)\r\n      .join(', ');\r\n\r\n    return `Current Cultivation Context:\r\n- Growth Stage: ${context.growthStage}\r\n- Water Volume: ${context.waterVolume}L\r\n- Water Type: ${context.waterType}\r\n- Current Nutrients: ${nutrients}\r\n- User Level: ${context.userLevel}\r\n- Language: ${context.language}\r\n${context.growWeek ? `- Grow Week: ${context.growWeek}` : ''}\r\n${context.strainType ? `- Strain Type: ${context.strainType}` : ''}\r\n${context.environmentalData ? `- Environmental: ${JSON.stringify(context.environmentalData)}` : ''}`;\r\n  }\r\n\r\n  private buildHistoryPrompt(history: AIMessage[]): string {\r\n    if (history.length === 0) return '';\r\n\r\n    const recentHistory = history.slice(-6); // Last 3 exchanges\r\n    const historyText = recentHistory\r\n      .map(msg => `${msg.role}: ${msg.content}`)\r\n      .join('\\n');\r\n\r\n    return `Recent Conversation:\\n${historyText}\\n`;\r\n  }\r\n\r\n  private parseAIResponse(response: string, context: CultivationContext): AIResponse {\r\n    // Extract structured information from AI response\r\n    const confidence = this.calculateConfidence(response);\r\n    const suggestions = this.extractSuggestions(response);\r\n    const actions = this.extractActions(response, context);\r\n    const warnings = this.extractWarnings(response);\r\n    const followUpQuestions = this.generateFollowUpQuestions(response, context);\r\n\r\n    return {\r\n      message: response,\r\n      confidence,\r\n      suggestions,\r\n      actions,\r\n      warnings,\r\n      followUpQuestions\r\n    };\r\n  }\r\n\r\n  private calculateConfidence(response: string): number {\r\n    // Simple confidence calculation based on response characteristics\r\n    let confidence = 0.7; // Base confidence\r\n\r\n    // Increase confidence for specific indicators\r\n    if (response.includes('recommend') || response.includes('suggest')) confidence += 0.1;\r\n    if (response.includes('optimal') || response.includes('ideal')) confidence += 0.1;\r\n    if (response.includes('experience') || response.includes('typically')) confidence += 0.05;\r\n    \r\n    // Decrease confidence for uncertainty indicators\r\n    if (response.includes('might') || response.includes('could')) confidence -= 0.1;\r\n    if (response.includes('uncertain') || response.includes('depends')) confidence -= 0.15;\r\n\r\n    return Math.max(0.3, Math.min(0.95, confidence));\r\n  }\r\n\r\n  private extractSuggestions(response: string): string[] {\r\n    // Extract actionable suggestions from response\r\n    const suggestions: string[] = [];\r\n    \r\n    // Look for numbered lists or bullet points\r\n    const listMatches = response.match(/(?:^\\d+\\.|^[-*])\\s*(.+)$/gm);\r\n    if (listMatches) {\r\n      suggestions.push(...listMatches.map(match => match.replace(/^(?:\\d+\\.|[-*])\\s*/, '')));\r\n    }\r\n\r\n    // Look for \"I recommend\" or \"I suggest\" patterns\r\n    const recommendMatches = response.match(/(?:I recommend|I suggest|Consider|Try)\\s+([^.!?]+)/gi);\r\n    if (recommendMatches) {\r\n      suggestions.push(...recommendMatches.map(match => match.replace(/^(?:I recommend|I suggest|Consider|Try)\\s+/i, '')));\r\n    }\r\n\r\n    return suggestions.slice(0, 5); // Limit to 5 suggestions\r\n  }\r\n\r\n  private extractActions(response: string, context: CultivationContext): AIAction[] {\r\n    const actions: AIAction[] = [];\r\n\r\n    // Look for specific action patterns\r\n    if (response.toLowerCase().includes('adjust') && response.toLowerCase().includes('nutrient')) {\r\n      actions.push({\r\n        type: 'adjust_nutrients',\r\n        description: 'Adjust nutrient levels based on recommendation',\r\n        parameters: { context },\r\n        priority: 'medium'\r\n      });\r\n    }\r\n\r\n    if (response.toLowerCase().includes('ph') && (response.toLowerCase().includes('lower') || response.toLowerCase().includes('raise'))) {\r\n      actions.push({\r\n        type: 'change_ph',\r\n        description: 'Adjust pH levels',\r\n        parameters: { context },\r\n        priority: 'high'\r\n      });\r\n    }\r\n\r\n    return actions;\r\n  }\r\n\r\n  private extractWarnings(response: string): string[] {\r\n    const warnings: string[] = [];\r\n    \r\n    // Look for warning indicators\r\n    const warningPatterns = [\r\n      /(?:warning|caution|careful|avoid|dangerous?|critical|urgent)/gi,\r\n      /(?:too high|too low|excessive|deficient|toxic)/gi\r\n    ];\r\n\r\n    warningPatterns.forEach(pattern => {\r\n      const matches = response.match(pattern);\r\n      if (matches && matches.length > 0) {\r\n        // Extract sentences containing warnings\r\n        const sentences = response.split(/[.!?]+/);\r\n        sentences.forEach(sentence => {\r\n          if (pattern.test(sentence)) {\r\n            warnings.push(sentence.trim());\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return [...new Set(warnings)].slice(0, 3); // Remove duplicates and limit\r\n  }\r\n\r\n  private generateFollowUpQuestions(response: string, context: CultivationContext): string[] {\r\n    const questions: string[] = [];\r\n    \r\n    // Generate contextual follow-up questions\r\n    if (context.growthStage === 'seedling') {\r\n      questions.push(\r\n        context.language === 'de' ? \r\n          'Wie oft sollte ich in der Keimphase gießen?' :\r\n          'How often should I water during the seedling stage?'\r\n      );\r\n    }\r\n\r\n    if (context.nutrients.n > 200) {\r\n      questions.push(\r\n        context.language === 'de' ? \r\n          'Sind meine Stickstoffwerte zu hoch?' :\r\n          'Are my nitrogen levels too high?'\r\n      );\r\n    }\r\n\r\n    if (context.userLevel === 'beginner') {\r\n      questions.push(\r\n        context.language === 'de' ? \r\n          'Was sind die häufigsten Anfängerfehler?' :\r\n          'What are the most common beginner mistakes?'\r\n      );\r\n    }\r\n\r\n    return questions.slice(0, 3);\r\n  }\r\n\r\n  private getFallbackResponse(context: CultivationContext): AIResponse {\r\n    const message = context.language === 'de' ? \r\n      'Entschuldigung, ich konnte Ihre Anfrage nicht verarbeiten. Bitte versuchen Sie es erneut oder stellen Sie eine spezifischere Frage.' :\r\n      'Sorry, I couldn\\'t process your request. Please try again or ask a more specific question.';\r\n\r\n    return {\r\n      message,\r\n      confidence: 0.1,\r\n      suggestions: [],\r\n      actions: [],\r\n      warnings: [],\r\n      followUpQuestions: []\r\n    };\r\n  }\r\n\r\n  private generateId(): string {\r\n    return Math.random().toString(36).substring(2) + Date.now().toString(36);\r\n  }\r\n\r\n  // Public methods for conversation management\r\n  getConversationHistory(sessionId: string): AIMessage[] {\r\n    return this.conversationHistory.get(sessionId) || [];\r\n  }\r\n\r\n  clearConversationHistory(sessionId: string): void {\r\n    this.conversationHistory.delete(sessionId);\r\n  }\r\n\r\n  exportConversation(sessionId: string): string {\r\n    const history = this.getConversationHistory(sessionId);\r\n    return JSON.stringify(history, null, 2);\r\n  }\r\n}\r\n\r\nexport default AIAssistantService;\r\n","import { useState, useEffect, useCallback, useRef } from 'react';\r\nimport AIAssistantService, { \r\n  AIMessage, \r\n  AIResponse, \r\n  CultivationContext,\r\n  AIAction \r\n} from '../services/AIAssistantService';\r\nimport { AIContextEngine, ContextAnalysis } from '../services/AIContextEngine';\r\nimport { useToasts } from '../contexts/ToastContext';\r\n\r\ninterface UseAIAssistantOptions {\r\n  apiKey?: string;\r\n  sessionId?: string;\r\n  autoAnalyze?: boolean;\r\n  enableProactiveAlerts?: boolean;\r\n}\r\n\r\ninterface UseAIAssistantReturn {\r\n  // Chat functionality\r\n  messages: AIMessage[];\r\n  isLoading: boolean;\r\n  sendMessage: (message: string, context: CultivationContext) => Promise<AIResponse>;\r\n  clearHistory: () => void;\r\n  exportConversation: () => string;\r\n  \r\n  // Context analysis\r\n  contextAnalysis: ContextAnalysis | null;\r\n  analyzeContext: (context: CultivationContext) => Promise<ContextAnalysis>;\r\n  \r\n  // Proactive features\r\n  hasActiveAlerts: boolean;\r\n  hasUnreadMessages: boolean;\r\n  activeRecommendations: Array<{\r\n    type: string;\r\n    priority: string;\r\n    description: string;\r\n  }>;\r\n\r\n  // Assistant state\r\n  isEnabled: boolean;\r\n  setEnabled: (enabled: boolean) => void;\r\n  \r\n  // Error handling\r\n  error: string | null;\r\n  clearError: () => void;\r\n}\r\n\r\nexport const useAIAssistant = (options: UseAIAssistantOptions = {}): UseAIAssistantReturn => {\r\n  const {\r\n    apiKey,\r\n    sessionId = 'default',\r\n    autoAnalyze = true,\r\n    enableProactiveAlerts = true\r\n  } = options;\r\n\r\n  // State\r\n  const [messages, setMessages] = useState<AIMessage[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [contextAnalysis, setContextAnalysis] = useState<ContextAnalysis | null>(null);\r\n  const [hasActiveAlerts, setHasActiveAlerts] = useState(false);\r\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\r\n  const [activeRecommendations, setActiveRecommendations] = useState<any[]>([]);\r\n  const [isEnabled, setEnabled] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Services\r\n  const aiServiceRef = useRef<AIAssistantService | null>(null);\r\n  const contextEngineRef = useRef<AIContextEngine | null>(null);\r\n  const lastContextRef = useRef<CultivationContext | null>(null);\r\n  const { addToast } = useToasts();\r\n\r\n  // Initialize services\r\n  useEffect(() => {\r\n    if (!isEnabled) return;\r\n\r\n    try {\r\n      const storedApiKey = apiKey || localStorage.getItem('gemini-api-key');\r\n      if (!storedApiKey) {\r\n        setError('AI Assistant requires an API key. Please configure it in settings.');\r\n        return;\r\n      }\r\n\r\n      aiServiceRef.current = new AIAssistantService(storedApiKey);\r\n      contextEngineRef.current = new AIContextEngine();\r\n      \r\n      // Load existing conversation\r\n      const existingMessages = aiServiceRef.current.getConversationHistory(sessionId);\r\n      setMessages(existingMessages);\r\n      \r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to initialize AI Assistant');\r\n      console.error('AI Assistant initialization error:', err);\r\n    }\r\n  }, [apiKey, sessionId, isEnabled]);\r\n\r\n  // Send message function\r\n  const sendMessage = useCallback(async (\r\n    message: string, \r\n    context: CultivationContext\r\n  ): Promise<AIResponse> => {\r\n    if (!aiServiceRef.current || !isEnabled) {\r\n      throw new Error('AI Assistant not available');\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await aiServiceRef.current.sendMessage(message, context, sessionId);\r\n      \r\n      // Update messages from service\r\n      const updatedMessages = aiServiceRef.current.getConversationHistory(sessionId);\r\n      setMessages(updatedMessages);\r\n      \r\n      // Handle AI actions\r\n      if (response.actions && response.actions.length > 0) {\r\n        handleAIActions(response.actions, context);\r\n      }\r\n      \r\n      // Show warnings as toasts\r\n      if (response.warnings && response.warnings.length > 0) {\r\n        response.warnings.forEach(warning => {\r\n          addToast(warning, 'warning');\r\n        });\r\n      }\r\n\r\n      setHasUnreadMessages(false); // Mark as read when user sends message\r\n      return response;\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\r\n      setError(errorMessage);\r\n      addToast(errorMessage, 'error');\r\n      throw err;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [sessionId, isEnabled, addToast]);\r\n\r\n  // Analyze context function\r\n  const analyzeContext = useCallback(async (\r\n    context: CultivationContext\r\n  ): Promise<ContextAnalysis> => {\r\n    if (!contextEngineRef.current || !isEnabled) {\r\n      throw new Error('Context engine not available');\r\n    }\r\n\r\n    try {\r\n      const analysis = contextEngineRef.current.analyzeContext(context);\r\n      setContextAnalysis(analysis);\r\n      \r\n      // Update alerts and recommendations\r\n      setHasActiveAlerts(analysis.alerts.some(alert => alert.severity === 'high' || alert.severity === 'critical'));\r\n      setActiveRecommendations(analysis.recommendations.filter(rec => rec.priority === 'high' || rec.priority === 'critical'));\r\n      \r\n      // Store context for proactive monitoring\r\n      lastContextRef.current = context;\r\n      \r\n      return analysis;\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to analyze context';\r\n      setError(errorMessage);\r\n      throw err;\r\n    }\r\n  }, [isEnabled]);\r\n\r\n  // Handle AI actions\r\n  const handleAIActions = useCallback((actions: AIAction[], context: CultivationContext) => {\r\n    actions.forEach(action => {\r\n      switch (action.type) {\r\n        case 'adjust_nutrients':\r\n          addToast(\r\n            context.language === 'de'\r\n              ? 'AI empfiehlt Nährstoff-Anpassungen'\r\n              : 'AI recommends nutrient adjustments',\r\n            'info'\r\n          );\r\n          break;\r\n        case 'change_ph':\r\n          addToast(\r\n            context.language === 'de'\r\n              ? 'pH-Anpassung empfohlen'\r\n              : 'pH adjustment recommended',\r\n            action.priority === 'critical' ? 'warning' : 'info'\r\n          );\r\n          break;\r\n        case 'environmental_change':\r\n          addToast(\r\n            context.language === 'de'\r\n              ? 'Umgebungsanpassung empfohlen'\r\n              : 'Environmental adjustment recommended',\r\n            'info'\r\n          );\r\n          break;\r\n        default:\r\n          // Handle other action types\r\n          break;\r\n      }\r\n    });\r\n  }, [addToast]);\r\n\r\n  // Proactive monitoring\r\n  useEffect(() => {\r\n    if (!enableProactiveAlerts || !isEnabled || !lastContextRef.current) return;\r\n\r\n    const checkForProactiveAlerts = async () => {\r\n      try {\r\n        const analysis = await analyzeContext(lastContextRef.current!);\r\n        \r\n        // Check for critical issues that warrant proactive messages\r\n        const criticalAlerts = analysis.alerts.filter(alert => \r\n          alert.severity === 'critical' && !alert.dismissible\r\n        );\r\n        \r\n        if (criticalAlerts.length > 0 && aiServiceRef.current) {\r\n          // Generate proactive message\r\n          const proactiveMessage = criticalAlerts.length === 1\r\n            ? `Critical issue detected: ${criticalAlerts[0].message}`\r\n            : `${criticalAlerts.length} critical issues detected. Please check your setup.`;\r\n          \r\n          // Add system message\r\n          const systemMessage: AIMessage = {\r\n            id: `system-${Date.now()}`,\r\n            role: 'assistant',\r\n            content: proactiveMessage,\r\n            timestamp: Date.now(),\r\n            context: lastContextRef.current,\r\n            metadata: {\r\n              isProactive: true,\r\n              alerts: criticalAlerts\r\n            }\r\n          };\r\n          \r\n          setMessages(prev => [...prev, systemMessage]);\r\n          setHasUnreadMessages(true);\r\n        }\r\n      } catch (err) {\r\n        console.warn('Proactive monitoring error:', err);\r\n      }\r\n    };\r\n\r\n    // Check every 5 minutes\r\n    const interval = window.setInterval(checkForProactiveAlerts, 5 * 60 * 1000);\r\n    return () => window.clearInterval(interval);\r\n  }, [enableProactiveAlerts, isEnabled, analyzeContext]);\r\n\r\n  // Auto-analyze context when it changes\r\n  useEffect(() => {\r\n    if (autoAnalyze && lastContextRef.current && contextEngineRef.current && isEnabled) {\r\n      analyzeContext(lastContextRef.current).catch(console.warn);\r\n    }\r\n  }, [autoAnalyze, isEnabled, analyzeContext]);\r\n\r\n  // Clear functions\r\n  const clearHistory = useCallback(() => {\r\n    if (aiServiceRef.current) {\r\n      aiServiceRef.current.clearConversationHistory(sessionId);\r\n      setMessages([]);\r\n      setHasUnreadMessages(false);\r\n    }\r\n  }, [sessionId]);\r\n\r\n  const exportConversation = useCallback((): string => {\r\n    if (!aiServiceRef.current) return '';\r\n    return aiServiceRef.current.exportConversation(sessionId);\r\n  }, [sessionId]);\r\n\r\n  const clearError = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  // Cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      // Cleanup if needed\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    // Chat functionality\r\n    messages,\r\n    isLoading,\r\n    sendMessage,\r\n    clearHistory,\r\n    exportConversation,\r\n    \r\n    // Context analysis\r\n    contextAnalysis,\r\n    analyzeContext,\r\n    \r\n    // Proactive features\r\n    hasActiveAlerts,\r\n    hasUnreadMessages,\r\n    activeRecommendations,\r\n    \r\n    // Assistant state\r\n    isEnabled,\r\n    setEnabled,\r\n    \r\n    // Error handling\r\n    error,\r\n    clearError\r\n  };\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { cn } from '../../utils/cn';\r\nimport { CultivationContext } from '../../services/AIAssistantService';\r\nimport Button from '../Button';\r\n\r\ninterface FloatingChatWidgetProps {\r\n  onClick: () => void;\r\n  context: CultivationContext;\r\n  hasUnreadMessages?: boolean;\r\n  hasActiveAlerts?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst FloatingChatWidget: React.FC<FloatingChatWidgetProps> = ({\r\n  onClick,\r\n  context,\r\n  hasUnreadMessages = false,\r\n  hasActiveAlerts = false,\r\n  className\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  const [isPulsing, setIsPulsing] = useState(false);\r\n  const [showTooltip, setShowTooltip] = useState(false);\r\n\r\n  // Auto-hide on mobile when scrolling\r\n  useEffect(() => {\r\n    let lastScrollY = window.scrollY;\r\n    let ticking = false;\r\n\r\n    const updateScrollDirection = () => {\r\n      const scrollY = window.scrollY;\r\n      \r\n      if (Math.abs(scrollY - lastScrollY) < 10) {\r\n        ticking = false;\r\n        return;\r\n      }\r\n      \r\n      setIsVisible(scrollY <= lastScrollY || scrollY < 100);\r\n      lastScrollY = scrollY > 0 ? scrollY : 0;\r\n      ticking = false;\r\n    };\r\n\r\n    const requestTick = () => {\r\n      if (!ticking) {\r\n        window.requestAnimationFrame(updateScrollDirection);\r\n        ticking = true;\r\n      }\r\n    };\r\n\r\n    const handleScroll = () => requestTick();\r\n\r\n    // Only add scroll listener on mobile\r\n    if (window.innerWidth < 768) {\r\n      window.addEventListener('scroll', handleScroll);\r\n    }\r\n\r\n    return () => {\r\n      if (window.innerWidth < 768) {\r\n        window.removeEventListener('scroll', handleScroll);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Pulse animation for alerts\r\n  useEffect(() => {\r\n    if (hasActiveAlerts) {\r\n      setIsPulsing(true);\r\n      const timer = setTimeout(() => setIsPulsing(false), 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [hasActiveAlerts]);\r\n\r\n  // Show tooltip on first visit\r\n  useEffect(() => {\r\n    const hasSeenTooltip = localStorage.getItem('ai-assistant-tooltip-seen');\r\n    if (!hasSeenTooltip) {\r\n      setShowTooltip(true);\r\n      const timer = setTimeout(() => {\r\n        setShowTooltip(false);\r\n        localStorage.setItem('ai-assistant-tooltip-seen', 'true');\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, []);\r\n\r\n  const getStatusColor = () => {\r\n    if (hasActiveAlerts) return 'bg-red-500';\r\n    if (hasUnreadMessages) return 'bg-orange-500';\r\n    return 'bg-emerald-500';\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (hasActiveAlerts) return '⚠️';\r\n    if (hasUnreadMessages) return '💬';\r\n    return '🤖';\r\n  };\r\n\r\n  const getTooltipText = () => {\r\n    if (hasActiveAlerts) {\r\n      return context.language === 'de' \r\n        ? 'Wichtige Warnungen verfügbar!'\r\n        : 'Important alerts available!';\r\n    }\r\n    if (hasUnreadMessages) {\r\n      return context.language === 'de'\r\n        ? 'Neue Nachrichten vom Assistenten'\r\n        : 'New messages from assistant';\r\n    }\r\n    return context.language === 'de'\r\n      ? 'Fragen Sie den Anbau-Experten'\r\n      : 'Ask the grow expert';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Floating button */}\r\n      <div\r\n        className={cn(\r\n          'fixed bottom-4 right-4 z-40 transition-all duration-300',\r\n          'md:bottom-6 md:right-6',\r\n          isVisible ? 'translate-y-0 opacity-100' : 'translate-y-16 opacity-0',\r\n          className\r\n        )}\r\n      >\r\n        <div className=\"relative\">\r\n          {/* Tooltip */}\r\n          {showTooltip && (\r\n            <div className={cn(\r\n              'absolute bottom-full right-0 mb-2 px-3 py-2',\r\n              'bg-stone-900 text-white text-sm rounded-lg shadow-lg',\r\n              'whitespace-nowrap max-w-xs',\r\n              'animate-in slide-in-from-bottom-2 fade-in duration-300'\r\n            )}>\r\n              {getTooltipText()}\r\n              <div className=\"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-stone-900\" />\r\n            </div>\r\n          )}\r\n\r\n          {/* Main button */}\r\n          <Button\r\n            onClick={onClick}\r\n            className={cn(\r\n              'w-14 h-14 rounded-full shadow-lg hover:shadow-xl',\r\n              'transition-all duration-200 hover:scale-105',\r\n              'focus:outline-none focus:ring-4 focus:ring-emerald-500/20',\r\n              getStatusColor(),\r\n              isPulsing && 'animate-pulse'\r\n            )}\r\n            aria-label={\r\n              context.language === 'de' \r\n                ? 'AI-Anbau-Assistenten öffnen'\r\n                : 'Open AI grow assistant'\r\n            }\r\n          >\r\n            <span className=\"text-xl\">{getStatusIcon()}</span>\r\n          </Button>\r\n\r\n          {/* Notification badges */}\r\n          {(hasUnreadMessages || hasActiveAlerts) && (\r\n            <div className={cn(\r\n              'absolute -top-1 -right-1 w-5 h-5 rounded-full',\r\n              'flex items-center justify-center text-xs font-bold text-white',\r\n              hasActiveAlerts ? 'bg-red-600' : 'bg-orange-600',\r\n              'animate-in zoom-in duration-200'\r\n            )}>\r\n              {hasActiveAlerts ? '!' : '●'}\r\n            </div>\r\n          )}\r\n\r\n          {/* Pulse ring for alerts */}\r\n          {hasActiveAlerts && (\r\n            <div className={cn(\r\n              'absolute inset-0 rounded-full',\r\n              'bg-red-500 opacity-20 animate-ping'\r\n            )} />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick action hints (mobile only) */}\r\n      {isVisible && (hasActiveAlerts || hasUnreadMessages) && (\r\n        <div className={cn(\r\n          'fixed bottom-20 right-4 z-30',\r\n          'md:hidden', // Only show on mobile\r\n          'animate-in slide-in-from-bottom-2 fade-in duration-500'\r\n        )}>\r\n          <div className={cn(\r\n            'bg-white dark:bg-slate-800 rounded-lg shadow-lg border',\r\n            'px-3 py-2 text-sm max-w-xs'\r\n          )}>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-lg\">{getStatusIcon()}</span>\r\n              <span className=\"text-stone-700 dark:text-slate-300\">\r\n                {hasActiveAlerts \r\n                  ? (context.language === 'de' ? 'Warnungen prüfen' : 'Check alerts')\r\n                  : (context.language === 'de' ? 'Neue Tipps verfügbar' : 'New tips available')\r\n                }\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FloatingChatWidget;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { cn } from '../../utils/cn';\r\nimport { AIMessage, AIResponse, CultivationContext } from '../../services/AIAssistantService';\r\nimport Button from '../Button';\r\nimport { Card } from '../Card';\r\n\r\ninterface ChatInterfaceProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSendMessage: (message: string, context: CultivationContext) => Promise<AIResponse>;\r\n  context: CultivationContext;\r\n  messages: AIMessage[];\r\n  isLoading: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst ChatInterface: React.FC<ChatInterfaceProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSendMessage,\r\n  context,\r\n  messages,\r\n  isLoading,\r\n  className\r\n}) => {\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const message = inputMessage.trim();\r\n    setInputMessage('');\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      await onSendMessage(message, context);\r\n    } catch (error) {\r\n      console.error('Failed to send message:', error);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const formatMessage = (content: string) => {\r\n    // Simple markdown-like formatting\r\n    return content\r\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\r\n      .replace(/`(.*?)`/g, '<code class=\"bg-stone-100 px-1 rounded text-sm\">$1</code>')\r\n      .replace(/\\n/g, '<br>');\r\n  };\r\n\r\n  const getSuggestionButtons = () => {\r\n    const suggestions = [\r\n      context.language === 'de' ? 'Wie sind meine aktuellen Nährstoffwerte?' : 'How are my current nutrient levels?',\r\n      context.language === 'de' ? 'Was sollte ich in dieser Wachstumsphase beachten?' : 'What should I focus on in this growth stage?',\r\n      context.language === 'de' ? 'Gibt es Probleme mit meiner Konfiguration?' : 'Are there any issues with my setup?',\r\n      context.language === 'de' ? 'Wann sollte ich zur nächsten Phase wechseln?' : 'When should I transition to the next stage?'\r\n    ];\r\n\r\n    return suggestions.slice(0, 2); // Show only 2 suggestions to save space\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className={cn(\r\n      'fixed inset-0 z-50 flex items-end justify-end p-4',\r\n      'md:inset-auto md:bottom-4 md:right-4 md:w-96 md:h-[600px]',\r\n      className\r\n    )}>\r\n      {/* Mobile backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black bg-opacity-50 md:hidden\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Chat container */}\r\n      <Card className={cn(\r\n        'w-full h-full max-h-[80vh] flex flex-col',\r\n        'md:w-96 md:h-[600px] md:max-h-none',\r\n        'bg-white dark:bg-slate-800 shadow-xl border-0 md:border'\r\n      )}>\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-stone-200 dark:border-slate-700\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-8 h-8 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center\">\r\n              <span className=\"text-white font-bold text-sm\">🤖</span>\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-stone-900 dark:text-slate-100\">\r\n                {context.language === 'de' ? 'Anbau-Assistent' : 'Grow Assistant'}\r\n              </h3>\r\n              <p className=\"text-xs text-stone-600 dark:text-slate-400\">\r\n                {context.language === 'de' ? 'Cannabis Experte' : 'Cannabis Expert'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={onClose}\r\n            className=\"p-2\"\r\n            aria-label={context.language === 'de' ? 'Chat schließen' : 'Close chat'}\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Messages */}\r\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n          {messages.length === 0 && (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"w-16 h-16 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <span className=\"text-2xl\">🌱</span>\r\n              </div>\r\n              <h4 className=\"font-medium text-stone-900 dark:text-slate-100 mb-2\">\r\n                {context.language === 'de' ? 'Willkommen!' : 'Welcome!'}\r\n              </h4>\r\n              <p className=\"text-sm text-stone-600 dark:text-slate-400 mb-4\">\r\n                {context.language === 'de' \r\n                  ? 'Ich bin Ihr persönlicher Cannabis-Anbau-Experte. Fragen Sie mich alles über Nährstoffe, Wachstumsphasen und Anbautechniken.'\r\n                  : 'I\\'m your personal cannabis cultivation expert. Ask me anything about nutrients, growth stages, and growing techniques.'\r\n                }\r\n              </p>\r\n              \r\n              {/* Suggestion buttons */}\r\n              <div className=\"space-y-2\">\r\n                {getSuggestionButtons().map((suggestion, index) => (\r\n                  <Button\r\n                    key={index}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => setInputMessage(suggestion)}\r\n                    className=\"w-full text-left justify-start text-xs\"\r\n                  >\r\n                    {suggestion}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              className={cn(\r\n                'flex',\r\n                message.role === 'user' ? 'justify-end' : 'justify-start'\r\n              )}\r\n            >\r\n              <div\r\n                className={cn(\r\n                  'max-w-[80%] rounded-lg px-3 py-2 text-sm',\r\n                  message.role === 'user'\r\n                    ? 'bg-emerald-600 text-white'\r\n                    : 'bg-stone-100 dark:bg-slate-700 text-stone-900 dark:text-slate-100'\r\n                )}\r\n              >\r\n                <div\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: formatMessage(message.content)\r\n                  }}\r\n                />\r\n                \r\n                {/* Show suggestions for assistant messages */}\r\n                {message.role === 'assistant' && message.metadata?.suggestions && (\r\n                  <div className=\"mt-2 space-y-1\">\r\n                    {message.metadata.suggestions.slice(0, 2).map((suggestion: string, index: number) => (\r\n                      <Button\r\n                        key={index}\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => setInputMessage(suggestion)}\r\n                        className=\"w-full text-left justify-start text-xs p-1 h-auto\"\r\n                      >\r\n                        💡 {suggestion}\r\n                      </Button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {/* Typing indicator */}\r\n          {(isLoading || isTyping) && (\r\n            <div className=\"flex justify-start\">\r\n              <div className=\"bg-stone-100 dark:bg-slate-700 rounded-lg px-3 py-2\">\r\n                <div className=\"flex space-x-1\">\r\n                  <div className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }} />\r\n                  <div className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }} />\r\n                  <div className=\"w-2 h-2 bg-stone-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <div className=\"p-4 border-t border-stone-200 dark:border-slate-700\">\r\n          <div className=\"flex space-x-2\">\r\n            <input\r\n              ref={inputRef}\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              onKeyPress={handleKeyPress}\r\n              placeholder={\r\n                context.language === 'de' \r\n                  ? 'Stellen Sie eine Frage über Cannabis-Anbau...'\r\n                  : 'Ask a question about cannabis cultivation...'\r\n              }\r\n              className={cn(\r\n                'flex-1 px-3 py-2 text-sm border border-stone-300 dark:border-slate-600',\r\n                'rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500',\r\n                'bg-white dark:bg-slate-700 text-stone-900 dark:text-slate-100',\r\n                'placeholder-stone-500 dark:placeholder-slate-400'\r\n              )}\r\n              disabled={isLoading}\r\n            />\r\n            \r\n            <Button\r\n              onClick={handleSendMessage}\r\n              disabled={!inputMessage.trim() || isLoading}\r\n              size=\"sm\"\r\n              className=\"px-3\"\r\n              aria-label={context.language === 'de' ? 'Nachricht senden' : 'Send message'}\r\n            >\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n              </svg>\r\n            </Button>\r\n          </div>\r\n          \r\n          {/* Context indicator */}\r\n          <div className=\"mt-2 text-xs text-stone-500 dark:text-slate-400\">\r\n            {context.language === 'de' ? 'Kontext:' : 'Context:'} {context.growthStage} • {context.waterVolume}L • {context.userLevel}\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { cn } from '../../utils/cn';\r\nimport { Card, CardHeader, CardTitle, CardContent } from '../Card';\r\nimport Button from '../Button';\r\nimport ChatInterface from './ChatInterface';\r\nimport { useAIAssistant } from '../../hooks/useAIAssistant';\r\nimport { CultivationContext } from '../../services/AIAssistantService';\r\n\r\ninterface AIAssistantTabProps {\r\n  context: CultivationContext;\r\n  className?: string;\r\n}\r\n\r\nconst AIAssistantTab: React.FC<AIAssistantTabProps> = ({ context, className }) => {\r\n  const [isChatOpen, setIsChatOpen] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('overview');\r\n  \r\n  const {\r\n    messages,\r\n    isLoading,\r\n    sendMessage,\r\n    contextAnalysis,\r\n    analyzeContext,\r\n    hasActiveAlerts,\r\n    activeRecommendations,\r\n    isEnabled,\r\n    setEnabled,\r\n    error,\r\n    clearError\r\n  } = useAIAssistant({\r\n    autoAnalyze: true,\r\n    enableProactiveAlerts: true\r\n  });\r\n\r\n  // Analyze context on mount and when context changes\r\n  useEffect(() => {\r\n    if (isEnabled) {\r\n      analyzeContext(context).catch(console.warn);\r\n    }\r\n  }, [context, isEnabled, analyzeContext]);\r\n\r\n  const categories = [\r\n    {\r\n      id: 'overview',\r\n      title: context.language === 'de' ? 'Übersicht' : 'Overview',\r\n      icon: '📊',\r\n      description: context.language === 'de' ? 'Aktuelle Analyse und Empfehlungen' : 'Current analysis and recommendations'\r\n    },\r\n    {\r\n      id: 'nutrients',\r\n      title: context.language === 'de' ? 'Nährstoffe' : 'Nutrients',\r\n      icon: '🧪',\r\n      description: context.language === 'de' ? 'Nährstoff-Management und Optimierung' : 'Nutrient management and optimization'\r\n    },\r\n    {\r\n      id: 'growth',\r\n      title: context.language === 'de' ? 'Wachstum' : 'Growth',\r\n      icon: '🌱',\r\n      description: context.language === 'de' ? 'Wachstumsphasen und Entwicklung' : 'Growth stages and development'\r\n    },\r\n    {\r\n      id: 'environment',\r\n      title: context.language === 'de' ? 'Umgebung' : 'Environment',\r\n      icon: '🌡️',\r\n      description: context.language === 'de' ? 'Umgebungsbedingungen und Kontrolle' : 'Environmental conditions and control'\r\n    },\r\n    {\r\n      id: 'problems',\r\n      title: context.language === 'de' ? 'Probleme' : 'Problems',\r\n      icon: '🔧',\r\n      description: context.language === 'de' ? 'Problemdiagnose und Lösungen' : 'Problem diagnosis and solutions'\r\n    }\r\n  ];\r\n\r\n  const getQuickQuestions = (category: string) => {\r\n    const questions = {\r\n      overview: [\r\n        context.language === 'de' ? 'Wie ist der aktuelle Zustand meiner Pflanzen?' : 'What\\'s the current state of my plants?',\r\n        context.language === 'de' ? 'Gibt es wichtige Probleme zu beachten?' : 'Are there any important issues to address?',\r\n        context.language === 'de' ? 'Was sollte ich als nächstes tun?' : 'What should I do next?'\r\n      ],\r\n      nutrients: [\r\n        context.language === 'de' ? 'Sind meine Nährstoffwerte optimal?' : 'Are my nutrient levels optimal?',\r\n        context.language === 'de' ? 'Wie kann ich meine Nährstofflösung verbessern?' : 'How can I improve my nutrient solution?',\r\n        context.language === 'de' ? 'Welche Dünger sollte ich verwenden?' : 'What fertilizers should I use?'\r\n      ],\r\n      growth: [\r\n        context.language === 'de' ? 'Wann sollte ich zur nächsten Wachstumsphase wechseln?' : 'When should I transition to the next growth stage?',\r\n        context.language === 'de' ? 'Was ist typisch für diese Wachstumsphase?' : 'What\\'s typical for this growth stage?',\r\n        context.language === 'de' ? 'Wie kann ich das Wachstum optimieren?' : 'How can I optimize growth?'\r\n      ],\r\n      environment: [\r\n        context.language === 'de' ? 'Sind meine Umgebungsbedingungen richtig?' : 'Are my environmental conditions correct?',\r\n        context.language === 'de' ? 'Wie sollte ich Temperatur und Luftfeuchtigkeit einstellen?' : 'How should I set temperature and humidity?',\r\n        context.language === 'de' ? 'Was ist der optimale Lichtzyklus?' : 'What\\'s the optimal light cycle?'\r\n      ],\r\n      problems: [\r\n        context.language === 'de' ? 'Meine Blätter werden gelb, was ist das Problem?' : 'My leaves are turning yellow, what\\'s the problem?',\r\n        context.language === 'de' ? 'Wie erkenne ich Nährstoffmängel?' : 'How do I identify nutrient deficiencies?',\r\n        context.language === 'de' ? 'Was kann ich gegen Schädlinge tun?' : 'What can I do about pests?'\r\n      ]\r\n    };\r\n    \r\n    return questions[category as keyof typeof questions] || [];\r\n  };\r\n\r\n  const renderOverview = () => (\r\n    <div className=\"space-y-6\">\r\n      {/* Context Analysis Summary */}\r\n      {contextAnalysis && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center space-x-2\">\r\n              <span>📊</span>\r\n              <span>{context.language === 'de' ? 'Aktuelle Analyse' : 'Current Analysis'}</span>\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {/* Nutrient Status */}\r\n              <div className={cn(\r\n                'p-4 rounded-lg border-2',\r\n                contextAnalysis.nutrientStatus.overall === 'optimal' ? 'border-green-200 bg-green-50' :\r\n                contextAnalysis.nutrientStatus.overall === 'suboptimal' ? 'border-yellow-200 bg-yellow-50' :\r\n                'border-red-200 bg-red-50'\r\n              )}>\r\n                <h4 className=\"font-medium mb-2\">\r\n                  {context.language === 'de' ? 'Nährstoffe' : 'Nutrients'}\r\n                </h4>\r\n                <p className=\"text-sm capitalize\">\r\n                  {contextAnalysis.nutrientStatus.overall}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Growth Stage */}\r\n              <div className=\"p-4 rounded-lg border-2 border-blue-200 bg-blue-50\">\r\n                <h4 className=\"font-medium mb-2\">\r\n                  {context.language === 'de' ? 'Wachstumsphase' : 'Growth Stage'}\r\n                </h4>\r\n                <p className=\"text-sm\">\r\n                  {contextAnalysis.growthStageAnalysis.currentStage}\r\n                </p>\r\n                <p className=\"text-xs text-stone-600 mt-1\">\r\n                  {Math.round(contextAnalysis.growthStageAnalysis.stageProgress * 100)}% {context.language === 'de' ? 'abgeschlossen' : 'complete'}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Environment */}\r\n              <div className={cn(\r\n                'p-4 rounded-lg border-2',\r\n                contextAnalysis.environmentalAssessment.overallScore > 0.7 ? 'border-green-200 bg-green-50' :\r\n                contextAnalysis.environmentalAssessment.overallScore > 0.4 ? 'border-yellow-200 bg-yellow-50' :\r\n                'border-red-200 bg-red-50'\r\n              )}>\r\n                <h4 className=\"font-medium mb-2\">\r\n                  {context.language === 'de' ? 'Umgebung' : 'Environment'}\r\n                </h4>\r\n                <p className=\"text-sm\">\r\n                  {Math.round(contextAnalysis.environmentalAssessment.overallScore * 100)}% {context.language === 'de' ? 'optimal' : 'optimal'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Active Alerts */}\r\n      {hasActiveAlerts && contextAnalysis?.alerts && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center space-x-2 text-red-700\">\r\n              <span>⚠️</span>\r\n              <span>{context.language === 'de' ? 'Aktive Warnungen' : 'Active Alerts'}</span>\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {contextAnalysis.alerts\r\n                .filter(alert => alert.severity === 'high' || alert.severity === 'critical')\r\n                .map((alert, index) => (\r\n                  <div key={index} className={cn(\r\n                    'p-3 rounded-lg border-l-4',\r\n                    alert.severity === 'critical' ? 'border-red-500 bg-red-50' : 'border-orange-500 bg-orange-50'\r\n                  )}>\r\n                    <h5 className=\"font-medium text-sm\">{alert.title}</h5>\r\n                    <p className=\"text-sm text-stone-600 mt-1\">{alert.message}</p>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Top Recommendations */}\r\n      {activeRecommendations.length > 0 && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center space-x-2\">\r\n              <span>💡</span>\r\n              <span>{context.language === 'de' ? 'Empfehlungen' : 'Recommendations'}</span>\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {activeRecommendations.slice(0, 3).map((rec, index) => (\r\n                <div key={index} className=\"p-3 rounded-lg bg-emerald-50 border border-emerald-200\">\r\n                  <h5 className=\"font-medium text-sm text-emerald-900\">{rec.title}</h5>\r\n                  <p className=\"text-sm text-emerald-700 mt-1\">{rec.description}</p>\r\n                  <p className=\"text-xs text-emerald-600 mt-2\">{rec.reasoning}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderQuickQuestions = () => {\r\n    const questions = getQuickQuestions(selectedCategory);\r\n    \r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>\r\n            {context.language === 'de' ? 'Häufige Fragen' : 'Quick Questions'}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 gap-2\">\r\n            {questions.map((question, index) => (\r\n              <Button\r\n                key={index}\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  setIsChatOpen(true);\r\n                  // Auto-fill the question in chat\r\n                }}\r\n                className=\"text-left justify-start h-auto py-3 px-4\"\r\n              >\r\n                <span className=\"text-sm\">{question}</span>\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  if (!isEnabled) {\r\n    return (\r\n      <div className={cn('p-6', className)}>\r\n        <Card>\r\n          <CardContent className=\"pt-6 text-center\">\r\n            <div className=\"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <span className=\"text-2xl\">🤖</span>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold mb-2\">\r\n              {context.language === 'de' ? 'AI-Assistent deaktiviert' : 'AI Assistant Disabled'}\r\n            </h3>\r\n            <p className=\"text-stone-600 mb-4\">\r\n              {context.language === 'de' \r\n                ? 'Aktivieren Sie den AI-Assistenten für intelligente Anbau-Beratung.'\r\n                : 'Enable the AI Assistant for intelligent cultivation guidance.'\r\n              }\r\n            </p>\r\n            <Button onClick={() => setEnabled(true)}>\r\n              {context.language === 'de' ? 'Aktivieren' : 'Enable'}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={cn('p-6', className)}>\r\n        <Card>\r\n          <CardContent className=\"pt-6 text-center\">\r\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <span className=\"text-2xl\">⚠️</span>\r\n            </div>\r\n            <h3 className=\"text-lg font-semibold mb-2 text-red-700\">\r\n              {context.language === 'de' ? 'AI-Assistent Fehler' : 'AI Assistant Error'}\r\n            </h3>\r\n            <p className=\"text-stone-600 mb-4\">{error}</p>\r\n            <div className=\"space-x-2\">\r\n              <Button onClick={clearError} variant=\"outline\">\r\n                {context.language === 'de' ? 'Erneut versuchen' : 'Try Again'}\r\n              </Button>\r\n              <Button onClick={() => setEnabled(false)} variant=\"secondary\">\r\n                {context.language === 'de' ? 'Deaktivieren' : 'Disable'}\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn('p-6 space-y-6', className)}>\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-stone-900\">\r\n            {context.language === 'de' ? 'AI Anbau-Assistent' : 'AI Grow Assistant'}\r\n          </h2>\r\n          <p className=\"text-stone-600\">\r\n            {context.language === 'de' \r\n              ? 'Intelligente Beratung für optimalen Cannabis-Anbau'\r\n              : 'Intelligent guidance for optimal cannabis cultivation'\r\n            }\r\n          </p>\r\n        </div>\r\n        \r\n        <Button onClick={() => setIsChatOpen(true)} className=\"flex items-center space-x-2\">\r\n          <span>💬</span>\r\n          <span>{context.language === 'de' ? 'Chat öffnen' : 'Open Chat'}</span>\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Category Navigation */}\r\n      <div className=\"flex space-x-1 bg-stone-100 rounded-lg p-1\">\r\n        {categories.map((category) => (\r\n          <button\r\n            key={category.id}\r\n            onClick={() => setSelectedCategory(category.id)}\r\n            className={cn(\r\n              'flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all',\r\n              selectedCategory === category.id\r\n                ? 'bg-white text-emerald-700 shadow-sm'\r\n                : 'text-stone-600 hover:text-stone-900'\r\n            )}\r\n          >\r\n            <span className=\"mr-2\">{category.icon}</span>\r\n            {category.title}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        <div className=\"lg:col-span-2\">\r\n          {selectedCategory === 'overview' ? renderOverview() : renderQuickQuestions()}\r\n        </div>\r\n        \r\n        <div>\r\n          {renderQuickQuestions()}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Interface */}\r\n      <ChatInterface\r\n        isOpen={isChatOpen}\r\n        onClose={() => setIsChatOpen(false)}\r\n        onSendMessage={sendMessage}\r\n        context={context}\r\n        messages={messages}\r\n        isLoading={isLoading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIAssistantTab;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CultivationContext } from '../../services/AIAssistantService';\r\nimport { useAIAssistant } from '../../hooks/useAIAssistant';\r\nimport FloatingChatWidget from './FloatingChatWidget';\r\nimport ChatInterface from './ChatInterface';\r\nimport AIAssistantTab from './AIAssistantTab';\r\n\r\ninterface AIAssistantIntegrationProps {\r\n  // Current nutrient calculation context\r\n  nutrients: Record<string, number>;\r\n  growthStage: string;\r\n  waterType: string;\r\n  waterVolume: number;\r\n  selectedFertilizers: Array<{\r\n    id: string;\r\n    name: string;\r\n    amount?: number;\r\n    unit?: string;\r\n  }>;\r\n  userLevel: 'beginner' | 'intermediate' | 'expert';\r\n  language: 'de' | 'en';\r\n\r\n  // Optional environmental data\r\n  environmentalData?: {\r\n    temperature?: number;\r\n    humidity?: number;\r\n    lightCycle?: string;\r\n    ph?: number;\r\n    ec?: number;\r\n  };\r\n\r\n  // Optional grow tracking data\r\n  growWeek?: number;\r\n  strainType?: 'indica' | 'sativa' | 'hybrid';\r\n\r\n  // UI preferences\r\n  showFloatingWidget?: boolean;\r\n  enableProactiveAlerts?: boolean;\r\n\r\n  // Callbacks\r\n  onNutrientAdjustment?: (adjustments: Record<string, number>) => void;\r\n  onRecommendationApplied?: (recommendation: {\r\n    type: string;\r\n    priority: string;\r\n    description: string;\r\n  }) => void;\r\n}\r\n\r\nconst AIAssistantIntegration: React.FC<AIAssistantIntegrationProps> = ({\r\n  nutrients,\r\n  growthStage,\r\n  waterType,\r\n  waterVolume,\r\n  selectedFertilizers,\r\n  userLevel,\r\n  language,\r\n  environmentalData,\r\n  growWeek,\r\n  strainType,\r\n  showFloatingWidget = true,\r\n  enableProactiveAlerts = true,\r\n  onNutrientAdjustment,\r\n  onRecommendationApplied\r\n}) => {\r\n  const [isFloatingChatOpen, setIsFloatingChatOpen] = useState(false);\r\n  \r\n  // Build cultivation context\r\n  const context: CultivationContext = {\r\n    nutrients,\r\n    growthStage,\r\n    waterType,\r\n    waterVolume,\r\n    selectedFertilizers,\r\n    userLevel,\r\n    language,\r\n    environmentalData,\r\n    growWeek,\r\n    strainType\r\n  };\r\n\r\n  // Initialize AI Assistant\r\n  const {\r\n    messages,\r\n    isLoading,\r\n    sendMessage,\r\n    hasActiveAlerts,\r\n    hasUnreadMessages,\r\n    activeRecommendations,\r\n    isEnabled\r\n  } = useAIAssistant({\r\n    autoAnalyze: true,\r\n    enableProactiveAlerts\r\n  });\r\n\r\n  // Handle recommendation applications\r\n  useEffect(() => {\r\n    if (activeRecommendations.length > 0 && onRecommendationApplied) {\r\n      activeRecommendations.forEach(rec => {\r\n        if (rec.action?.type === 'adjust_nutrients' && onNutrientAdjustment) {\r\n          // Extract nutrient adjustments from recommendation\r\n          const adjustments = extractNutrientAdjustments(rec);\r\n          if (Object.keys(adjustments).length > 0) {\r\n            onNutrientAdjustment(adjustments);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [activeRecommendations, onNutrientAdjustment, onRecommendationApplied]);\r\n\r\n  const extractNutrientAdjustments = (recommendation: {\r\n    description: string;\r\n    type: string;\r\n  }): Record<string, number> => {\r\n    // Simple extraction logic - in a real implementation, this would be more sophisticated\r\n    const adjustments: Record<string, number> = {};\r\n    \r\n    if (recommendation.description.includes('increase nitrogen')) {\r\n      adjustments.n = nutrients.n * 1.1; // 10% increase\r\n    }\r\n    if (recommendation.description.includes('decrease nitrogen')) {\r\n      adjustments.n = nutrients.n * 0.9; // 10% decrease\r\n    }\r\n    if (recommendation.description.includes('increase phosphorus')) {\r\n      adjustments.p = nutrients.p * 1.1;\r\n    }\r\n    if (recommendation.description.includes('decrease phosphorus')) {\r\n      adjustments.p = nutrients.p * 0.9;\r\n    }\r\n    if (recommendation.description.includes('increase potassium')) {\r\n      adjustments.k = nutrients.k * 1.1;\r\n    }\r\n    if (recommendation.description.includes('decrease potassium')) {\r\n      adjustments.k = nutrients.k * 0.9;\r\n    }\r\n    \r\n    return adjustments;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Floating Chat Widget */}\r\n      {showFloatingWidget && isEnabled && (\r\n        <FloatingChatWidget\r\n          onClick={() => setIsFloatingChatOpen(true)}\r\n          context={context}\r\n          hasUnreadMessages={hasUnreadMessages}\r\n          hasActiveAlerts={hasActiveAlerts}\r\n        />\r\n      )}\r\n\r\n      {/* Floating Chat Interface */}\r\n      <ChatInterface\r\n        isOpen={isFloatingChatOpen}\r\n        onClose={() => setIsFloatingChatOpen(false)}\r\n        onSendMessage={sendMessage}\r\n        context={context}\r\n        messages={messages}\r\n        isLoading={isLoading}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\n// Export individual components for flexible usage\r\nexport { \r\n  AIAssistantIntegration as default,\r\n  AIAssistantTab,\r\n  ChatInterface,\r\n  FloatingChatWidget\r\n};\r\n\r\n// Export types for external usage\r\nexport type { CultivationContext } from '../../services/AIAssistantService';\r\n","/**\r\n * Performance monitoring utilities for NutriCalc\r\n * Tracks key metrics and user interactions\r\n */\r\n\r\ninterface PerformanceMetrics {\r\n  loadTime: number;\r\n  renderTime: number;\r\n  interactionTime: number;\r\n  bundleSize: number;\r\n  memoryUsage: number;\r\n}\r\n\r\ninterface UserInteraction {\r\n  action: string;\r\n  timestamp: number;\r\n  duration?: number;\r\n  element?: string;\r\n}\r\n\r\nclass PerformanceMonitor {\r\n  private metrics: PerformanceMetrics = {\r\n    loadTime: 0,\r\n    renderTime: 0,\r\n    interactionTime: 0,\r\n    bundleSize: 0,\r\n    memoryUsage: 0,\r\n  };\r\n\r\n  private interactions: UserInteraction[] = [];\r\n  private startTime: number = performance.now();\r\n\r\n  constructor() {\r\n    this.initializeMonitoring();\r\n  }\r\n\r\n  private initializeMonitoring(): void {\r\n    // Track page load performance\r\n    window.addEventListener('load', () => {\r\n      this.trackLoadTime();\r\n    });\r\n\r\n    // Track Core Web Vitals\r\n    this.trackCoreWebVitals();\r\n\r\n    // Track user interactions\r\n    this.trackUserInteractions();\r\n\r\n    // Track memory usage (if available)\r\n    this.trackMemoryUsage();\r\n  }\r\n\r\n  private trackLoadTime(): void {\r\n    const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\r\n    if (navigation) {\r\n      this.metrics.loadTime = navigation.loadEventEnd - navigation.fetchStart;\r\n      this.metrics.renderTime = navigation.domContentLoadedEventEnd - navigation.fetchStart;\r\n    }\r\n  }\r\n\r\n  private trackCoreWebVitals(): void {\r\n    // First Contentful Paint (FCP)\r\n    new PerformanceObserver((list) => {\r\n      for (const entry of list.getEntries()) {\r\n        if (entry.name === 'first-contentful-paint') {\r\n          console.log('FCP:', entry.startTime);\r\n        }\r\n      }\r\n    }).observe({ entryTypes: ['paint'] });\r\n\r\n    // Largest Contentful Paint (LCP)\r\n    new PerformanceObserver((list) => {\r\n      for (const entry of list.getEntries()) {\r\n        console.log('LCP:', entry.startTime);\r\n      }\r\n    }).observe({ entryTypes: ['largest-contentful-paint'] });\r\n\r\n    // Cumulative Layout Shift (CLS)\r\n    new PerformanceObserver((list) => {\r\n      for (const entry of list.getEntries()) {\r\n        if (!(entry as any).hadRecentInput) {\r\n          console.log('CLS:', (entry as any).value);\r\n        }\r\n      }\r\n    }).observe({ entryTypes: ['layout-shift'] });\r\n  }\r\n\r\n  private trackUserInteractions(): void {\r\n    // Track button clicks\r\n    document.addEventListener('click', (event) => {\r\n      const target = event.target as HTMLElement;\r\n      if (target.tagName === 'BUTTON' || target.closest('button')) {\r\n        this.recordInteraction({\r\n          action: 'click',\r\n          timestamp: performance.now(),\r\n          element: target.textContent || target.className,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Track form interactions\r\n    document.addEventListener('input', (event) => {\r\n      const target = event.target as HTMLElement;\r\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT') {\r\n        this.recordInteraction({\r\n          action: 'input',\r\n          timestamp: performance.now(),\r\n          element: target.id || target.className,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Track navigation\r\n    document.addEventListener('click', (event) => {\r\n      const target = event.target as HTMLElement;\r\n      if (target.closest('[data-testid^=\"tab-\"]')) {\r\n        this.recordInteraction({\r\n          action: 'navigation',\r\n          timestamp: performance.now(),\r\n          element: target.closest('[data-testid^=\"tab-\"]')?.getAttribute('data-testid') || 'unknown',\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private trackMemoryUsage(): void {\r\n    if ('memory' in performance) {\r\n      const memory = (performance as any).memory;\r\n      this.metrics.memoryUsage = memory.usedJSHeapSize;\r\n    }\r\n  }\r\n\r\n  private recordInteraction(interaction: UserInteraction): void {\r\n    this.interactions.push(interaction);\r\n    \r\n    // Keep only last 100 interactions to prevent memory leaks\r\n    if (this.interactions.length > 100) {\r\n      this.interactions = this.interactions.slice(-100);\r\n    }\r\n  }\r\n\r\n  public getMetrics(): PerformanceMetrics {\r\n    return { ...this.metrics };\r\n  }\r\n\r\n  public getInteractions(): UserInteraction[] {\r\n    return [...this.interactions];\r\n  }\r\n\r\n  public getSessionDuration(): number {\r\n    return performance.now() - this.startTime;\r\n  }\r\n\r\n  public generateReport(): string {\r\n    const metrics = this.getMetrics();\r\n    const sessionDuration = this.getSessionDuration();\r\n    const interactionCount = this.interactions.length;\r\n\r\n    return `\r\nPerformance Report:\r\n==================\r\nLoad Time: ${metrics.loadTime.toFixed(2)}ms\r\nRender Time: ${metrics.renderTime.toFixed(2)}ms\r\nSession Duration: ${(sessionDuration / 1000).toFixed(2)}s\r\nUser Interactions: ${interactionCount}\r\nMemory Usage: ${(metrics.memoryUsage / 1024 / 1024).toFixed(2)}MB\r\n\r\nRecent Interactions:\r\n${this.interactions.slice(-5).map(i => \r\n  `- ${i.action} on ${i.element} at ${(i.timestamp / 1000).toFixed(2)}s`\r\n).join('\\n')}\r\n    `.trim();\r\n  }\r\n\r\n  public exportData(): object {\r\n    return {\r\n      metrics: this.getMetrics(),\r\n      interactions: this.getInteractions(),\r\n      sessionDuration: this.getSessionDuration(),\r\n      timestamp: new Date().toISOString(),\r\n      userAgent: navigator.userAgent,\r\n      viewport: {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n// Global performance monitor instance\r\nexport const performanceMonitor = new PerformanceMonitor();\r\n\r\n// Utility functions for manual tracking\r\nexport const trackCustomEvent = (eventName: string, data?: any): void => {\r\n  console.log(`Custom Event: ${eventName}`, data);\r\n  performanceMonitor.recordInteraction({\r\n    action: `custom:${eventName}`,\r\n    timestamp: performance.now(),\r\n    element: JSON.stringify(data),\r\n  });\r\n};\r\n\r\nexport const measureFunction = <T extends (...args: any[]) => any>(\r\n  fn: T,\r\n  name: string\r\n): T => {\r\n  return ((...args: any[]) => {\r\n    const start = performance.now();\r\n    const result = fn(...args);\r\n    const end = performance.now();\r\n    \r\n    console.log(`Function ${name} took ${(end - start).toFixed(2)}ms`);\r\n    trackCustomEvent(`function:${name}`, { duration: end - start });\r\n    \r\n    return result;\r\n  }) as T;\r\n};\r\n\r\n// Export types for external use\r\nexport type { PerformanceMetrics, UserInteraction };\r\n","import React from 'react';\r\nimport { getNutrientStatus, getProgressBarWidth } from '../utils/nutrientUtils';\r\n\r\n/**\r\n * NutrientBarChart - Visualizes nutrient values as horizontal bars with color coding.\r\n * @param {Object} props\r\n * @param {Object} props.nutrients - Nutrient values, e.g. { n: 120, p: 40, k: 180, ec: 1.8, ph: 6.2 }\r\n * @param {Object} props.stage - Growth stage object with optimal ranges, e.g. { n: [100, 150], ... }\r\n * @param {Array} props.fields - Array of { key, label, unit }\r\n */\r\nconst NutrientBarChart = ({ nutrients = {}, stage = {}, fields = [] }) => {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {fields.map((field) => {\r\n        const value = nutrients[field.key] ?? 0;\r\n        const range = stage[field.key];\r\n        const status = getNutrientStatus(value, range);\r\n        const colorClass =\r\n          status === 'optimal'\r\n            ? 'bg-green-500'\r\n            : status === 'suboptimal'\r\n              ? 'bg-yellow-500'\r\n              : 'bg-red-500';\r\n        const barBg = 'bg-slate-200 dark:bg-slate-700';\r\n        const width = getProgressBarWidth(value, range);\r\n        return (\r\n          <div key={field.key} className=\"flex flex-col gap-1\">\r\n            <div className=\"flex justify-between items-center text-xs font-medium\">\r\n              <span>{field.label}</span>\r\n              <span>\r\n                {value}\r\n                {field.unit ? ` ${field.unit}` : ''}\r\n                {range ? (\r\n                  <span className=\"ml-2 text-slate-500 dark:text-slate-400 text-xs\">\r\n                    ({range[0]}–{range[1]})\r\n                  </span>\r\n                ) : null}\r\n              </span>\r\n            </div>\r\n            <div\r\n              className={`relative w-full h-4 rounded ${barBg}`}\r\n              aria-label={`${field.label} Wert: ${value}`}\r\n            >\r\n              <div\r\n                className={`absolute left-0 top-0 h-4 rounded ${colorClass}`}\r\n                style={{\r\n                  width: `${width}%`,\r\n                  minWidth: width > 0 ? '0.5rem' : 0,\r\n                  transition: 'width 0.3s',\r\n                }}\r\n                aria-valuenow={value}\r\n                aria-valuemin={range ? range[0] : 0}\r\n                aria-valuemax={range ? range[1] * 1.2 : 100}\r\n                role=\"progressbar\"\r\n              />\r\n              {/* Range marker */}\r\n              {range && (\r\n                <div\r\n                  className=\"absolute top-0 h-4 border-l-2 border-blue-500 opacity-60\"\r\n                  style={{ left: `${getProgressBarWidth(range[0], range)}%` }}\r\n                  aria-hidden=\"true\"\r\n                />\r\n              )}\r\n              {range && (\r\n                <div\r\n                  className=\"absolute top-0 h-4 border-l-2 border-blue-500 opacity-60\"\r\n                  style={{ left: `${getProgressBarWidth(range[1], range)}%` }}\r\n                  aria-hidden=\"true\"\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NutrientBarChart;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { calculateNutrientResults } from '../utils/calculateNutrients';\r\nimport Button from './Button';\r\nimport NutrientBarChart from './NutrientBarChart';\r\n\r\nconst MixingAssistant = ({ fertilizerDatabase, GROWTH_STAGES, WATER_TYPES }) => {\r\n  // Loading state if props are missing\r\n  if (!fertilizerDatabase || !GROWTH_STAGES || !WATER_TYPES) {\r\n    return (\r\n      <div className=\"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow\">\r\n        Daten werden geladen...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Stepper state\r\n  const [step, setStep] = useState(1);\r\n  const [waterAmount, setWaterAmount] = useState(10);\r\n  const [waterType, setWaterType] = useState(Object.keys(WATER_TYPES)[0]);\r\n  const [growthStage, setGrowthStage] = useState(Object.keys(GROWTH_STAGES)[0]);\r\n  const [selectedFertilizers, setSelectedFertilizers] = useState([]);\r\n  const [nutrientResults, setNutrientResults] = useState({\r\n    nutrients: {},\r\n    contributions: {},\r\n    stage: GROWTH_STAGES[growthStage],\r\n  });\r\n\r\n  useEffect(() => {\r\n    const results = calculateNutrientResults({\r\n      waterVolume: waterAmount,\r\n      growthStage,\r\n      waterType,\r\n      selectedFertilizers,\r\n      fertilizerDatabase,\r\n      NUTRIENT_FIELDS: [{ key: 'n' }, { key: 'p' }, { key: 'k' }, { key: 'ec' }, { key: 'ph' }],\r\n      GROWTH_STAGES,\r\n      WATER_TYPES,\r\n      customWaterProfile: {},\r\n      mixedWater: undefined,\r\n    });\r\n    setNutrientResults(results);\r\n  }, [\r\n    waterAmount,\r\n    growthStage,\r\n    waterType,\r\n    selectedFertilizers,\r\n    fertilizerDatabase,\r\n    GROWTH_STAGES,\r\n    WATER_TYPES,\r\n  ]);\r\n\r\n  // Fertilizer selection handlers\r\n  const addFertilizer = (id) => {\r\n    if (!id || selectedFertilizers.find((f) => f.id === id)) return;\r\n    const fert = fertilizerDatabase[id];\r\n    setSelectedFertilizers((prev) => [\r\n      ...prev,\r\n      { id, amount: fert?.type === 'powder' ? 0.1 : 1.0 },\r\n    ]);\r\n  };\r\n  const removeFertilizer = (id) => {\r\n    setSelectedFertilizers((prev) => prev.filter((f) => f.id !== id));\r\n  };\r\n  const updateFertilizerAmount = (id, value) => {\r\n    const amount = parseFloat(value);\r\n    setSelectedFertilizers((prev) =>\r\n      prev.map((f) =>\r\n        f.id === id ? { ...f, amount: isNaN(amount) || amount < 0 ? 0 : amount } : f\r\n      )\r\n    );\r\n  };\r\n\r\n  // Calculate mixing instructions (simple summary)\r\n  const mixSummary = selectedFertilizers\r\n    .map((f) => {\r\n      const fert = fertilizerDatabase[f.id];\r\n      return fert\r\n        ? `${fert.name}: ${f.amount} ${fert.unit || (fert.type === 'powder' ? 'g' : 'ml')}`\r\n        : '';\r\n    })\r\n    .filter(Boolean);\r\n\r\n  // Export mix as JSON\r\n  const handleExport = () => {\r\n    const data = {\r\n      waterAmount,\r\n      waterType,\r\n      growthStage,\r\n      selectedFertilizers,\r\n      date: new Date().toISOString(),\r\n    };\r\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'nutricalc-mix.json';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4\">\r\n        Misch-Assistent\r\n      </h2>\r\n      {/* Stepper */}\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <div\r\n          className={`w-8 h-8 flex items-center justify-center rounded-full ${step === 1 ? 'bg-blue-600 text-white' : 'bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200'}`}\r\n        >\r\n          1\r\n        </div>\r\n        <span className=\"text-sm\">Wasser & Phase</span>\r\n        <div className=\"w-6 h-0.5 bg-slate-300 dark:bg-slate-700 mx-2\" />\r\n        <div\r\n          className={`w-8 h-8 flex items-center justify-center rounded-full ${step === 2 ? 'bg-blue-600 text-white' : 'bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200'}`}\r\n        >\r\n          2\r\n        </div>\r\n        <span className=\"text-sm\">Dünger</span>\r\n        <div className=\"w-6 h-0.5 bg-slate-300 dark:bg-slate-700 mx-2\" />\r\n        <div\r\n          className={`w-8 h-8 flex items-center justify-center rounded-full ${step === 3 ? 'bg-blue-600 text-white' : 'bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-200'}`}\r\n        >\r\n          3\r\n        </div>\r\n        <span className=\"text-sm\">Anleitung</span>\r\n      </div>\r\n      {/* Step 1: Water & Phase */}\r\n      {step === 1 && (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\" htmlFor=\"waterAmount\">\r\n              Wassermenge (L)\r\n            </label>\r\n            <input\r\n              id=\"waterAmount\"\r\n              type=\"number\"\r\n              min=\"0.1\"\r\n              step=\"0.1\"\r\n              value={waterAmount}\r\n              onChange={(e) => setWaterAmount(Math.max(0.1, Number(e.target.value)))}\r\n              className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n              placeholder=\"z.B. 10\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\" htmlFor=\"waterType\">\r\n              Wassertyp\r\n            </label>\r\n            <select\r\n              id=\"waterType\"\r\n              value={waterType}\r\n              onChange={(e) => setWaterType(e.target.value)}\r\n              className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n            >\r\n              {Object.entries(WATER_TYPES).map(([key, type]) => (\r\n                <option key={key} value={key}>\r\n                  {type.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\" htmlFor=\"growthStage\">\r\n              Wachstumsphase\r\n            </label>\r\n            <select\r\n              id=\"growthStage\"\r\n              value={growthStage}\r\n              onChange={(e) => setGrowthStage(e.target.value)}\r\n              className=\"w-full px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100\"\r\n            >\r\n              {Object.entries(GROWTH_STAGES).map(([key, stage]) => (\r\n                <option key={key} value={key}>\r\n                  {stage.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"flex justify-end\">\r\n            <Button onClick={() => setStep(2)} variant=\"primary\">\r\n              Weiter\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Step 2: Fertilizers */}\r\n      {step === 2 && (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Dünger auswählen</label>\r\n            <div className=\"flex gap-2 flex-wrap\">\r\n              {Object.entries(fertilizerDatabase).map(([id, fert]) => (\r\n                <Button\r\n                  key={id}\r\n                  variant=\"secondary\"\r\n                  onClick={() => addFertilizer(id)}\r\n                  disabled={!!selectedFertilizers.find((f) => f.id === id)}\r\n                  className=\"text-xs mb-1\"\r\n                >\r\n                  {fert.name}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Ausgewählte Dünger & Mengen</label>\r\n            <ul className=\"space-y-2\">\r\n              {selectedFertilizers.length === 0 && (\r\n                <li className=\"text-slate-500\">Noch keine Dünger ausgewählt.</li>\r\n              )}\r\n              {selectedFertilizers.map((f) => {\r\n                const fert = fertilizerDatabase[f.id];\r\n                return (\r\n                  <li key={f.id} className=\"flex items-center gap-2\">\r\n                    <span className=\"flex-1\">{fert?.name || f.id}</span>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      value={f.amount}\r\n                      onChange={(e) => updateFertilizerAmount(f.id, e.target.value)}\r\n                      className=\"w-20 px-2 py-1 border rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-slate-100 text-xs\"\r\n                    />\r\n                    <span className=\"text-xs\">\r\n                      {fert?.unit || (fert?.type === 'powder' ? 'g' : 'ml')}\r\n                    </span>\r\n                    <Button\r\n                      onClick={() => removeFertilizer(f.id)}\r\n                      variant=\"danger\"\r\n                      className=\"text-xs\"\r\n                    >\r\n                      Entfernen\r\n                    </Button>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n          <div className=\"mt-6\">\r\n            <h3 className=\"text-md font-semibold text-slate-800 dark:text-slate-100 mb-2\">\r\n              Nährstoffwerte (Live)\r\n            </h3>\r\n            <NutrientBarChart\r\n              nutrients={nutrientResults.nutrients}\r\n              stage={nutrientResults.stage}\r\n              fields={[\r\n                { key: 'n', label: 'N (Stickstoff)', unit: 'ppm' },\r\n                { key: 'p', label: 'P (Phosphor)', unit: 'ppm' },\r\n                { key: 'k', label: 'K (Kalium)', unit: 'ppm' },\r\n                { key: 'ec', label: 'EC', unit: 'mS/cm' },\r\n                { key: 'ph', label: 'pH', unit: '' },\r\n              ]}\r\n            />\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <Button onClick={() => setStep(1)} variant=\"secondary\">\r\n              Zurück\r\n            </Button>\r\n            <Button\r\n              onClick={() => setStep(3)}\r\n              variant=\"primary\"\r\n              disabled={selectedFertilizers.length === 0}\r\n            >\r\n              Weiter\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Step 3: Mixing Instructions */}\r\n      {step === 3 && (\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <h3 className=\"text-md font-semibold mb-2\">Mischanleitung</h3>\r\n            <ol className=\"list-decimal list-inside space-y-1\">\r\n              <li>\r\n                Fülle <span className=\"font-bold\">{waterAmount} L</span> Wasser (\r\n                {WATER_TYPES[waterType]?.name || waterType}) in einen sauberen Behälter.\r\n              </li>\r\n              {mixSummary.map((line, idx) => (\r\n                <li key={idx}>\r\n                  Füge <span className=\"font-bold\">{line}</span> hinzu und gut umrühren.\r\n                </li>\r\n              ))}\r\n              <li>Überprüfe den pH- und EC-Wert und passe ggf. an.</li>\r\n            </ol>\r\n            <div className=\"text-xs text-slate-500 mt-2\">\r\n              Hinweis: Reihenfolge kann je nach Dünger variieren. Immer Herstellerhinweise beachten.\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Button onClick={() => setStep(2)} variant=\"secondary\">\r\n              Zurück\r\n            </Button>\r\n            <Button onClick={handleExport} variant=\"primary\">\r\n              Mix als JSON exportieren\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MixingAssistant;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Button from './Button';\r\n\r\nconst STORAGE_KEY = 'nutricalc_watering_events';\r\n\r\nconst defaultForm = {\r\n  id: null,\r\n  date: '',\r\n  time: '',\r\n  amount: '',\r\n  notes: '',\r\n};\r\n\r\nconst WateringScheduler = () => {\r\n  const [events, setEvents] = useState([]);\r\n  const [form, setForm] = useState(defaultForm);\r\n  const [editingId, setEditingId] = useState(null);\r\n\r\n  // Load from localStorage\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(STORAGE_KEY);\r\n    if (stored) {\r\n      try {\r\n        setEvents(JSON.parse(stored));\r\n      } catch {\r\n        // Silently ignore parsing errors and use empty array\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save to localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(events));\r\n  }, [events]);\r\n\r\n  // Handle form input\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((f) => ({ ...f, [name]: value }));\r\n  };\r\n\r\n  // Add or update event\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!form.date || !form.time || !form.amount) return;\r\n    const newEvent = {\r\n      ...form,\r\n      id: editingId || Date.now(),\r\n    };\r\n    if (editingId) {\r\n      setEvents((evts) => evts.map((ev) => (ev.id === editingId ? newEvent : ev)));\r\n    } else {\r\n      setEvents((evts) => [...evts, newEvent]);\r\n    }\r\n    setForm(defaultForm);\r\n    setEditingId(null);\r\n  };\r\n\r\n  // Edit event\r\n  const handleEdit = (id) => {\r\n    const ev = events.find((e) => e.id === id);\r\n    if (ev) {\r\n      setForm(ev);\r\n      setEditingId(id);\r\n    }\r\n  };\r\n\r\n  // Delete event\r\n  const handleDelete = (id) => {\r\n    setEvents((evts) => evts.filter((ev) => ev.id !== id));\r\n    if (editingId === id) {\r\n      setForm(defaultForm);\r\n      setEditingId(null);\r\n    }\r\n  };\r\n\r\n  // Sort events by date/time\r\n  const sortedEvents = [...events].sort((a, b) => {\r\n    const da = new Date(`${a.date}T${a.time}`);\r\n    const db = new Date(`${b.date}T${b.time}`);\r\n    return da - db;\r\n  });\r\n\r\n  // Today for min date\r\n  const today = new Date().toISOString().split('T')[0];\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4 bg-white dark:bg-slate-800 rounded-lg shadow space-y-6\">\r\n      <h2 className=\"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4\">Gießplaner</h2>\r\n      {/* Add/Edit Form */}\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"space-y-3 bg-slate-100 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700\"\r\n      >\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"flex-1\">\r\n            <label className=\"block text-xs font-medium mb-0.5\" htmlFor=\"date\">\r\n              Datum\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"date\"\r\n              name=\"date\"\r\n              min={today}\r\n              value={form.date}\r\n              onChange={handleChange}\r\n              className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <label className=\"block text-xs font-medium mb-0.5\" htmlFor=\"time\">\r\n              Uhrzeit\r\n            </label>\r\n            <input\r\n              type=\"time\"\r\n              id=\"time\"\r\n              name=\"time\"\r\n              value={form.time}\r\n              onChange={handleChange}\r\n              className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-xs font-medium mb-0.5\" htmlFor=\"amount\">\r\n            Menge (L)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"amount\"\r\n            name=\"amount\"\r\n            min=\"0.1\"\r\n            step=\"0.1\"\r\n            value={form.amount}\r\n            onChange={handleChange}\r\n            className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs\"\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-xs font-medium mb-0.5\" htmlFor=\"notes\">\r\n            Notizen\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"notes\"\r\n            name=\"notes\"\r\n            value={form.notes}\r\n            onChange={handleChange}\r\n            className=\"w-full px-2 py-1 border rounded-md dark:bg-slate-700 dark:text-slate-100 text-xs\"\r\n          />\r\n        </div>\r\n        <div className=\"flex gap-2 justify-end\">\r\n          {editingId && (\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setForm(defaultForm);\r\n                setEditingId(null);\r\n              }}\r\n              variant=\"secondary\"\r\n            >\r\n              Abbrechen\r\n            </Button>\r\n          )}\r\n          <Button type=\"submit\" variant=\"primary\">\r\n            {editingId ? 'Speichern' : 'Hinzufügen'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      {/* Event List */}\r\n      <div>\r\n        <h3 className=\"font-semibold mb-2\">Geplante Gießtermine</h3>\r\n        {sortedEvents.length === 0 && <div className=\"text-slate-500\">Noch keine Gießtermine.</div>}\r\n        <ul className=\"space-y-2\">\r\n          {sortedEvents.map((ev) => (\r\n            <li\r\n              key={ev.id}\r\n              className=\"flex items-center gap-2 p-2 bg-slate-100 dark:bg-slate-700 rounded\"\r\n            >\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-medium text-sm\">\r\n                  {ev.date} {ev.time} - {ev.amount} L\r\n                </div>\r\n                {ev.notes && <div className=\"text-xs text-slate-500\">{ev.notes}</div>}\r\n              </div>\r\n              <Button onClick={() => handleEdit(ev.id)} variant=\"secondary\" className=\"text-xs\">\r\n                Bearbeiten\r\n              </Button>\r\n              <Button onClick={() => handleDelete(ev.id)} variant=\"danger\" className=\"text-xs\">\r\n                Löschen\r\n              </Button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WateringScheduler;\r\n","import React, { useState } from 'react';\r\nimport { ThemeProvider, useTheme } from './contexts/ThemeContext';\r\nimport { ToastProvider, useToasts } from './contexts/ToastContext';\r\nimport { WaterProvider, useWater } from './contexts/WaterContext';\r\nimport ChatBar from './components/ChatBar';\r\nimport SetupTab from './components/SetupTab';\r\nimport FertilizerTab from './components/FertilizerTab';\r\nimport AnalysisTab from './components/AnalysisTab';\r\nimport DetailsTab from './components/DetailsTab';\r\nimport ReferencesTab from './components/ReferencesTab';\r\nimport SettingsPage from './components/SettingsPage';\r\nimport Navigation from './components/Navigation';\r\nimport ErrorBoundary from './components/ErrorBoundary';\r\nimport AIAssistantIntegration, { AIAssistantTab } from './components/AIAssistant';\r\nimport { trackCustomEvent } from './utils/performance';\r\nimport {\r\n  NUTRIENT_FIELDS,\r\n  GROWTH_STAGES,\r\n  WATER_TYPES,\r\n  BASE_FERTILIZER_DATABASE,\r\n  LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS,\r\n  TABS_CONFIG,\r\n  TAB_MIXING_ASSISTANT,\r\n  TAB_WATERING_SCHEDULER,\r\n  TAB_SETTINGS,\r\n  TAB_AI_ASSISTANT,\r\n} from './constants';\r\nimport { useApiKey } from './hooks/useApiKey';\r\nimport MixingAssistant from './components/MixingAssistant';\r\nimport WateringScheduler from './components/WateringScheduler';\r\nimport { Fertilizer } from './types';\r\n\r\nconst DarkModeToggle = () => {\r\n  const { theme, toggleTheme } = useTheme();\r\n  return (\r\n    <button\r\n      onClick={toggleTheme}\r\n      className=\"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300\"\r\n      title=\"Toggle Dark Mode\"\r\n    >\r\n      {theme === 'light' ? (\r\n        <svg\r\n          className=\"w-5 h-5\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M12 3v1m0 16v1m8.66-13.66l-.71.71M4.05 19.07l-.71.71M21 12h-1M4 12H3m16.66 5.66l-.71-.71M4.05 4.93l-.71-.71\" />\r\n        </svg>\r\n      ) : (\r\n        <svg\r\n          className=\"w-5 h-5\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z\" />\r\n        </svg>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nfunction mergeFertilizerDatabases(\r\n  baseDb: Record<string, Fertilizer>,\r\n  customList: Fertilizer[]\r\n): Record<string, Fertilizer> {\r\n  const customDb: Record<string, Fertilizer> = {};\r\n  (customList || []).forEach((fert) => {\r\n    const id = fert.id || `custom_${fert.name.replace(/\\s+/g, '_').toLowerCase()}_${Date.now()}`;\r\n    const composition: Record<string, number> = {};\r\n    Object.entries(fert.composition || {}).forEach(([k, v]) => {\r\n      composition[k.toLowerCase()] = Number(v) || 0;\r\n    });\r\n    customDb[id] = {\r\n      ...fert,\r\n      id,\r\n      name: fert.name,\r\n      type: fert.type || 'liquid',\r\n      unit: fert.unit || 'ml',\r\n      composition,\r\n      description: fert.description || 'Benutzerdefinierter Dünger',\r\n    };\r\n  });\r\n  return { ...baseDb, ...customDb };\r\n}\r\n\r\nconst AppLayout = () => {\r\n  const [activeTab, setActiveTab] = useState(TABS_CONFIG[0].id);\r\n\r\n  // Enhanced tab switching with performance tracking\r\n  const handleTabChange = (tabId: string) => {\r\n    trackCustomEvent('tab_switch', { from: activeTab, to: tabId });\r\n    setActiveTab(tabId);\r\n  };\r\n  const [fertilizerDatabase, setFertilizerDatabase] = useState(() => {\r\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS);\r\n    let customList = [];\r\n    try {\r\n      if (stored) customList = JSON.parse(stored);\r\n    } catch {\r\n      // Silently ignore parsing errors and use empty array\r\n    }\r\n    return mergeFertilizerDatabases(BASE_FERTILIZER_DATABASE, customList);\r\n  });\r\n  const [analysisInputs, setAnalysisInputs] = useState({\r\n    NUTRIENT_FIELDS,\r\n    GROWTH_STAGES,\r\n    WATER_TYPES,\r\n    fertilizerDatabase,\r\n    selectedFertilizers: [],\r\n    waterVolume: 10,\r\n    growthStage: Object.keys(GROWTH_STAGES)[0],\r\n    waterType: Object.keys(WATER_TYPES)[0],\r\n    customWaterProfile: {},\r\n    results: {\r\n      nutrients: {},\r\n      contributions: {},\r\n      stage: GROWTH_STAGES[Object.keys(GROWTH_STAGES)[0]],\r\n    },\r\n  });\r\n  const { apiKey } = useApiKey();\r\n  const { addToast } = useToasts();\r\n  const [aiLoading, setAiLoading] = useState(false);\r\n  const [aiMessage, setAiMessage] = useState(\r\n    \"Hallo! Ich bin dein KI-Helfer. Frag mich z.B. 'Wie erstelle ich einen Dünger?' oder 'Ist mein N-Wert ok?' oder 'Was ist EC?'\"\r\n  );\r\n  const { mixedWater } = useWater();\r\n  const chatSuggestions: string[] = ['Wie erstelle ich einen Dünger?', 'Ist mein N-Wert ok?', 'Was ist EC?'];\r\n\r\n  // Stabilize the onAnalysisUpdate callback to prevent hot reload loops\r\n  const handleAnalysisUpdate = React.useCallback((data: Record<string, unknown>) => {\r\n    setAnalysisInputs(data);\r\n  }, []);\r\n\r\n  // Handle AI-recommended nutrient adjustments\r\n  const handleNutrientAdjustment = React.useCallback((adjustments: Record<string, number>) => {\r\n    setAnalysisInputs(prev => ({\r\n      ...prev,\r\n      results: {\r\n        ...prev.results,\r\n        nutrients: {\r\n          ...prev.results.nutrients,\r\n          ...adjustments\r\n        }\r\n      }\r\n    }));\r\n\r\n    addToast('AI-Empfehlungen angewendet', 'success');\r\n    trackCustomEvent('ai_recommendation_applied', { adjustments });\r\n  }, [addToast]);\r\n\r\n  // Handle AI recommendation applications\r\n  const handleRecommendationApplied = React.useCallback((recommendation: {\r\n    type: string;\r\n    priority: string;\r\n  }) => {\r\n    trackCustomEvent('ai_recommendation_applied', {\r\n      type: recommendation.type,\r\n      priority: recommendation.priority\r\n    });\r\n  }, []);\r\n\r\n  // Refresh fertilizer database when custom fertilizers change\r\n  const refreshFertilizerDatabase = React.useCallback(() => {\r\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS);\r\n    let customList = [];\r\n    try {\r\n      if (stored) customList = JSON.parse(stored);\r\n    } catch {\r\n      // Silently ignore parsing errors and use empty array\r\n    }\r\n    setFertilizerDatabase(mergeFertilizerDatabases(BASE_FERTILIZER_DATABASE, customList));\r\n  }, []);\r\n\r\n  // Listen for storage changes (in case another tab updates custom fertilizers)\r\n  React.useEffect(() => {\r\n    const handler = (e: StorageEvent) => {\r\n      if (e.key === LOCAL_STORAGE_KEY_CUSTOM_FERTILIZERS) refreshFertilizerDatabase();\r\n    };\r\n    window.addEventListener('storage', handler);\r\n    return () => window.removeEventListener('storage', handler);\r\n  }, []);\r\n\r\n  const handleSendAI = async (userMessage: string) => {\r\n    if (!apiKey) {\r\n      addToast('API Key fehlt! Bitte geben Sie Ihren Google Gemini API Key in den Einstellungen ein.', 'error', 8000);\r\n      return;\r\n    }\r\n\r\n    // Validate user message\r\n    if (!userMessage.trim()) {\r\n      addToast('Bitte geben Sie eine Nachricht ein.', 'warning');\r\n      return;\r\n    }\r\n\r\n    setAiLoading(true);\r\n    setAiMessage('Denke nach...');\r\n    \r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\r\n\r\n      const response = await fetch(\r\n        'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent',\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-goog-api-key': apiKey\r\n          },\r\n          body: JSON.stringify({\r\n            contents: [{ role: 'user', parts: [{ text: userMessage }] }],\r\n            generationConfig: { temperature: 0.6, maxOutputTokens: 150 },\r\n            safetySettings: [\r\n              { category: 'HARM_CATEGORY_HARASSMENT', threshold: 'BLOCK_MEDIUM_AND_ABOVE' },\r\n              { category: 'HARM_CATEGORY_HATE_SPEECH', threshold: 'BLOCK_MEDIUM_AND_ABOVE' },\r\n              { category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT', threshold: 'BLOCK_MEDIUM_AND_ABOVE' },\r\n              { category: 'HARM_CATEGORY_DANGEROUS_CONTENT', threshold: 'BLOCK_MEDIUM_AND_ABOVE' },\r\n            ],\r\n          }),\r\n          signal: controller.signal\r\n        }\r\n      );\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (!response.ok) {\r\n        let errorMsg = `HTTP ${response.status}`;\r\n        \r\n        try {\r\n          const errorData = await response.json();\r\n          errorMsg = errorData.error?.message || errorMsg;\r\n          \r\n          // Handle specific error cases\r\n          if (response.status === 400) {\r\n            errorMsg = 'Ungültige Anfrage. Bitte überprüfen Sie Ihren API Key.';\r\n          } else if (response.status === 401) {\r\n            errorMsg = 'API Key ungültig oder abgelaufen. Bitte überprüfen Sie Ihren API Key.';\r\n          } else if (response.status === 403) {\r\n            errorMsg = 'Zugriff verweigert. Bitte überprüfen Sie Ihre API Key Berechtigungen.';\r\n          } else if (response.status === 429) {\r\n            errorMsg = 'Zu viele Anfragen. Bitte warten Sie einen Moment und versuchen Sie es erneut.';\r\n          } else if (response.status >= 500) {\r\n            errorMsg = 'Server-Fehler. Bitte versuchen Sie es später erneut.';\r\n          }\r\n        } catch {\r\n          // Silently handle JSON parsing errors\r\n        }\r\n\r\n        setAiMessage(`AI Fehler: ${errorMsg}`);\r\n        addToast(`API Fehler: ${errorMsg}`, 'error', 8000);\r\n      } else {\r\n        const data = await response.json();\r\n        if (data.candidates?.[0]?.content?.parts?.[0]?.text) {\r\n          setAiMessage(data.candidates[0].content.parts[0].text.trim());\r\n        } else if (data.promptFeedback?.blockReason) {\r\n          const blockReason = data.promptFeedback.blockReason;\r\n          setAiMessage(`Anfrage blockiert: ${blockReason}. Bitte formulieren Sie Ihre Frage anders.`);\r\n          addToast(`Anfrage blockiert: ${blockReason}. Bitte formulieren Sie Ihre Frage anders.`, 'warning', 8000);\r\n        } else {\r\n          setAiMessage('Keine Antwort erhalten. Bitte versuchen Sie es erneut.');\r\n          addToast('Keine Antwort von der AI erhalten.', 'warning');\r\n        }\r\n      }\r\n    } catch (error: unknown) {\r\n      let errorMessage = 'Fehler bei der Antwortgenerierung.';\r\n\r\n      if (error instanceof Error) {\r\n        if (error.name === 'AbortError') {\r\n          errorMessage = 'Anfrage-Timeout. Bitte versuchen Sie es erneut.';\r\n        } else if (error.message?.includes('Failed to fetch')) {\r\n          errorMessage = 'Netzwerkfehler. Bitte überprüfen Sie Ihre Internetverbindung.';\r\n        } else {\r\n          errorMessage = `Fehler: ${error.message}`;\r\n        }\r\n      }\r\n      \r\n      setAiMessage(errorMessage);\r\n      addToast(errorMessage, 'error', 8000);\r\n    } finally {\r\n      setAiLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div className=\"min-h-screen bg-stone-50 transition-colors duration-300\">\r\n        <Navigation activeTab={activeTab} setActiveTab={handleTabChange} />\r\n\r\n        {/* Header with AI Chat */}\r\n        <header className=\"md:ml-64 bg-white/80 backdrop-blur-sm border-b border-stone-200 sticky top-0 z-40\">\r\n          <div className=\"px-6 py-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-stone-900\">\r\n                  {TABS_CONFIG.find(tab => tab.id === activeTab)?.label || 'NutriCalc'}\r\n                </h2>\r\n                <p className=\"text-stone-600 text-sm\">\r\n                  {TABS_CONFIG.find(tab => tab.id === activeTab)?.description || 'Nutrient calculation and analysis'}\r\n                </p>\r\n              </div>\r\n              <DarkModeToggle />\r\n            </div>\r\n\r\n            <ErrorBoundary>\r\n              <ChatBar\r\n                apiKey={!!apiKey}\r\n                onSend={handleSendAI}\r\n                isLoading={aiLoading}\r\n                displayMessage={aiMessage}\r\n                suggestions={chatSuggestions}\r\n              />\r\n            </ErrorBoundary>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"md:ml-64 px-6 py-8 pb-20 md:pb-8\">\r\n          <div className=\"max-w-6xl mx-auto\">\r\n            <ErrorBoundary>\r\n            {activeTab === TABS_CONFIG[0].id && (\r\n              <SetupTab\r\n                NUTRIENT_FIELDS={NUTRIENT_FIELDS}\r\n                GROWTH_STAGES={GROWTH_STAGES}\r\n                WATER_TYPES={WATER_TYPES}\r\n                fertilizerDatabase={fertilizerDatabase}\r\n                onAnalysisUpdate={handleAnalysisUpdate}\r\n                mixedWater={mixedWater}\r\n              />\r\n            )}\r\n            {activeTab === TABS_CONFIG[1].id && <DetailsTab results={analysisInputs.results} />}\r\n            {activeTab === TABS_CONFIG[2].id && <AnalysisTab {...analysisInputs} />}\r\n            {activeTab === TABS_CONFIG[3].id && (\r\n              <FertilizerTab refreshFertilizerDatabase={refreshFertilizerDatabase} />\r\n            )}\r\n            {activeTab === TAB_AI_ASSISTANT && (\r\n              <AIAssistantTab\r\n                context={{\r\n                  nutrients: analysisInputs.results.nutrients || {},\r\n                  growthStage: analysisInputs.growthStage,\r\n                  waterType: analysisInputs.waterType,\r\n                  waterVolume: analysisInputs.waterVolume,\r\n                  selectedFertilizers: analysisInputs.selectedFertilizers,\r\n                  userLevel: 'intermediate',\r\n                  language: 'de',\r\n                  environmentalData: {\r\n                    ph: analysisInputs.results.nutrients?.ph,\r\n                    ec: analysisInputs.results.nutrients?.ec,\r\n                  }\r\n                }}\r\n              />\r\n            )}\r\n            {activeTab === TAB_SETTINGS && <SettingsPage />}\r\n            {activeTab === TAB_MIXING_ASSISTANT && (\r\n              <MixingAssistant\r\n                fertilizerDatabase={fertilizerDatabase}\r\n                GROWTH_STAGES={GROWTH_STAGES}\r\n                WATER_TYPES={WATER_TYPES}\r\n              />\r\n            )}\r\n            {activeTab === TAB_WATERING_SCHEDULER && <WateringScheduler />}\r\n            {activeTab === TABS_CONFIG[TABS_CONFIG.length - 1].id && <ReferencesTab />}\r\n            </ErrorBoundary>\r\n          </div>\r\n        </main>\r\n\r\n        {/* AI Assistant Integration - Show floating widget on all tabs except settings */}\r\n        {activeTab !== TAB_SETTINGS && (\r\n          <AIAssistantIntegration\r\n            nutrients={analysisInputs.results.nutrients || {}}\r\n            growthStage={analysisInputs.growthStage}\r\n            waterType={analysisInputs.waterType}\r\n            waterVolume={analysisInputs.waterVolume}\r\n            selectedFertilizers={analysisInputs.selectedFertilizers}\r\n            userLevel=\"intermediate\"\r\n            language=\"de\"\r\n            environmentalData={{\r\n              ph: analysisInputs.results.nutrients?.ph,\r\n              ec: analysisInputs.results.nutrients?.ec,\r\n            }}\r\n            showFloatingWidget={true}\r\n            enableProactiveAlerts={true}\r\n            onNutrientAdjustment={handleNutrientAdjustment}\r\n            onRecommendationApplied={handleRecommendationApplied}\r\n          />\r\n        )}\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nconst App = () => (\r\n  <ThemeProvider>\r\n    <ToastProvider>\r\n      <WaterProvider>\r\n        <AppLayout />\r\n      </WaterProvider>\r\n    </ToastProvider>\r\n  </ThemeProvider>\r\n);\r\n\r\nexport default App;\r\n","import './styles/index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n"],"file":"assets/index-87650a9e.js"}